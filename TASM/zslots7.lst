ion.inc line 0346: Forward reference in equate: (plotsscreen)
ion.inc line 0347: Forward reference in equate: (plotsscreen)
ion.inc line 0348: Forward reference in equate: (plotsscreen)
ion.inc line 0349: Forward reference in equate: (saferam1)
ion.inc line 0350: Forward reference in equate: (saferam1)
ion.inc line 0351: Forward reference in equate: (saferam2)
ion.inc line 0352: Forward reference in equate: (saferam2)
ion.inc line 0353: Forward reference in equate: (progptr)
ion.inc line 0354: Forward reference in equate: (imathptr1)
ion.inc line 0355: Forward reference in equate: (_copygbuf)
ion.inc line 0356: Forward reference in equate: (_cleargbuf)
ion.inc line 0357: Forward reference in equate: (_clrlcdf)
ion.inc line 0358: Forward reference in equate: (_clrscrf)
ion.inc line 0359: Forward reference in equate: (_chksysvar)
ion.inc line 0360: Forward reference in equate: (saferam3)
ion.inc line 0361: Forward reference in equate: (saferam1)
ion.inc line 0363: Forward reference in equate: (cmdshad)
0001   0000             ;-------------------------------------------------------------------------
0002   0000             ;Slots - by M1nzfrischer
0003   0000             ;
0004   0000             ;
0005   0000             ;       (C)2024
0006   0000             ;
0007   0000             ;-------------------------------------------------------------------------
0008   0000             ;
0009   0000             ;
0010   0000             ;TODO:
0011   0000             ;
0012   0000             ;2/16:
0013   0000             ;can save a full animated spin into slot_fin_state
0014   0000             ;  [ ]get 2nd spin forward working
0015   0000             ;  [ ]re-impl win check & anim
0016   0000             ;[ ] create a more general to-draw function, that draws, not just board state, but
0017   0000             ;       [ ] can draw from an array of coordinates that map to 
0018   0000             ;        drawCol 1 2 3 4 5 xx  ;1 draws winBox, 0 skips
0019   0000             ;            [ ] 0 1 0 1 0 00  ;row 1
0020   0000             ;                1 0 1 0 1 00  
0021   0000             ;                0 1 0 1 0 00
0022   0000             ;
0023   0000             ;[ ] how much does 100% largeIonSprite affect performance?
0024   0000             ;
0025   0000             ;[ ] re-seed the RNG with variable contents of calc (userVars etc)
0026   0000             ;[ ] remove fastCopy and replace with ionFastCopy(if fastCopy isn't modified).  Modified?  N                  
0027   0000             ;[ ] add	a,(64/2)-(32/2) ;self modification division to solve symbol ratio performance()
0028   0000             ;[ ] all lines marked with ##, FIX for 16byte accuracy.(when L > $FF, requiring full HL addr.)
0029   0000             ;[ ] self mod HL, BC, Offset macro?
0030   0000             ;[ ] make sure IY usage isn't destorying system VARs.
0031   0000             ;[ ] make sure all memory wipes are accurate (win_anim_array & win_states_)
0032   0000             ;[ ] log symbol also in slot_win_states?     (symbol, line#, inArow) (x, y) too? so anim_wins is easier.
0033   0000             ;[ ] how to clear stack & exit cleanly?
0034   0000             ;[ ] FIREBALLS? 
0035   0000             ;[ ] spin with the winner, win with the spinner
0036   0000             ;[ ] draw line through winning payline being animated | or win box?
0037   0000             ;[ ] turn off split screen modes to ensure lines draw correctly always
0038   0000             ;[ ] merge ANDSrite, XORSprite & ORSprite into same routine - should take a parameter
0039   0000             ;[ ]* move all clearable memory on-top of eachother, so we can LDIR them all in 1 command.
0040   0000             ;[ ]* getSysInfo system command to retrieve real calculator's unique product code, etc.
0041   0000             
0042   0000             ;//////////////////test commands\\\\\\\\\\\\\\\\\\\\
0043   0000             ; ei \ halt
0044   0000             ;Pause:
0045   0000             ;  DI                  ; disable interrupts
0046   0000             ;  LD  A, 01           ; bit 3 = lcd status
0047   0000             ;  OUT ($03), A        ; bit 0 = ON-interrupt status
0048   0000             ;  EI                  ; enable interrupts
0049   0000             ;  HALT                ; wait for ON (that's the only interrupt)
0050   0000             ;  RET
0051   0000             
0056   0000                .list                ;  \
0057   0000~            #ifdef TI83P            ;   \
0058   0000~               .org  progstart-2    ;    | Standard Ion
0059   0000~               .db   $BB,$6D        ;   /  Program Header
0060   0000             #else                   ;  /
zslots7.z80 line 0061: Label not found: (progstart)
0061   20000                .org  progstart      ; /
0062   20000             #endif                  ;/
0063   20000                ret                  ; use xor a if libraries are not used
zslots7.z80 line 0063: unrecognized instruction.          (RET)
0064   20000                jr    nc,start       ; jump to the start
zslots7.z80 line 0064: unrecognized instruction.          (JR)
0065   20000                                     ; of the program
0066   20000 7A 73 6C 6F    .db   "zslots by m1nzfrisher",0
0066   20004 74 73 20 62 
0066   20008 79 20 6D 31 
0066   2000C 6E 7A 66 72 
0066   20010 69 73 68 65 
0066   20014 72 00 
0067   20016             COORD   .equ    8A3Ah
0068   20016             
0069   20016             #define debug
0070   20016             
0071   20016             
0072   20016             START:         
0073   20016             
0074   20016                            LD    (startSP), SP                 ;save the originating stack pointer for debugging & clean exits
zslots7.z80 line 0074: unrecognized instruction.          (LD)
0075   20016                            SET   textWrite, (IY+sgrflags)      ;set flag to write text to grbuffer, not screen.
zslots7.z80 line 0075: unrecognized instruction.          (SET)
0076   20016                            SET   textInverse, (IY+textFlags)   ;invert text
zslots7.z80 line 0076: unrecognized instruction.          (SET)
0077   20016                            SET   preClrForMode, (IY+newDispF) ;preclear space for text
zslots7.z80 line 0077: unrecognized instruction.          (SET)
0078   20016                           ; SET   0, (IY + 60)                  ;IY+60=plotflags3, b0=bufferOnly
0079   20016             Begin:         LD   HL,$0000
zslots7.z80 line 0079: Label not found: (Begin)
zslots7.z80 line 0079: label value misalligned.           (Begin)
zslots7.z80 line 0079: unrecognized instruction.          (Begin)
0080   20016                            LD   (COORD),HL
zslots7.z80 line 0080: unrecognized instruction.          (LD)
0081   20016                            ;turn flags off
0082   20016              
0083   20016                            CALL updateBet
zslots7.z80 line 0083: unrecognized instruction.          (CALL)
0084   20016             
0085   20016                
0086   20016             ;turn off interrupts
0087   20016                            di
zslots7.z80 line 0087: unrecognized instruction.          (DI)
0088   20016             
0089   20016             ;Set the calc to the highest speed
0090   20016                            ;in a,(2)
0091   20016                            ;rla
0092   20016                            ;sbc a,a
0093   20016                            ;out (20h),a 
0094   20016             backFromBonus:
0095   20016                            bcall(_GrBufClr)                    ;clear graph buffer(plotSScreen)
zslots7.z80 line 0095: unrecognized instruction.          (BCALL(_GRBUFCLR))
0096   20016                            ;LD   HL,PLOTSSCREEN		;sets half LCD black
0097   20016                            ;LD   DE,PLOTSSCREEN+1
0098   20016                            ;LD   (HL),$FF
0099   20016                            ;LD   BC,64*12
0100   20016                            ;LDIR
0101   20016             
0102   20016                            jp spin                  ;first game, no animation of spinning
zslots7.z80 line 0102: unrecognized instruction.          (JP)
0103   20016             ;make sure there's enough money
0104   20016             prep_spin:       
0105   20016                            ld HL, (new_money)
zslots7.z80 line 0105: unrecognized instruction.          (LD)
0106   20016                            LD (money), HL           
zslots7.z80 line 0106: unrecognized instruction.          (LD)
0107   20016                            ld A, 0
zslots7.z80 line 0107: unrecognized instruction.          (LD)
0108   20016                            ld (cur_win_total), A
zslots7.z80 line 0108: unrecognized instruction.          (LD)
0109   20016                            ld (cur_win_total+1), A
zslots7.z80 line 0109: unrecognized instruction.          (LD)
0110   20016                            inc a
zslots7.z80 line 0110: unrecognized instruction.          (INC)
0111   20016                            ld (cflags), a 
zslots7.z80 line 0111: unrecognized instruction.          (LD)
0112   20016             
0113   20016             
0114   20016             ;[ ] if in the middle of a current spin
0115   20016             ;[ ] immediately stop reels & save to fin_state
0116   20016             ;[ ] then check wins
0117   20016                     ;if 1, animate until next enter is pressed
0118   20016                     ;if 0, isWaiting = 1, spinning =0
0119   20016                            ld a, (bt_flags)
zslots7.z80 line 0119: unrecognized instruction.          (LD)
0120   20016                            ;counting and waiting = false
0121   20016                            and %11110011
zslots7.z80 line 0121: unrecognized instruction.          (AND)
0122   20016                            ;spinning is flipped
0123   20016                            xor %10
zslots7.z80 line 0123: unrecognized instruction.          (XOR)
0124   20016                            or  $80        ;turn on clearTop
zslots7.z80 line 0124: unrecognized instruction.          (OR)
0125   20016                            ld (bt_flags), a
zslots7.z80 line 0125: unrecognized instruction.          (LD)
0126   20016                            and %10          
zslots7.z80 line 0126: unrecognized instruction.          (AND)
0127   20016                            jp z, stopSpin
zslots7.z80 line 0127: unrecognized instruction.          (JP)
0128   20016             
0129   20016                         
0130   20016             
0131   20016             update_display:
0132   20016                            
0133   20016                            LD HL, _NUM_XY_MONEY
zslots7.z80 line 0133: unrecognized instruction.          (LD)
0134   20016                            LD (PenCol), HL   
zslots7.z80 line 0134: unrecognized instruction.          (LD)
0135   20016                            LD HL, (money)     ;HL is now new money +1$  
zslots7.z80 line 0135: unrecognized instruction.          (LD)
0136   20016                            bcall(_setxxxxop2)          ;puts 16bit(xxxx) HL into OP2
zslots7.z80 line 0136: unrecognized instruction.          (BCALL(_SETXXXXOP2))
0137   20016             	           bcall(_op2toop1)            ;OP2 to OP1   
zslots7.z80 line 0137: unrecognized instruction.          (BCALL(_OP2TOOP1))
0138   20016             	           bcall(_dispop1a)            ;write OP1 to screen, at (PenCol, PenRow)
zslots7.z80 line 0138: unrecognized instruction.          (BCALL(_DISPOP1A))
0139   20016             
0140   20016                            call resetBoardMask
zslots7.z80 line 0140: unrecognized instruction.          (CALL)
0141   20016             
0142   20016                            ld a, (bt_flags)
zslots7.z80 line 0142: unrecognized instruction.          (LD)
0143   20016                            res isWin, a
zslots7.z80 line 0143: unrecognized instruction.          (RES)
0144   20016             
0145   20016                            ld HL, (money)
zslots7.z80 line 0145: unrecognized instruction.          (LD)
0146   20016                            ld DE, (_totalBet)
zslots7.z80 line 0146: unrecognized instruction.          (LD)
0147   20016                            SBC HL, DE
zslots7.z80 line 0147: unrecognized instruction.          (SBC)
0148   20016                            ret c
zslots7.z80 line 0148: unrecognized instruction.          (RET)
0149   20016                            ld (money), HL
zslots7.z80 line 0149: unrecognized instruction.          (LD)
0150   20016                            LD (new_money), HL     
zslots7.z80 line 0150: unrecognized instruction.          (LD)
0151   20016                            ;all is refreshed, check if SPIN cancelled a bonus win animation
0152   20016                            bit isBonus, a
zslots7.z80 line 0152: unrecognized instruction.          (BIT)
0153   20016                            ld (bt_flags), a
zslots7.z80 line 0153: unrecognized instruction.          (LD)
0154   20016                            jp nz, begin_BONUS
zslots7.z80 line 0154: unrecognized instruction.          (JP)
0155   20016             
0156   20016                            LD   HL,win_anim_array		            ;wipe animation array, for next spin
zslots7.z80 line 0156: unrecognized instruction.          (LD)
0157   20016                            LD   DE,win_anim_array+1
zslots7.z80 line 0157: unrecognized instruction.          (LD)
0158   20016                            LD   (HL),$00
zslots7.z80 line 0158: unrecognized instruction.          (LD)
0159   20016                            LD   BC, 24
zslots7.z80 line 0159: unrecognized instruction.          (LD)
0160   20016                            LDIR
zslots7.z80 line 0160: unrecognized instruction.          (LDIR)
0161   20016             
0162   20016                            LD   HL,slot_win_states		            ;zero out the mem
zslots7.z80 line 0162: unrecognized instruction.          (LD)
0163   20016                            LD   DE,slot_win_states+1
zslots7.z80 line 0163: unrecognized instruction.          (LD)
0164   20016                            LD   (HL),$0F
zslots7.z80 line 0164: unrecognized instruction.          (LD)
0165   20016                            LD   BC, 53
zslots7.z80 line 0165: unrecognized instruction.          (LD)
0166   20016                            LDIR
zslots7.z80 line 0166: unrecognized instruction.          (LDIR)
0167   20016             
0168   20016             
0169   20016             spin: 
0170   20016                            ;LD   HL, slot_cur_reel_state         ;set our pointer to beginning of board state
0171   20016                            ;LD   (data_p+8), HL                    ;hl = value@data.p
0172   20016                 
0173   20016                            LD   HL,win_anim_array  		        ;zero out the mem
zslots7.z80 line 0173: unrecognized instruction.          (LD)
0174   20016                            LD   DE,win_anim_array+1
zslots7.z80 line 0174: unrecognized instruction.          (LD)
0175   20016                            LD   (HL),$00
zslots7.z80 line 0175: unrecognized instruction.          (LD)
0176   20016                            LD   BC, 24
zslots7.z80 line 0176: unrecognized instruction.          (LD)
0177   20016                            LDIR
zslots7.z80 line 0177: unrecognized instruction.          (LDIR)
0178   20016             
0179   20016                            LD   HL,bonus_loc 		        ;zero out the mem
zslots7.z80 line 0179: unrecognized instruction.          (LD)
0180   20016                            LD   DE,bonus_loc+1
zslots7.z80 line 0180: unrecognized instruction.          (LD)
0181   20016                            LD   (HL),$FF
zslots7.z80 line 0181: unrecognized instruction.          (LD)
0182   20016                            LD   BC, 14
zslots7.z80 line 0182: unrecognized instruction.          (LD)
0183   20016                            LDIR
zslots7.z80 line 0183: unrecognized instruction.          (LDIR)
0184   20016             
0185   20016                            ld HL, slot_win_states    
zslots7.z80 line 0185: unrecognized instruction.          (LD)
0186   20016                            ld (data_p+6), HL          ;data_p6 will hold offset for storing data INTO slot_win_states 
zslots7.z80 line 0186: unrecognized instruction.          (LD)
0187   20016                    
0188   20016                            ;call draw_layer_machine                   ;machine
0189   20016                            call draw_mask_layer
zslots7.z80 line 0189: unrecognized instruction.          (CALL)
0190   20016                            call draw_layer_fillbg_top                ;black out                    
zslots7.z80 line 0190: unrecognized instruction.          (CALL)
0191   20016                            bcall(_GrBufCpy)                  ;buffer(plotSScreen) to display
zslots7.z80 line 0191: unrecognized instruction.          (BCALL(_GRBUFCPY))
0192   20016                   
0193   20016             
0194   20016             
0195   20016                            ; show me the money!!------------------------
0196   20016                            LD     HL, _TEXT_XY_CREDIT               
zslots7.z80 line 0196: unrecognized instruction.          (LD)
0197   20016                            LD     (PenCol), HL              ; PenCol comes before PenRow- 
zslots7.z80 line 0197: unrecognized instruction.          (LD)
0198   20016                           ; LD     HL, symbols+coin+_name
0199   20016             
0200   20016                            ;LD hl, $0003
0201   20016                            ;LD de, 1000
0202   20016                            ;call mult
0203   20016                            ;ld DE, (money)
0204   20016                            ;add HL, DE
0205   20016                            LD HL, money_string
zslots7.z80 line 0205: unrecognized instruction.          (LD)
0206   20016                            bcall(_VPutS)
zslots7.z80 line 0206: unrecognized instruction.          (BCALL(_VPUTS))
0207   20016             
0208   20016             
0209   20016                            LD HL, (money)
zslots7.z80 line 0209: unrecognized instruction.          (LD)
0210   20016                            bcall(_setxxxxop2)          ;puts 16bit(xxxx) HL into OP2
zslots7.z80 line 0210: unrecognized instruction.          (BCALL(_SETXXXXOP2))
0211   20016             	           bcall(_op2toop1)            ;OP2 to OP1   
zslots7.z80 line 0211: unrecognized instruction.          (BCALL(_OP2TOOP1))
0212   20016             	           bcall(_dispop1a)            ;write OP1 to screen, at (PenCol, PenRow)
zslots7.z80 line 0212: unrecognized instruction.          (BCALL(_DISPOP1A))
0213   20016             
0214   20016                            call draw_rmenu             
zslots7.z80 line 0214: unrecognized instruction.          (CALL)
0215   20016             
0216   20016                            call genStore_15_rng
zslots7.z80 line 0216: unrecognized instruction.          (CALL)
0217   20016                 
0218   20016                            ld a, (bt_flags)
zslots7.z80 line 0218: unrecognized instruction.          (LD)
0219   20016                            cp isFirstGame
zslots7.z80 line 0219: unrecognized instruction.          (CP)
0220   20016                            jr nz, skip_chk_win
zslots7.z80 line 0220: unrecognized instruction.          (JR)
0221   20016                     
0222   20016                            ;LD a, $34
0223   20016                            ;LD (aO), a                   ;update offset into coordinates data for Save_state
0224   20016                            ;LD HL, (slot_saved_reel_state)
0225   20016                            ;call chk_win_prep
0226   20016             
0227   20016             ;have to press spin to get here
0228   20016             ;may also be cancelling isSpinning animation of previous reel
0229   20016             ;Purpose: drop old board 2 full iterations (20 pixels) so there is a smooth transition
0230   20016             ;         into the new board state
0231   20016             
0232   20016             ;arrays should terminate with $FF
0233   20016             ;-load sprite array offset array into data_p pointer
0234   20016             
0235   20016             skip_chk_win:   
0236   20016                      
0237   20016                             RES isFirstGame, a 
zslots7.z80 line 0237: unrecognized instruction.          (RES)
0238   20016                             ld (bt_flags), a          
zslots7.z80 line 0238: unrecognized instruction.          (LD)
0239   20016                             ld HL, slot_cur_reel_state
zslots7.z80 line 0239: unrecognized instruction.          (LD)
0240   20016                             ld (data_p+8), HL
zslots7.z80 line 0240: unrecognized instruction.          (LD)
0241   20016                             ;ld HL, win_anim_array
0242   20016                             ld a, $1A               
zslots7.z80 line 0242: unrecognized instruction.          (LD)
0243   20016                             LD (aO), a
zslots7.z80 line 0243: unrecognized instruction.          (LD)
0244   20016                             jp draw_prep
zslots7.z80 line 0244: unrecognized instruction.          (JP)
0245   20016                             ;ld (WIN_ARRAY_OFF), A      ;0 if anim, $10 if cur_state 
0246   20016             from_main:      
0247   20016             
0248   20016                             ld a, (bt_flags)
zslots7.z80 line 0248: unrecognized instruction.          (LD)
0249   20016                             bit isWaiting, a
zslots7.z80 line 0249: unrecognized instruction.          (BIT)
0250   20016                             jp nz, MAIN_LOOP_PREP
zslots7.z80 line 0250: unrecognized instruction.          (JP)
0251   20016             draw_prep:      
0252   20016             
0253   20016             skip_Auto_Stop:  
0254   20016                             
0255   20016                             ;call draw_layer_machine
0256   20016                  
0257   20016                             ld a, (bt_flags)
zslots7.z80 line 0257: unrecognized instruction.          (LD)
0258   20016                             bit isWin, a
zslots7.z80 line 0258: unrecognized instruction.          (BIT)
0259   20016                             call z, draw_top_layers              
zslots7.z80 line 0259: unrecognized instruction.          (CALL)
0260   20016                             call draw_sarr_at_xarr_yarr
zslots7.z80 line 0260: unrecognized instruction.          (CALL)
0261   20016                             ld a, (bt_flags)
zslots7.z80 line 0261: unrecognized instruction.          (LD)
0262   20016                             bit clearTop, a
zslots7.z80 line 0262: unrecognized instruction.          (BIT)
0263   20016                             call nz, draw_layer_fillbg_top           
zslots7.z80 line 0263: unrecognized instruction.          (CALL)
0264   20016                             ;call draw_layer_fillbg_top   
0265   20016             
0266   20016                             LD HL, _TEXT_XY_CREDIT
zslots7.z80 line 0266: unrecognized instruction.          (LD)
0267   20016                             LD (PenCol), HL        
zslots7.z80 line 0267: unrecognized instruction.          (LD)
0268   20016                             LD HL, money_string
zslots7.z80 line 0268: unrecognized instruction.          (LD)
0269   20016                             bcall(_VPutS)
zslots7.z80 line 0269: unrecognized instruction.          (BCALL(_VPUTS))
0270   20016                             LD HL, _NUM_XY_MONEY               
zslots7.z80 line 0270: unrecognized instruction.          (LD)
0271   20016                             LD (PenCol), HL              ; PenCol comes before PenRow- 
zslots7.z80 line 0271: unrecognized instruction.          (LD)
0272   20016                             LD HL, (money)
zslots7.z80 line 0272: unrecognized instruction.          (LD)
0273   20016                             bcall(_setxxxxop2)          ;puts 16bit(xxxx) HL into OP2
zslots7.z80 line 0273: unrecognized instruction.          (BCALL(_SETXXXXOP2))
0274   20016             	            bcall(_op2toop1)            ;OP2 to OP1   
zslots7.z80 line 0274: unrecognized instruction.          (BCALL(_OP2TOOP1))
0275   20016             	            bcall(_dispop1a)            ;write OP1 to screen, at (PenCol, PenRow)
zslots7.z80 line 0275: unrecognized instruction.          (BCALL(_DISPOP1A))
0276   20016                             call ionFastCopy
zslots7.z80 line 0276: unrecognized instruction.          (CALL)
0277   20016             
0278   20016                             ld a, (bt_flags)
zslots7.z80 line 0278: unrecognized instruction.          (LD)
0279   20016                             bit isSpinning, a
zslots7.z80 line 0279: unrecognized instruction.          (BIT)
0280   20016                             call nz, advance_Spin_Anim
zslots7.z80 line 0280: unrecognized instruction.          (CALL)
0281   20016             
0282   20016                             ;if 
0283   20016                             ld a, (bt_flags)
zslots7.z80 line 0283: unrecognized instruction.          (LD)
0284   20016                             bit isWin, a
zslots7.z80 line 0284: unrecognized instruction.          (BIT)
0285   20016                             jp z, MAIN_LOOP_PREP
zslots7.z80 line 0285: unrecognized instruction.          (JP)
0286   20016                             bit isSpinning, a
zslots7.z80 line 0286: unrecognized instruction.          (BIT)
0287   20016                             jp nz, MAIN_LOOP_PREP            
zslots7.z80 line 0287: unrecognized instruction.          (JP)
0288   20016             
0289   20016             ;sudo:
0290   20016             ;WINIMATE()
0291   20016             ;if k>1, JP TIMERLOOP_: (whatever is on screen stays for 9 cicles max)
0292   20016             ;L1: 
0293   20016             ;    clear bottomLeft
0294   20016             ;    disp P6  
0295   20016             ;    p6++
0296   20016             ;    k = 1   
0297   20016             ;     
0298   20016             ;TIMERLOOP_:
0299   20016             ;for (; k<=10, k++)                 ;wait 10
0300   20016             ;    skip to MoneyCounting
0301   20016             ;display next or total? 
0302   20016             ;if (p6[i+1]!=0),                   ;more data to display
0303   20016             ;    update p6?(if not updated)
0304   20016             ;    jp L1                          ;10 more with new data
0305   20016             
0306   20016             ;ELSE:  (no more data to display, jump to total, wait 10, reset)
0307   20016             ;     clear bottomLeft
0308   20016             ;     disp total
0309   20016             ;     k = 2                     ;will run 9 iterations
0310   20016             ;     p6 = slot_win_states       ;reset p6
0311   20016             ;     fall
0312   20016             ;sudo:
0313   20016             ;WINIMATE()
0314   20016             ;if k>1, JP TIMERLOOP_: (whatever is on screen stays for 9 cicles max)
0315   20016             ;L1: 
0316   20016             ;    clear bottomLeft
0317   20016             ;    disp P6  
0318   20016             ;    p6++
0319   20016             ;    k = 1   
0320   20016             ;     
0321   20016             ;TIMERLOOP_:
0322   20016             ;for (; k<=10, k++)                 ;wait 10
0323   20016             ;    skip to MoneyCounting
0324   20016             ;display next or total? 
0325   20016             ;if (p6[i+1]!=0),                   ;more data to display
0326   20016             ;    update p6?(if not updated)
0327   20016             ;    jp L1                          ;10 more with new data
0328   20016             
0329   20016             ;ELSE:  (no more data to display, jump to total, wait 10, reset)
0330   20016             ;     clear bottomLeft
0331   20016             ;     disp total
0332   20016             ;     k = 2                     ;will run 9 iterations
0333   20016             ;     p6 = slot_win_states       ;reset p6
0334   20016             ;     fall
0335   20016             draw_flash_wins:           
0336   20016                            ;ld a, (bt_flags2)
0337   20016                            ;and %1
0338   20016                            ;jr z, notFromBonus
0339   20016                            ;halt
0340   20016                            ;halt
0341   20016             
0342   20016             
0343   20016             notFromBonus:
0344   20016             
0345   20016                            ;data_p6 holds the start of the win array here. never empty at i=0
0346   20016                            LD a, (bt_flags)
zslots7.z80 line 0346: unrecognized instruction.          (LD)
0347   20016                            RES clearTop, a
zslots7.z80 line 0347: unrecognized instruction.          (RES)
0348   20016                            ld (bt_flags), a
zslots7.z80 line 0348: unrecognized instruction.          (LD)
0349   20016             
0350   20016                            LD a, (cflags)
zslots7.z80 line 0350: unrecognized instruction.          (LD)
0351   20016                            cp $01               ;cant check against 0
zslots7.z80 line 0351: unrecognized instruction.          (CP)
0352   20016                            jp nz, timerloop_
zslots7.z80 line 0352: unrecognized instruction.          (JP)
0353   20016                            
0354   20016             
0355   20016                            ;draw first winning text
0356   20016                            LD HL, _TEXT_XY_TOPBC             ;bottom of top(needs to be centered) text
zslots7.z80 line 0356: unrecognized instruction.          (LD)
0357   20016                            LD (PenCol), HL
zslots7.z80 line 0357: unrecognized instruction.          (LD)
0358   20016                            LD HL, top_win_str1
zslots7.z80 line 0358: unrecognized instruction.          (LD)
0359   20016                            bcall(_vPutS)
zslots7.z80 line 0359: unrecognized instruction.          (BCALL(_VPUTS))
0360   20016                            call IONFastCopy             
zslots7.z80 line 0360: unrecognized instruction.          (CALL)
0361   20016             dfL1:         
0362   20016                            call draw_layer_fillbg_low
zslots7.z80 line 0362: unrecognized instruction.          (CALL)
0363   20016                            LD HL, _TEXT_XY_WINSTR       ;bottom left align pen
zslots7.z80 line 0363: unrecognized instruction.          (LD)
0364   20016                            LD (PenCol), HL
zslots7.z80 line 0364: unrecognized instruction.          (LD)
0365   20016                            LD HL, bot_win_clear
zslots7.z80 line 0365: unrecognized instruction.          (LD)
0366   20016                            bcall(_vputS)
zslots7.z80 line 0366: unrecognized instruction.          (BCALL(_VPUTS))
0367   20016                            LD HL, _TEXT_XY_WINSTR       ;bottom left align pen
zslots7.z80 line 0367: unrecognized instruction.          (LD)
0368   20016                            LD (PenCol), HL
zslots7.z80 line 0368: unrecognized instruction.          (LD)
0369   20016             
0370   20016                     ;display p6
0371   20016             
0372   20016                            LD HL, (data_p+6)
zslots7.z80 line 0372: unrecognized instruction.          (LD)
0373   20016                            inc hl
zslots7.z80 line 0373: unrecognized instruction.          (INC)
0374   20016                            ld (data_p+6), HL
zslots7.z80 line 0374: unrecognized instruction.          (LD)
0375   20016                            LD A, (HL)            
zslots7.z80 line 0375: unrecognized instruction.          (LD)
0376   20016             
0377   20016                            bcall(_setxxop1)            ;place A into OP1
zslots7.z80 line 0377: unrecognized instruction.          (BCALL(_SETXXOP1))
0378   20016             	           bcall(_dispop1a)            ;write OP1 to screen, at (PenCol, PenRow)          
zslots7.z80 line 0378: unrecognized instruction.          (BCALL(_DISPOP1A))
0379   20016                                                        ;x in a row                          
0380   20016                            LD HL, bot_win_str1
zslots7.z80 line 0380: unrecognized instruction.          (LD)
0381   20016                            bcall(_vputS)               ;"3 x "
zslots7.z80 line 0381: unrecognized instruction.          (BCALL(_VPUTS))
0382   20016                            
0383   20016                            LD HL, (data_p+6)
zslots7.z80 line 0383: unrecognized instruction.          (LD)
0384   20016                            inc HL
zslots7.z80 line 0384: unrecognized instruction.          (INC)
0385   20016                            LD A, (HL)               ;symID
zslots7.z80 line 0385: unrecognized instruction.          (LD)
0386   20016                            inc HL                   ;1st byte of total
zslots7.z80 line 0386: unrecognized instruction.          (INC)
0387   20016                            LD (data_p+6), HL
zslots7.z80 line 0387: unrecognized instruction.          (LD)
0388   20016                            LD HL, slot_sprites
zslots7.z80 line 0388: unrecognized instruction.          (LD)
0389   20016                            ADD A, A                    ;E contains 1-8 result of the rng symbol
zslots7.z80 line 0389: unrecognized instruction.          (ADD)
0390   20016                            ADD A, A                    ;(1-8)*8 = sprite offset
zslots7.z80 line 0390: unrecognized instruction.          (ADD)
0391   20016                            ADD A, A 
zslots7.z80 line 0391: unrecognized instruction.          (ADD)
0392   20016                            ld HL, slot_sprites
zslots7.z80 line 0392: unrecognized instruction.          (LD)
0393   20016                            ld (P_), HL
zslots7.z80 line 0393: unrecognized instruction.          (LD)
0394   20016                            call jumpAfromP_
zslots7.z80 line 0394: unrecognized instruction.          (CALL)
0395   20016                            LD A, (penRow)
zslots7.z80 line 0395: unrecognized instruction.          (LD)
0396   20016                            LD L, A
zslots7.z80 line 0396: unrecognized instruction.          (LD)
0397   20016                            LD A, (penCol)
zslots7.z80 line 0397: unrecognized instruction.          (LD)
0398   20016                            call XORSPR
zslots7.z80 line 0398: unrecognized instruction.          (CALL)
0399   20016                            LD A, (penCol)
zslots7.z80 line 0399: unrecognized instruction.          (LD)
0400   20016                            ADD A, $0A
zslots7.z80 line 0400: unrecognized instruction.          (ADD)
0401   20016                            LD (penCol), A
zslots7.z80 line 0401: unrecognized instruction.          (LD)
0402   20016                             ;cur line win total
0403   20016                            LD A, '='
zslots7.z80 line 0403: unrecognized instruction.          (LD)
0404   20016                            bcall(_VPutMap)            
zslots7.z80 line 0404: unrecognized instruction.          (BCALL(_VPUTMAP))
0405   20016                            LD A, ' '
zslots7.z80 line 0405: unrecognized instruction.          (LD)
0406   20016                            bcall(_VPutMap)            
zslots7.z80 line 0406: unrecognized instruction.          (BCALL(_VPUTMAP))
0407   20016                            LD A, '$'
zslots7.z80 line 0407: unrecognized instruction.          (LD)
0408   20016                            bcall(_VPutMap)          
zslots7.z80 line 0408: unrecognized instruction.          (BCALL(_VPUTMAP))
0409   20016             
0410   20016                            LD HL, (data_p+6)            ;translate total into printable HL  
zslots7.z80 line 0410: unrecognized instruction.          (LD)
0411   20016                            LD A, (HL)                   ;1st byte                                                                          
zslots7.z80 line 0411: unrecognized instruction.          (LD)
0412   20016                            INC HL                       ;----
zslots7.z80 line 0412: unrecognized instruction.          (INC)
0413   20016                            LD B, (HL)                   ;2nd byte
zslots7.z80 line 0413: unrecognized instruction.          (LD)
0414   20016                            inc HL 
zslots7.z80 line 0414: unrecognized instruction.          (INC)
0415   20016                            LD (data_p+6), HL            ;update p6 next win or 0F
zslots7.z80 line 0415: unrecognized instruction.          (LD)
0416   20016                            LD L, A                      ;
zslots7.z80 line 0416: unrecognized instruction.          (LD)
0417   20016                            LD A, B                      ;
zslots7.z80 line 0417: unrecognized instruction.          (LD)
0418   20016                            LD H, A                      ; 
zslots7.z80 line 0418: unrecognized instruction.          (LD)
0419   20016             
0420   20016             
0421   20016                            bcall(_setxxxxop2)           ;puts 16bit(xxxx) HL into OP2
zslots7.z80 line 0421: unrecognized instruction.          (BCALL(_SETXXXXOP2))
0422   20016             	           bcall(_op2toop1)             ;OP2 to OP1   
zslots7.z80 line 0422: unrecognized instruction.          (BCALL(_OP2TOOP1))
0423   20016             	           bcall(_dispop1a)             ;write OP1 to screen, at (PenCol, PenRow)
zslots7.z80 line 0423: unrecognized instruction.          (BCALL(_DISPOP1A))
0424   20016             
0425   20016             
0426   20016                            call IONFastCopy
zslots7.z80 line 0426: unrecognized instruction.          (CALL)
0427   20016             
0428   20016                     ;k = 1
0429   20016                     ;p6 is pointed to next win item.
0430   20016                           ld a, 1
zslots7.z80 line 0430: unrecognized instruction.          (LD)
0431   20016                           ld (cflags), a
zslots7.z80 line 0431: unrecognized instruction.          (LD)
0432   20016             timerloop_:    
0433   20016                           inc a
zslots7.z80 line 0433: unrecognized instruction.          (INC)
0434   20016                           ld (cflags), a
zslots7.z80 line 0434: unrecognized instruction.          (LD)
0435   20016                           cp $40                ;timer betwixt data total displays
zslots7.z80 line 0435: unrecognized instruction.          (CP)
0436   20016                           jr c, NoResetWinText
zslots7.z80 line 0436: unrecognized instruction.          (JR)
0437   20016                             ;1st win displayed. waited 10 cycles.  what are the states?
0438   20016                                 ;-1st win displayed correctly on screen "3 x K = $45
0439   20016                                 ;-p6 points to slot_win_states[0]
0440   20016                          
0441   20016             
0442   20016                           ;--waited 10 - next win or total
0443   20016                           LD HL, (data_p+6)
zslots7.z80 line 0443: unrecognized instruction.          (LD)
0444   20016                           LD A, (HL)
zslots7.z80 line 0444: unrecognized instruction.          (LD)
0445   20016                           cp $0f                ;nz = more wins exist, jump back to dfL1
zslots7.z80 line 0445: unrecognized instruction.          (CP)
0446   20016                           jp nz, dfL1
zslots7.z80 line 0446: unrecognized instruction.          (JP)
0447   20016             ;             ELSE:  (no more data to display, jump to total, wait 10, reset)
0448   20016             dispTotal:      
0449   20016                     ;display total
0450   20016                           call draw_layer_fillbg_low
zslots7.z80 line 0450: unrecognized instruction.          (CALL)
0451   20016                           LD HL, _TEXT_XY_WINSTR       ;bottom left align pen
zslots7.z80 line 0451: unrecognized instruction.          (LD)
0452   20016                           LD (PenCol), HL
zslots7.z80 line 0452: unrecognized instruction.          (LD)
0453   20016                           LD HL, bot_win_str2
zslots7.z80 line 0453: unrecognized instruction.          (LD)
0454   20016                           bcall(_vputS)
zslots7.z80 line 0454: unrecognized instruction.          (BCALL(_VPUTS))
0455   20016                     
0456   20016                           LD HL, (cur_win_total)
zslots7.z80 line 0456: unrecognized instruction.          (LD)
0457   20016                           bcall(_setxxxxop2)          ;puts 16bit(xxxx) HL into OP2
zslots7.z80 line 0457: unrecognized instruction.          (BCALL(_SETXXXXOP2))
0458   20016             	          bcall(_op2toop1)            ;OP2 to OP1   
zslots7.z80 line 0458: unrecognized instruction.          (BCALL(_OP2TOOP1))
0459   20016             	          bcall(_dispop1a)            ;write OP1 to screen, at (PenCol, PenRow)
zslots7.z80 line 0459: unrecognized instruction.          (BCALL(_DISPOP1A))
0460   20016                           call IONFastCopy            
zslots7.z80 line 0460: unrecognized instruction.          (CALL)
0461   20016                     ;k = 2
0462   20016                           ld a, $02
zslots7.z80 line 0462: unrecognized instruction.          (LD)
0463   20016                           ld (cflags), a
zslots7.z80 line 0463: unrecognized instruction.          (LD)
0464   20016                     ;p6 = slot_win_state
0465   20016                           ld HL, slot_win_states
zslots7.z80 line 0465: unrecognized instruction.          (LD)
0466   20016                           ld (data_p+6), HL
zslots7.z80 line 0466: unrecognized instruction.          (LD)
0467   20016             
0468   20016             NoResetWinText:              
0469   20016                            LD HL, win_anim_array
zslots7.z80 line 0469: unrecognized instruction.          (LD)
0470   20016                            LD (data_p+8), HL
zslots7.z80 line 0470: unrecognized instruction.          (LD)
0471   20016                            ;PUSH HL
0472   20016                            LD A, $00
zslots7.z80 line 0472: unrecognized instruction.          (LD)
0473   20016                            LD (aO), A 
zslots7.z80 line 0473: unrecognized instruction.          (LD)
0474   20016                            ;CALL DELAY
0475   20016             
0476   20016                            ;chk_win turned counting on immediately.  Keep counting until 'MoneyCounted:; is reached
0477   20016                            ld a, (bt_flags)    
zslots7.z80 line 0477: unrecognized instruction.          (LD)
0478   20016                            and %100         ;isCounting?
zslots7.z80 line 0478: unrecognized instruction.          (AND)
0479   20016                            CALL nz, _count_up
zslots7.z80 line 0479: unrecognized instruction.          (CALL)
0480   20016                            ;POP HL
0481   20016                            ;enter with these lines to skip rng and debug custom board from state.
0482   20016             
0483   20016                            ;ld hl, slot_onscreen_state
0484   20016                            ;ld (data_p), hl
0485   20016                            ;jr draw_COL
0486   20016             
0487   20016             MAIN_LOOP_PREP: 
0488   20016                             bcall(_getCSC)         ;A = KEY | CSC does not wait for keyPress | returns 0 on nokey pressed|AF/HL die 
zslots7.z80 line 0488: unrecognized instruction.          (BCALL(_GETCSC))
0489   20016                           
0490   20016             MAIN_LOOP:     
0491   20016             
0492   20016             
0493   20016             	          ;check if [CLEAR] is being pressed
0494   20016                            ; in a,(1)
0495   20016                            ; and 40h
0496   20016                            ; ret z
0497   20016                             cp $0f
zslots7.z80 line 0497: unrecognized instruction.          (CP)
0498   20016                             call z, smart_exit
zslots7.z80 line 0498: unrecognized instruction.          (CALL)
0499   20016                            ; in a,(1)
0500   20016                             cp 0Ch
zslots7.z80 line 0500: unrecognized instruction.          (CP)
0501   20016                             CALL z,_incMult  
zslots7.z80 line 0501: unrecognized instruction.          (CALL)
0502   20016                            ; in a,(1)
0503   20016                             cp 0Bh
zslots7.z80 line 0503: unrecognized instruction.          (CP)
0504   20016                             CALL z,_decLines
zslots7.z80 line 0504: unrecognized instruction.          (CALL)
0505   20016                            ; in a,(1)
0506   20016                             cp 0Ah
zslots7.z80 line 0506: unrecognized instruction.          (CP)
0507   20016                             CALL z,_incLines
zslots7.z80 line 0507: unrecognized instruction.          (CALL)
0508   20016                            ; in a,(1)
0509   20016                            ; and 10h
0510   20016                             cp 31h
zslots7.z80 line 0510: unrecognized instruction.          (CP)
0511   20016                             jp z, prep_spin              
zslots7.z80 line 0511: unrecognized instruction.          (JP)
0512   20016                             ;check if [ENTER] is being pressed
0513   20016              
0514   20016                             
0515   20016                             jp from_main
zslots7.z80 line 0515: unrecognized instruction.          (JP)
0516   20016             ;advancing old symbols down off of the board, animating, dropping new symbols in
0517   20016             ;---symbols are generally turned OFF at this point
0518   20016             ;---HL = pointer to array to be drawn.
0519   20016             advance_Spin_Anim:
0520   20016             
0521   20016                            ld a, (reelTimer)
zslots7.z80 line 0521: unrecognized instruction.          (LD)
0522   20016                            cp _GAMESPEED_
zslots7.z80 line 0522: unrecognized instruction.          (CP)
0523   20016                            jr z, copyFrozenReelToFinal
zslots7.z80 line 0523: unrecognized instruction.          (JR)
0524   20016                            
0525   20016                            ld a, (spinAnimCount)
zslots7.z80 line 0525: unrecognized instruction.          (LD)
0526   20016                            cp $06
zslots7.z80 line 0526: unrecognized instruction.          (CP)
0527   20016                            JR nc, pushBottomRowToTop
zslots7.z80 line 0527: unrecognized instruction.          (JR)
0528   20016                            add a, 6
zslots7.z80 line 0528: unrecognized instruction.          (ADD)
0529   20016                            
0530   20016                            ld (spinAnimCount), a 
zslots7.z80 line 0530: unrecognized instruction.          (LD)
0531   20016                            ret
zslots7.z80 line 0531: unrecognized instruction.          (RET)
0532   20016             pushBottomRowToTop:
0533   20016             
0534   20016                             ld a, 0
zslots7.z80 line 0534: unrecognized instruction.          (LD)
0535   20016                             LD (spinAnimCount), a
zslots7.z80 line 0535: unrecognized instruction.          (LD)
0536   20016                             ld a, (reelTimer)
zslots7.z80 line 0536: unrecognized instruction.          (LD)
0537   20016                             inc a
zslots7.z80 line 0537: unrecognized instruction.          (INC)
0538   20016                             ld (reelTimer), a
zslots7.z80 line 0538: unrecognized instruction.          (LD)
0539   20016             
0540   20016                             ;we want to shift, draw, then save -> mandate autostop
0541   20016                             call rotate_5x5
zslots7.z80 line 0541: unrecognized instruction.          (CALL)
0542   20016                             ;put bottom
0543   20016              
0544   20016                             ld a, (reelTimer)
zslots7.z80 line 0544: unrecognized instruction.          (LD)
0545   20016                             cp $07            ;how many spins before reel autostops
zslots7.z80 line 0545: unrecognized instruction.          (CP)
0546   20016                             ret nz
zslots7.z80 line 0546: unrecognized instruction.          (RET)
0547   20016                             ;a reel has autostopped
0548   20016             skipNextShift:  ld a, 1
zslots7.z80 line 0548: Label not found: (skipNextShift)
zslots7.z80 line 0548: label value misalligned.           (skipNextShift)
zslots7.z80 line 0548: unrecognized instruction.          (skipNextShift)
0549   20016                             ld a, (spinningReelNo)
zslots7.z80 line 0549: unrecognized instruction.          (LD)
0550   20016                             inc a
zslots7.z80 line 0550: unrecognized instruction.          (INC)
0551   20016                             ld b, a
zslots7.z80 line 0551: unrecognized instruction.          (LD)
0552   20016                             ld (spinningReelNo), a
zslots7.z80 line 0552: unrecognized instruction.          (LD)
0553   20016                             cp $05
zslots7.z80 line 0553: unrecognized instruction.          (CP)
0554   20016                             jp nc, quitSpinning_checkWin
zslots7.z80 line 0554: unrecognized instruction.          (JP)
0555   20016                             ld a, 0
zslots7.z80 line 0555: unrecognized instruction.          (LD)
0556   20016                             ld (reelTimer), a              
zslots7.z80 line 0556: unrecognized instruction.          (LD)
0557   20016             
0558   20016                             call mpl
zslots7.z80 line 0558: unrecognized instruction.          (CALL)
0559   20016                             LD (data_p+8), IX       ;get draw pointer to new offset mem.addr.
zslots7.z80 line 0559: unrecognized instruction.          (LD)
0560   20016                             ;LD HL, (data_p+8)
0561   20016                             ;LD (data_p), HL
0562   20016             
0563   20016                             ;ANDsprite Xcoord gets shifted right 16bits
0564   20016                             ;so that only spinning reels get spun
0565   20016             
0566   20016                             LD a, (maskXYWH)
zslots7.z80 line 0566: unrecognized instruction.          (LD)
0567   20016                             add a, $10
zslots7.z80 line 0567: unrecognized instruction.          (ADD)
0568   20016                             LD (maskXYWH), a
zslots7.z80 line 0568: unrecognized instruction.          (LD)
0569   20016                             LD a, (maskXYWH+2)
zslots7.z80 line 0569: unrecognized instruction.          (LD)
0570   20016                             sub 16
zslots7.z80 line 0570: unrecognized instruction.          (SUB)
0571   20016                             ld (maskXYWH+2), a
zslots7.z80 line 0571: unrecognized instruction.          (LD)
0572   20016                             ret
zslots7.z80 line 0572: unrecognized instruction.          (RET)
0573   20016             
0574   20016             ;HL+(5b)->IX->(data_p+8)
0575   20016             ;preconditions:
0576   20016             ;   b=multiplier
0577   20016             ;   a=0
0578   20016                                    
0579   20016             
0580   20016             copyFrozenReelToFinal:
0581   20016                             ld a, (spinningReelNo)
zslots7.z80 line 0581: unrecognized instruction.          (LD)
0582   20016                             inc a
zslots7.z80 line 0582: unrecognized instruction.          (INC)
0583   20016                             ld b, a
zslots7.z80 line 0583: unrecognized instruction.          (LD)
0584   20016                             ld a, 0
zslots7.z80 line 0584: unrecognized instruction.          (LD)
0585   20016                             call mpb       
zslots7.z80 line 0585: unrecognized instruction.          (CALL)
0586   20016                             LD (P_), IX     
zslots7.z80 line 0586: unrecognized instruction.          (LD)
0587   20016                             LD HL, (P_)
zslots7.z80 line 0587: unrecognized instruction.          (LD)
0588   20016             
0589   20016                             LD BC, $0034
zslots7.z80 line 0589: unrecognized instruction.          (LD)
0590   20016                             SBC HL, BC
zslots7.z80 line 0590: unrecognized instruction.          (SBC)
0591   20016                             EX  DE, HL
zslots7.z80 line 0591: unrecognized instruction.          (EX)
0592   20016                             LD HL, (P_)
zslots7.z80 line 0592: unrecognized instruction.          (LD)
0593   20016                             LD BC, 5
zslots7.z80 line 0593: unrecognized instruction.          (LD)
0594   20016                             LDIR                 
zslots7.z80 line 0594: unrecognized instruction.          (LDIR)
0595   20016                
0596   20016                             jr skipNextShift
zslots7.z80 line 0596: unrecognized instruction.          (JR)
0597   20016             
0598   20016             mpl:            add a, 5
zslots7.z80 line 0598: Label not found: (mpl)
zslots7.z80 line 0598: label value misalligned.           (mpl)
zslots7.z80 line 0598: unrecognized instruction.          (mpl)
0599   20016             mpb:            
0600   20016                             DJNZ mpl
zslots7.z80 line 0600: unrecognized instruction.          (DJNZ)
0601   20016             
0602   20016                             ;[ ] need to move the locked column into a staging area ()
0603   20016                             ld   HL, slot_cur_reel_state
zslots7.z80 line 0603: unrecognized instruction.          (LD)
0604   20016                             ld   (P_), HL
zslots7.z80 line 0604: unrecognized instruction.          (LD)
0605   20016                             call jumpAfromP_
zslots7.z80 line 0605: unrecognized instruction.          (CALL)
0606   20016                             ret
zslots7.z80 line 0606: unrecognized instruction.          (RET)
0607   20016             
0608   20016             stopSpin:       
0609   20016                             ;save rest of board over to fin_state
0610   20016                             ;wherever datap+8 is, copy rest
0611   20016                             ;it will draw the rest when we turn isSpinning off
0612   20016                             LD HL, slot_cur_reel_state+26
zslots7.z80 line 0612: unrecognized instruction.          (LD)
0613   20016                             LD DE, (data_p+8)
zslots7.z80 line 0613: unrecognized instruction.          (LD)
0614   20016                             SBC HL, DE
zslots7.z80 line 0614: unrecognized instruction.          (SBC)
0615   20016                             ld A, L
zslots7.z80 line 0615: unrecognized instruction.          (LD)
0616   20016                             LD HL, (data_p+8)
zslots7.z80 line 0616: unrecognized instruction.          (LD)
0617   20016                             LD BC, $0034
zslots7.z80 line 0617: unrecognized instruction.          (LD)
0618   20016                             SBC HL, BC
zslots7.z80 line 0618: unrecognized instruction.          (SBC)
0619   20016                             EX DE, HL
zslots7.z80 line 0619: unrecognized instruction.          (EX)
0620   20016                             LD HL, (data_p+8)
zslots7.z80 line 0620: unrecognized instruction.          (LD)
0621   20016                             ld B, 00h
zslots7.z80 line 0621: unrecognized instruction.          (LD)
0622   20016                             ld C, A
zslots7.z80 line 0622: unrecognized instruction.          (LD)
0623   20016                             LDIR
zslots7.z80 line 0623: unrecognized instruction.          (LDIR)
0624   20016                             LD HL, slot_fin_reel_state
zslots7.z80 line 0624: unrecognized instruction.          (LD)
0625   20016                             LD (data_p+8), HL
zslots7.z80 line 0625: unrecognized instruction.          (LD)
0626   20016                             call resetBoardMask         ;spin cancelled, clear board & redraw
zslots7.z80 line 0626: unrecognized instruction.          (CALL)
0627   20016                             call draw_mask_layer
zslots7.z80 line 0627: unrecognized instruction.          (CALL)
0628   20016                             call IONfastCopy
zslots7.z80 line 0628: unrecognized instruction.          (CALL)
0629   20016                             ld a, $4E
zslots7.z80 line 0629: unrecognized instruction.          (LD)
0630   20016                             ld (aO), a     ;offset to draw fin_state x,y's
zslots7.z80 line 0630: unrecognized instruction.          (LD)
0631   20016                             ;call draw_sarr_at_xarr_yarr
0632   20016                             ;call IONfastCopy
0633   20016                             call quitSpinning_checkWin
zslots7.z80 line 0633: unrecognized instruction.          (CALL)
0634   20016             
0635   20016                             jp draw_prep
zslots7.z80 line 0635: unrecognized instruction.          (JP)
0636   20016             
0637   20016             
0638   20016             quitSpinning_checkWin:
0639   20016             ;isFirstGame:    .EQU     0
0640   20016             ;isSpinning:     .EQU     1
0641   20016             ;isCounting:     .EQU     2
0642   20016             ;isWaiting:      .EQU     3
0643   20016             ;isWin:          .EQU     4
0644   20016                             ld a, 0
zslots7.z80 line 0644: unrecognized instruction.          (LD)
0645   20016                             ld (spinningReelNo), a
zslots7.z80 line 0645: unrecognized instruction.          (LD)
0646   20016                             ld (reelTimer), a
zslots7.z80 line 0646: unrecognized instruction.          (LD)
0647   20016                             ld (spinAnimCount), a
zslots7.z80 line 0647: unrecognized instruction.          (LD)
0648   20016             
0649   20016                             call chk_win_prep          ;the only place checkWin is invoked.  Only way to set isWin
zslots7.z80 line 0649: unrecognized instruction.          (CALL)
0650   20016             
0651   20016                             ld a, (bt_flags)
zslots7.z80 line 0651: unrecognized instruction.          (LD)
0652   20016                             res isSpinning, a
zslots7.z80 line 0652: unrecognized instruction.          (RES)
0653   20016                             bit isWin, a
zslots7.z80 line 0653: unrecognized instruction.          (BIT)
0654   20016                             ld (bt_flags), a
zslots7.z80 line 0654: unrecognized instruction.          (LD)
0655   20016                             ret nz
zslots7.z80 line 0655: unrecognized instruction.          (RET)
0656   20016                             or %1000                    ;isWaiting = true if no win
zslots7.z80 line 0656: unrecognized instruction.          (OR)
0657   20016                             ld (bt_flags), a
zslots7.z80 line 0657: unrecognized instruction.          (LD)
0658   20016             
0659   20016             resetBoardMask:
0660   20016                             ld a, $00
zslots7.z80 line 0660: unrecognized instruction.          (LD)
0661   20016                             ld (maskXYWH), a
zslots7.z80 line 0661: unrecognized instruction.          (LD)
0662   20016                             ld a, $16
zslots7.z80 line 0662: unrecognized instruction.          (LD)
0663   20016                             ld (maskXYWH+1), a
zslots7.z80 line 0663: unrecognized instruction.          (LD)
0664   20016                             ld a, $50
zslots7.z80 line 0664: unrecognized instruction.          (LD)
0665   20016                             ld (maskXYWH+2), a
zslots7.z80 line 0665: unrecognized instruction.          (LD)
0666   20016                             ld a, $20
zslots7.z80 line 0666: unrecognized instruction.          (LD)
0667   20016                             ld (maskXYWH+3), a
zslots7.z80 line 0667: unrecognized instruction.          (LD)
0668   20016             
0669   20016             
0670   20016                             ret
zslots7.z80 line 0670: unrecognized instruction.          (RET)
0671   20016             
0672   20016             ;take bottom 1 rows, move to top
0673   20016             ;shift top 3 rows down 2.
0674   20016             rotate_5x5:     
0675   20016                             LD HL, slot_cur_reel_state+20
zslots7.z80 line 0675: unrecognized instruction.          (LD)
0676   20016                             LD DE, slot_saved_reel_state+20
zslots7.z80 line 0676: unrecognized instruction.          (LD)
0677   20016                             LD BC, 5
zslots7.z80 line 0677: unrecognized instruction.          (LD)
0678   20016                             LDIR
zslots7.z80 line 0678: unrecognized instruction.          (LDIR)
0679   20016                             LD HL, slot_cur_reel_state+23
zslots7.z80 line 0679: unrecognized instruction.          (LD)
0680   20016                             LD DE, slot_cur_reel_state+24
zslots7.z80 line 0680: unrecognized instruction.          (LD)
0681   20016                             LD BC, 24
zslots7.z80 line 0681: unrecognized instruction.          (LD)
0682   20016                             LDDR
zslots7.z80 line 0682: unrecognized instruction.          (LDDR)
0683   20016                             LD HL, slot_saved_reel_state+20
zslots7.z80 line 0683: unrecognized instruction.          (LD)
0684   20016                             LD DE, slot_cur_reel_state
zslots7.z80 line 0684: unrecognized instruction.          (LD)
0685   20016                             LD BC, 5
zslots7.z80 line 0685: unrecognized instruction.          (LD)
0686   20016                             LDIR   
zslots7.z80 line 0686: unrecognized instruction.          (LDIR)
0687   20016                             ret
zslots7.z80 line 0687: unrecognized instruction.          (RET)
0688   20016             
0689   20016             SINGLE_BET:
0690   20016                            RET
zslots7.z80 line 0690: unrecognized instruction.          (RET)
0691   20016             DOUBLE_BET:
0692   20016                            RET
zslots7.z80 line 0692: unrecognized instruction.          (RET)
0693   20016             
0694   20016             SPIN_ENTER:
0695   20016                            ;initialize x
0696   20016                            LD  HL, COORD
zslots7.z80 line 0696: unrecognized instruction.          (LD)
0697   20016                            LD  A, 12
zslots7.z80 line 0697: unrecognized instruction.          (LD)
0698   20016                            LD (COORD), a
zslots7.z80 line 0698: unrecognized instruction.          (LD)
0699   20016             
0700   20016             SPIN_RESET:
0701   20016             
0702   20016             REEL1:
0703   20016                            LD HL, COORD+1
zslots7.z80 line 0703: unrecognized instruction.          (LD)
0704   20016                            LD A, 23
zslots7.z80 line 0704: unrecognized instruction.          (LD)
0705   20016                            LD (HL), A
zslots7.z80 line 0705: unrecognized instruction.          (LD)
0706   20016                            LD IX,slot_sprites
zslots7.z80 line 0706: unrecognized instruction.          (LD)
0707   20016             
0708   20016             SPIN_LOOP:      
0709   20016                            ;prep registers for display
0710   20016                            LD   HL,COORD
zslots7.z80 line 0710: unrecognized instruction.          (LD)
0711   20016                            LD   A,(HL)
zslots7.z80 line 0711: unrecognized instruction.          (LD)
0712   20016                            INC  HL
zslots7.z80 line 0712: unrecognized instruction.          (INC)
0713   20016                            LD   L,(HL)
zslots7.z80 line 0713: unrecognized instruction.          (LD)
0714   20016                            ld   B, 8                ;Large Sprite height
zslots7.z80 line 0714: unrecognized instruction.          (LD)
0715   20016                            ld   C, 1                ;Large Sprite width
zslots7.z80 line 0715: unrecognized instruction.          (LD)
0716   20016                            CALL XORSPR               
zslots7.z80 line 0716: unrecognized instruction.          (CALL)
0717   20016             
0718   20016                            ;lets go vertical
0719   20016                            LD HL, COORD
zslots7.z80 line 0719: unrecognized instruction.          (LD)
0720   20016                            LD A, 16
zslots7.z80 line 0720: unrecognized instruction.          (LD)
0721   20016                            ADD A, (HL)
zslots7.z80 line 0721: unrecognized instruction.          (ADD)
0722   20016                            LD (COORD), A
zslots7.z80 line 0722: unrecognized instruction.          (LD)
0723   20016                            CP 92
zslots7.z80 line 0723: unrecognized instruction.          (CP)
0724   20016                            CALL Z, SPIN_RESET_X
zslots7.z80 line 0724: unrecognized instruction.          (CALL)
0725   20016             
0726   20016                            LD HL, COORD+1
zslots7.z80 line 0726: unrecognized instruction.          (LD)
0727   20016                            INC (HL)
zslots7.z80 line 0727: unrecognized instruction.          (INC)
0728   20016                            LD A, (COORD+1)
zslots7.z80 line 0728: unrecognized instruction.          (LD)
0729   20016                            CP 53
zslots7.z80 line 0729: unrecognized instruction.          (CP)
0730   20016                            CALL Z, SPIN_RESET
zslots7.z80 line 0730: unrecognized instruction.          (CALL)
0731   20016             
0732   20016                            JR SPIN_LOOP
zslots7.z80 line 0732: unrecognized instruction.          (JR)
0733   20016             
0734   20016             SPIN_RESET_X:
0735   20016             
0736   20016                            LD a, 0Ch
zslots7.z80 line 0736: unrecognized instruction.          (LD)
0737   20016                            LD (COORD), a
zslots7.z80 line 0737: unrecognized instruction.          (LD)
0738   20016                            RET
zslots7.z80 line 0738: unrecognized instruction.          (RET)
0739   20016             
0740   20016             ;checks win conditions against board condition for payable circumstance
0741   20016             ;payrules[9lines][5rules]:          Each rule contains a cur_reel_state offset per payline
0742   20016             ;cur_reel_state:                    current board spun into
0743   20016             ;slot_cur_reel_state:  
0744   20016             ;           1     2    3               5....                       A    B                             ;term 
0745   20016             ;    .db    $02, $03, $04, $02, $03,   $04, $02, $03, $04, $02,    $03, $04, $02, $03, $08,    $0F
0746   20016             ;
0747   20016             ;pay_rules:   
0748   20016             ;    .db    $02, $05, $08, $0B, $0E              ;pay line 1
0749   20016             ;    .db    $01, $04, $07, $0A, $0D              ;         2-3
0750   20016             ;
0751   20016             chk_win_prep:  
0752   20016                            ld a, 0
zslots7.z80 line 0752: unrecognized instruction.          (LD)
0753   20016                            ld (COORD), a    ;y axis of 2D array
zslots7.z80 line 0753: unrecognized instruction.          (LD)
0754   20016             CHK_WIN:   
0755   20016             ;19EC2        
0756   20016             
0757   20016                            LD HL, pay_rules
zslots7.z80 line 0757: unrecognized instruction.          (LD)
0758   20016                            ;jump to next row of pay rules    
0759   20016             
0760   20016                            LD B, A
zslots7.z80 line 0760: unrecognized instruction.          (LD)
0761   20016                            cp 0            ;check if on the first line *A=slot_win_states[0], first win line#
zslots7.z80 line 0761: unrecognized instruction.          (CP)
0762   20016                            jp z, skip_m
zslots7.z80 line 0762: unrecognized instruction.          (JP)
0763   20016                            ld a, 0          
zslots7.z80 line 0763: unrecognized instruction.          (LD)
0764   20016             mtpl:          
0765   20016                            add a, 6
zslots7.z80 line 0765: unrecognized instruction.          (ADD)
0766   20016                            djnz mtpl       
zslots7.z80 line 0766: unrecognized instruction.          (DJNZ)
0767   20016             skip_m:
0768   20016                            LD HL, pay_rules
zslots7.z80 line 0768: unrecognized instruction.          (LD)
0769   20016                            LD (P_), HL
zslots7.z80 line 0769: unrecognized instruction.          (LD)
0770   20016                            call jumpAfromP_
zslots7.z80 line 0770: unrecognized instruction.          (CALL)
0771   20016                            LD (data_p), IX
zslots7.z80 line 0771: unrecognized instruction.          (LD)
0772   20016                            LD C, 0
zslots7.z80 line 0772: unrecognized instruction.          (LD)
0773   20016             chk_loop:     
0774   20016             ;19EFA
0775   20016                            LD A,  (IX)                      ;offset aka (rule[i])   
zslots7.z80 line 0775: unrecognized instruction.          (LD)
0776   20016                            DEC A                            ;offsets need to be zero index,
zslots7.z80 line 0776: unrecognized instruction.          (DEC)
0777   20016                            LD HL, slot_chk_win_state       
zslots7.z80 line 0777: unrecognized instruction.          (LD)
0778   20016                            LD (P_), HL  
zslots7.z80 line 0778: unrecognized instruction.          (LD)
0779   20016                            call jumpAfromP_     
zslots7.z80 line 0779: unrecognized instruction.          (CALL)
0780   20016                            LD A, (IX)            ;A holds first reel symbol to compare**correct
zslots7.z80 line 0780: unrecognized instruction.          (LD)
0781   20016                            cp $09                ;if bonus symbol, skip
zslots7.z80 line 0781: unrecognized instruction.          (CP)
0782   20016                            jr z, bon_skip
zslots7.z80 line 0782: unrecognized instruction.          (JR)
0783   20016                                      
0784   20016             chk_loop2:
0785   20016             ;19EE7     
0786   20016                            ld hl, (data_p)  
zslots7.z80 line 0786: unrecognized instruction.          (LD)
0787   20016                            INC hl                ;point to next pay rule  
zslots7.z80 line 0787: unrecognized instruction.          (INC)
0788   20016                            ld (data_p), hl   
zslots7.z80 line 0788: unrecognized instruction.          (LD)
0789   20016                            LD B, A               ;move A temporarily for use in jumpA routine          
zslots7.z80 line 0789: unrecognized instruction.          (LD)
0790   20016                            LD  A, (HL)           ;next offset
zslots7.z80 line 0790: unrecognized instruction.          (LD)
0791   20016                            DEC A                 ;offsets need to be zero index,    
zslots7.z80 line 0791: unrecognized instruction.          (DEC)
0792   20016                            LD HL, slot_chk_win_state
zslots7.z80 line 0792: unrecognized instruction.          (LD)
0793   20016                            LD (P_), HL 
zslots7.z80 line 0793: unrecognized instruction.          (LD)
0794   20016                            CALL jumpAfromP_
zslots7.z80 line 0794: unrecognized instruction.          (CALL)
0795   20016             ;19F03    
0796   20016                            LD E, (IX)   ;2nd reel to compare
zslots7.z80 line 0796: unrecognized instruction.          (LD)
0797   20016                            INC C
zslots7.z80 line 0797: unrecognized instruction.          (INC)
0798   20016                            LD A, B      ;get 1st compare symbol back into A, for comparison with E              
zslots7.z80 line 0798: unrecognized instruction.          (LD)
0799   20016                            cp E         
zslots7.z80 line 0799: unrecognized instruction.          (CP)
0800   20016                            jr z, chk_loop2
zslots7.z80 line 0800: unrecognized instruction.          (JR)
0801   20016                                     
0802   20016                            ;a no match condition has been reached.  
0803   20016                            ld B, A                          ;b = symbolID for saving in win_log
zslots7.z80 line 0803: unrecognized instruction.          (LD)
0804   20016                            ld a, c
zslots7.z80 line 0804: unrecognized instruction.          (LD)
0805   20016                            cp 3                             ;was a win booked before matches ended?
zslots7.z80 line 0805: unrecognized instruction.          (CP)
0806   20016                            call nc, win_log                 ;deal with win & return to find new wins
zslots7.z80 line 0806: unrecognized instruction.          (CALL)
0807   20016                           
0808   20016             bon_skip:      ld HL, COORD                     ;COORD=(statvars)18A3A
zslots7.z80 line 0808: Label not found: (bon_skip)
zslots7.z80 line 0808: label value misalligned.           (bon_skip)
zslots7.z80 line 0808: unrecognized instruction.          (bon_skip)
0809   20016                            ld a, (HL)  
zslots7.z80 line 0809: unrecognized instruction.          (LD)
0810   20016                            INC A                            ;go to next set of pay_rules (Ycolumn)
zslots7.z80 line 0810: unrecognized instruction.          (INC)
0811   20016                            ld (COORD), A
zslots7.z80 line 0811: unrecognized instruction.          (LD)
0812   20016                            ld d, a
zslots7.z80 line 0812: unrecognized instruction.          (LD)
0813   20016                            ld a, (_lines)
zslots7.z80 line 0813: unrecognized instruction.          (LD)
0814   20016                            ld b, a
zslots7.z80 line 0814: unrecognized instruction.          (LD)
0815   20016                            ld a, d
zslots7.z80 line 0815: unrecognized instruction.          (LD)
0816   20016                            cp b                             ;no. of paylines
zslots7.z80 line 0816: unrecognized instruction.          (CP)
0817   20016                            jr c, CHK_WIN
zslots7.z80 line 0817: unrecognized instruction.          (JR)
0818   20016                            ;all normal wins are logged   
0819   20016                            call checkForBonus
zslots7.z80 line 0819: unrecognized instruction.          (CALL)
0820   20016                            ld HL, slot_win_states        
zslots7.z80 line 0820: unrecognized instruction.          (LD)
0821   20016                            ld a, (HL)
zslots7.z80 line 0821: unrecognized instruction.          (LD)
0822   20016                            cp $0F
zslots7.z80 line 0822: unrecognized instruction.          (CP)
0823   20016                            call nz, classify_wins
zslots7.z80 line 0823: unrecognized instruction.          (CALL)
0824   20016             
0825   20016                            ret
zslots7.z80 line 0825: unrecognized instruction.          (RET)
0826   20016             
0827   20016             ;checks full board for a bonus condition
0828   20016             checkForBonus:
0829   20016                            ;ld a, (bonusCount)
0830   20016                            ld c, 0
zslots7.z80 line 0830: unrecognized instruction.          (LD)
0831   20016                            ld d, 1              ;counter to identify board position
zslots7.z80 line 0831: unrecognized instruction.          (LD)
0832   20016                            ld IX, bonus_loc     ;pay_rules[A]
zslots7.z80 line 0832: unrecognized instruction.          (LD)
0833   20016                            ld HL, slot_fin_reel_state
zslots7.z80 line 0833: unrecognized instruction.          (LD)
0834   20016             
0835   20016                            
0836   20016             bonC_lop_i:    ld b, 3              ;
zslots7.z80 line 0836: Label not found: (bonC_lop_i)
zslots7.z80 line 0836: label value misalligned.           (bonC_lop_i)
zslots7.z80 line 0836: unrecognized instruction.          (bonC_lop_i)
0837   20016                            inc d
zslots7.z80 line 0837: unrecognized instruction.          (INC)
0838   20016                            inc d
zslots7.z80 line 0838: unrecognized instruction.          (INC)
0839   20016                            inc HL
zslots7.z80 line 0839: unrecognized instruction.          (INC)
0840   20016                            inc HL
zslots7.z80 line 0840: unrecognized instruction.          (INC)
0841   20016             bonC_lop_j:     ld a, (HL)
zslots7.z80 line 0841: Label not found: (bonC_lop_j)
zslots7.z80 line 0841: label value misalligned.           (bonC_lop_j)
zslots7.z80 line 0841: unrecognized instruction.          (bonC_lop_j)
0842   20016                             cp 09h       
zslots7.z80 line 0842: unrecognized instruction.          (CP)
0843   20016                             jp nz, noB
zslots7.z80 line 0843: unrecognized instruction.          (JP)
0844   20016                             inc c 
zslots7.z80 line 0844: unrecognized instruction.          (INC)
0845   20016                             ld (IX), d
zslots7.z80 line 0845: unrecognized instruction.          (LD)
0846   20016                             inc IX             
zslots7.z80 line 0846: unrecognized instruction.          (INC)
0847   20016             noB:            inc HL
zslots7.z80 line 0847: Label not found: (noB)
zslots7.z80 line 0847: label value misalligned.           (noB)
zslots7.z80 line 0847: unrecognized instruction.          (noB)
0848   20016                             inc d
zslots7.z80 line 0848: unrecognized instruction.          (INC)
0849   20016                             djnz bonC_lop_j
zslots7.z80 line 0849: unrecognized instruction.          (DJNZ)
0850   20016                            ld a, (HL)
zslots7.z80 line 0850: unrecognized instruction.          (LD)
0851   20016                            cp 0fh 
zslots7.z80 line 0851: unrecognized instruction.          (CP)
0852   20016                            jr z, bonC_end
zslots7.z80 line 0852: unrecognized instruction.          (JR)
0853   20016                            jr bonC_lop_i 
zslots7.z80 line 0853: unrecognized instruction.          (JR)
0854   20016             bonC_end:      ld a, c
zslots7.z80 line 0854: Label not found: (bonC_end)
zslots7.z80 line 0854: label value misalligned.           (bonC_end)
zslots7.z80 line 0854: unrecognized instruction.          (bonC_end)
0855   20016                            cp $04                   ;[ ]change to 4 bonus symbols on release copy
zslots7.z80 line 0855: unrecognized instruction.          (CP)
0856   20016                            jr nc, thereIsABonus
zslots7.z80 line 0856: unrecognized instruction.          (JR)
0857   20016                            ret
zslots7.z80 line 0857: unrecognized instruction.          (RET)
0858   20016             
0859   20016                            ;THERE IS A BONUS
0860   20016             thereIsABonus: ld a, (bt_flags)
zslots7.z80 line 0860: Label not found: (thereIsABonus)
zslots7.z80 line 0860: label value misalligned.           (thereIsABonus)
zslots7.z80 line 0860: unrecognized instruction.          (thereIsABonus)
0861   20016                            or %100000
zslots7.z80 line 0861: unrecognized instruction.          (OR)
0862   20016                            ld (bt_flags), a
zslots7.z80 line 0862: unrecognized instruction.          (LD)
0863   20016                            ld a, 09h        ;line number for bonus (payrule 10-1 for index)
zslots7.z80 line 0863: unrecognized instruction.          (LD)
0864   20016                            ld b, 09h        ;symID
zslots7.z80 line 0864: unrecognized instruction.          (LD)
0865   20016                            call win_log_bonus     ;log the bonus win
zslots7.z80 line 0865: unrecognized instruction.          (CALL)
0866   20016                            ret
zslots7.z80 line 0866: unrecognized instruction.          (RET)
0867   20016             
0868   20016             begin_BONUS:
0869   20016                 ;save visable board to curstate for board redraw when bonus is over
0870   20016                 ld hl, slot_fin_reel_state
zslots7.z80 line 0870: unrecognized instruction.          (LD)
0871   20016                 ld de, slot_cur_reel_state
zslots7.z80 line 0871: unrecognized instruction.          (LD)
0872   20016                 ld bc, 25
zslots7.z80 line 0872: unrecognized instruction.          (LD)
0873   20016                 ldir
zslots7.z80 line 0873: unrecognized instruction.          (LDIR)
0874   20016             
0875   20016                 ld A, 3
zslots7.z80 line 0875: unrecognized instruction.          (LD)
0876   20016                 ld (heartCount), A
zslots7.z80 line 0876: unrecognized instruction.          (LD)
0877   20016             
0878   20016                 call draw_layer_fillbg_low
zslots7.z80 line 0878: unrecognized instruction.          (CALL)
0879   20016                 call draw_layer_fillbg_top
zslots7.z80 line 0879: unrecognized instruction.          (CALL)
0880   20016                 ;draw bonus in top_lower
0881   20016                 ;bottom says, "press ^ to begin"
0882   20016                 ld HL, _TEXT_XY_TOPBC
zslots7.z80 line 0882: unrecognized instruction.          (LD)
0883   20016                 LD (PenCol), HL
zslots7.z80 line 0883: unrecognized instruction.          (LD)
0884   20016                 LD HL, top_win_BON
zslots7.z80 line 0884: unrecognized instruction.          (LD)
0885   20016                 bcall(_VputS)
zslots7.z80 line 0885: unrecognized instruction.          (BCALL(_VPUTS))
0886   20016             
0887   20016                 ld HL, _NUM_XY_MONEY
zslots7.z80 line 0887: unrecognized instruction.          (LD)
0888   20016                 LD (PenCol), HL
zslots7.z80 line 0888: unrecognized instruction.          (LD)
0889   20016                 LD HL, text_bot_expl1
zslots7.z80 line 0889: unrecognized instruction.          (LD)
0890   20016                 bcall(_VputS)
zslots7.z80 line 0890: unrecognized instruction.          (BCALL(_VPUTS))
0891   20016                 call IONFastCopy
zslots7.z80 line 0891: unrecognized instruction.          (CALL)
0892   20016             
0893   20016                 LD a,%11111101
zslots7.z80 line 0893: unrecognized instruction.          (LD)
0894   20016                 out (1),a
zslots7.z80 line 0894: unrecognized instruction.          (OUT)
0895   20016             
0896   20016                 ;check if [^] is being pressed
0897   20016                 in a,(1)
zslots7.z80 line 0897: unrecognized instruction.          (IN)
0898   20016                 and 20h
zslots7.z80 line 0898: unrecognized instruction.          (AND)
0899   20016                 jp z, _BONUS
zslots7.z80 line 0899: unrecognized instruction.          (JP)
0900   20016                 jr begin_BONUS
zslots7.z80 line 0900: unrecognized instruction.          (JR)
0901   20016             _BONUS:
0902   20016                 call draw_mask_layer
zslots7.z80 line 0902: unrecognized instruction.          (CALL)
0903   20016                 ;call draw_layer_machine
0904   20016                 call draw_layer_bonus_bg
zslots7.z80 line 0904: unrecognized instruction.          (CALL)
0905   20016             _BON_GK:    
0906   20016                 bcall(_getCSC)         ;A = KEY | CSC does not wait for keyPress | returns 0 on nokey pressed|AF/HL die 
zslots7.z80 line 0906: unrecognized instruction.          (BCALL(_GETCSC))
0907   20016                 cp $13
zslots7.z80 line 0907: unrecognized instruction.          (CP)
0908   20016                 jp z, _BONUS_COUNTDOWN
zslots7.z80 line 0908: unrecognized instruction.          (JP)
0909   20016                 jr _BON_GK
zslots7.z80 line 0909: unrecognized instruction.          (JR)
0910   20016             
0911   20016             _BONUS_COUNTDOWN:
0912   20016                 bcall(_GrBufClr)
zslots7.z80 line 0912: unrecognized instruction.          (BCALL(_GRBUFCLR))
0913   20016                 ;call draw_layer_machine
0914   20016                 ;call draw_mask_layer
0915   20016                 call draw_top_layers
zslots7.z80 line 0915: unrecognized instruction.          (CALL)
0916   20016                 ;call draw_layer_machine
0917   20016                 ;call draw_layer_fillall
0918   20016                 call bon_redraw 
zslots7.z80 line 0918: unrecognized instruction.          (CALL)
0919   20016             
0920   20016                 ld hl, _NUM_XY_MONEY
zslots7.z80 line 0920: unrecognized instruction.          (LD)
0921   20016                 ld a, l
zslots7.z80 line 0921: unrecognized instruction.          (LD)
0922   20016                 ld l, h
zslots7.z80 line 0922: unrecognized instruction.          (LD)
0923   20016                 ld b, 8
zslots7.z80 line 0923: unrecognized instruction.          (LD)
0924   20016                 ld ix, bonus_enemy1
zslots7.z80 line 0924: unrecognized instruction.          (LD)
0925   20016                 call ionPutSprite
zslots7.z80 line 0925: unrecognized instruction.          (CALL)
0926   20016                 
0927   20016                 ld hl, _NUM_XY_BOPCNT
zslots7.z80 line 0927: unrecognized instruction.          (LD)
0928   20016                 dec l
zslots7.z80 line 0928: unrecognized instruction.          (DEC)
0929   20016                 dec l
zslots7.z80 line 0929: unrecognized instruction.          (DEC)
0930   20016                 ld (penCol), hl
zslots7.z80 line 0930: unrecognized instruction.          (LD)
0931   20016                 ld A, ':'
zslots7.z80 line 0931: unrecognized instruction.          (LD)
0932   20016                 bcall(_VputMap)
zslots7.z80 line 0932: unrecognized instruction.          (BCALL(_VPUTMAP))
0933   20016                 ld A, '0'
zslots7.z80 line 0933: unrecognized instruction.          (LD)
0934   20016                 bcall(_VputMap)
zslots7.z80 line 0934: unrecognized instruction.          (BCALL(_VPUTMAP))
0935   20016             
0936   20016                 ;call draw_layer_fillall
0937   20016                 call IONFastCopy
zslots7.z80 line 0937: unrecognized instruction.          (CALL)
0938   20016                 call delay
zslots7.z80 line 0938: unrecognized instruction.          (CALL)
0939   20016                 jr _BONUS_LOAD_ENEMY
zslots7.z80 line 0939: unrecognized instruction.          (JR)
0940   20016             
0941   20016             _BONUS_ENEMY_SCHEDULER:
0942   20016                     ;flip coin
0943   20016                     ; if true, rng1-9
0944   20016                     ;   spot taken? skip
0945   20016                     ;   not taken? place enemy on location (frame 1)
0946   20016                 call rng8toA
zslots7.z80 line 0946: unrecognized instruction.          (CALL)
0947   20016                 cp 91h
zslots7.z80 line 0947: unrecognized instruction.          (CP)
0948   20016                 jr nc, _bonLPrep
zslots7.z80 line 0948: unrecognized instruction.          (JR)
0949   20016             _BONUS_LOAD_ENEMY:
0950   20016                 call rng8toA
zslots7.z80 line 0950: unrecognized instruction.          (CALL)
0951   20016                 cp $1C
zslots7.z80 line 0951: unrecognized instruction.          (CP)
0952   20016                 jr c, rngAis8
zslots7.z80 line 0952: unrecognized instruction.          (JR)
0953   20016                 AND  7
zslots7.z80 line 0953: unrecognized instruction.          (AND)
0954   20016                 jr rngAno8
zslots7.z80 line 0954: unrecognized instruction.          (JR)
0955   20016             rngAis8:        
0956   20016                 ld A, 8
zslots7.z80 line 0956: unrecognized instruction.          (LD)
0957   20016             rngAno8:  
0958   20016                 ld b, a
zslots7.z80 line 0958: unrecognized instruction.          (LD)
0959   20016                 ld hl, bonusBoard
zslots7.z80 line 0959: unrecognized instruction.          (LD)
0960   20016                 ld (P_), hl
zslots7.z80 line 0960: unrecognized instruction.          (LD)
0961   20016                 call jumpAfromP_
zslots7.z80 line 0961: unrecognized instruction.          (CALL)
0962   20016                 ld a, (IX)
zslots7.z80 line 0962: unrecognized instruction.          (LD)
0963   20016                 or %0
zslots7.z80 line 0963: unrecognized instruction.          (OR)
0964   20016                 jp nz, _bonLPrep  ;enemy already in location
zslots7.z80 line 0964: unrecognized instruction.          (JP)
0965   20016                 ld a, (bonusLvl)
zslots7.z80 line 0965: unrecognized instruction.          (LD)
0966   20016                 or %0
zslots7.z80 line 0966: unrecognized instruction.          (OR)
0967   20016                 jp z, lvl1enemy
zslots7.z80 line 0967: unrecognized instruction.          (JP)
0968   20016                 call rng8toA
zslots7.z80 line 0968: unrecognized instruction.          (CALL)
0969   20016                 ld b, a
zslots7.z80 line 0969: unrecognized instruction.          (LD)
0970   20016                 ;cp 99h
0971   20016                 ;jr nc, lvl1enemy
0972   20016                 ;zxc
0973   20016                 ld a, (bonusLvl)
zslots7.z80 line 0973: unrecognized instruction.          (LD)
0974   20016             
0975   20016                 and b 
zslots7.z80 line 0975: unrecognized instruction.          (AND)
0976   20016                 ld (IX+20), a                ;spike baddy
zslots7.z80 line 0976: unrecognized instruction.          (LD)
0977   20016                 jr allEnemyPrep
zslots7.z80 line 0977: unrecognized instruction.          (JR)
0978   20016             lvl1enemy:
0979   20016                 ld (IX+20), $00   ;enemy type = 0, lvl1 enemy   
zslots7.z80 line 0979: unrecognized instruction.          (LD)
0980   20016             allEnemyPrep:    
0981   20016                 ld (IX), 01h      ;no enemy in location, place new enemy @ frame1
zslots7.z80 line 0981: unrecognized instruction.          (LD)
0982   20016             _bonLPrep:
0983   20016                 ld hl, bonusBoard
zslots7.z80 line 0983: unrecognized instruction.          (LD)
0984   20016                 push hl
zslots7.z80 line 0984: unrecognized instruction.          (PUSH)
0985   20016             ;loop through all 9 board spots(hl), 
0986   20016             ;   is sprite done?
0987   20016             ;       animate a miss && -1 heart
0988   20016             ;       ret
0989   20016             ;   is sprite at peek? ret for (enemyTimer)
0990   20016             ;   not at peek?
0991   20016             ;       mask whole position from upperLeft to LowerRight
0992   20016             ;       draw sprite at current frame, in correct adjusted yPos
0993   20016             ;       frame++
0994   20016             ;------------SWATS--------------------------
0995   20016             ;   zero out swatted, missed, & expired positions
0996   20016             
0997   20016             ;  requires a pushed bonusBoard pointer in hl
0998   20016             _BONUS_LOOP:
0999   20016                 pop hl          ;bonusBoard Pointer
zslots7.z80 line 0999: unrecognized instruction.          (POP)
1000   20016                 ld a, (hl)
zslots7.z80 line 1000: unrecognized instruction.          (LD)
1001   20016                 cp $F0
zslots7.z80 line 1001: unrecognized instruction.          (CP)
1002   20016                 jp z, _BONUS_ENEMY_SCHEDULER        ;reached end of BoardChecks, re-cycle
zslots7.z80 line 1002: unrecognized instruction.          (JP)
1003   20016                 or %0
zslots7.z80 line 1003: unrecognized instruction.          (OR)
1004   20016                 jr nz, _drawBonusFrame
zslots7.z80 line 1004: unrecognized instruction.          (JR)
1005   20016                 ;empty position, inc & skip
1006   20016                 inc hl
zslots7.z80 line 1006: unrecognized instruction.          (INC)
1007   20016                 push hl
zslots7.z80 line 1007: unrecognized instruction.          (PUSH)
1008   20016                 jr _BONUS_LOOP
zslots7.z80 line 1008: unrecognized instruction.          (JR)
1009   20016             
1010   20016             ;hl contains pointer to frame number of current enemy
1011   20016             ;get xy by: 
1012   20016             ;   (hl - bonusBoard) -> A
1013   20016             ;   call bonusPosAtoXYinHL
1014   20016             
1015   20016             _drawBonusFrame:
1016   20016             ;has the baddie gone fully underground?
1017   20016                 push hl                 ;board location, holds frame#raw, for incrementing frameNo
zslots7.z80 line 1017: unrecognized instruction.          (PUSH)
1018   20016                     ld a, (hl)              ;rawFrameNo
zslots7.z80 line 1018: unrecognized instruction.          (LD)
1019   20016                     dec a                   ;1st frame = 0 position in frame map (1)
zslots7.z80 line 1019: unrecognized instruction.          (DEC)
1020   20016             
1021   20016                     ld de, bonusBoard
zslots7.z80 line 1021: unrecognized instruction.          (LD)
1022   20016                     sbc hl, de
zslots7.z80 line 1022: unrecognized instruction.          (SBC)
1023   20016                     ld c, l                 ;c=board position 123,456,789 
zslots7.z80 line 1023: unrecognized instruction.          (LD)
1024   20016                     ld hl, bonusFrameMap
zslots7.z80 line 1024: unrecognized instruction.          (LD)
1025   20016                     ld (P_), hl
zslots7.z80 line 1025: unrecognized instruction.          (LD)
1026   20016                     call jumpAfromP_        ;(ix) = drawable frame number
zslots7.z80 line 1026: unrecognized instruction.          (CALL)
1027   20016                     ld a, (IX)
zslots7.z80 line 1027: unrecognized instruction.          (LD)
1028   20016                     ld b, a
zslots7.z80 line 1028: unrecognized instruction.          (LD)
1029   20016                     push bc                 ;b = drawable frame number, c = board position 0-8
zslots7.z80 line 1029: unrecognized instruction.          (PUSH)
1030   20016                         ld a, c 
zslots7.z80 line 1030: unrecognized instruction.          (LD)
1031   20016                         call bonusPosAtoXYinHL
zslots7.z80 line 1031: unrecognized instruction.          (CALL)
1032   20016                     pop bc
zslots7.z80 line 1032: unrecognized instruction.          (POP)
1033   20016                 pop de
zslots7.z80 line 1033: unrecognized instruction.          (POP)
1034   20016                 push de 
zslots7.z80 line 1034: unrecognized instruction.          (PUSH)
1035   20016                     push bc 
zslots7.z80 line 1035: unrecognized instruction.          (PUSH)
1036   20016                         push hl         ;xy
zslots7.z80 line 1036: unrecognized instruction.          (PUSH)
1037   20016                             ld a, b     ;drawable frame
zslots7.z80 line 1037: unrecognized instruction.          (LD)
1038   20016                             cp 9 
zslots7.z80 line 1038: unrecognized instruction.          (CP)
1039   20016                             jr nz, deleteLastBonusFrame
zslots7.z80 line 1039: unrecognized instruction.          (JR)
1040   20016                             ;at frame peak of 8
1041   20016                  
1042   20016                             ld a, 0Ah           ;jump 10 to get timer val
zslots7.z80 line 1042: unrecognized instruction.          (LD)
1043   20016                             ld (P_), de
zslots7.z80 line 1043: unrecognized instruction.          (LD)
1044   20016                             call jumpAfromP_
zslots7.z80 line 1044: unrecognized instruction.          (CALL)
1045   20016                             ld a, (IX)
zslots7.z80 line 1045: unrecognized instruction.          (LD)
1046   20016                             dec (IX)
zslots7.z80 line 1046: unrecognized instruction.          (DEC)
1047   20016                             ;halt
1048   20016                             jp nz, checkKeyAgainstFullBoard             ;skip drawing if timer is > 0
zslots7.z80 line 1048: unrecognized instruction.          (JP)
1049   20016             ;waiting is over, descend , reset timer 
1050   20016                             ld a, (enemyTimerMax)
zslots7.z80 line 1050: unrecognized instruction.          (LD)
1051   20016                             ld (IX), a
zslots7.z80 line 1051: unrecognized instruction.          (LD)
1052   20016                         pop hl     ;xy 
zslots7.z80 line 1052: unrecognized instruction.          (POP)
1053   20016                     pop bc          
zslots7.z80 line 1053: unrecognized instruction.          (POP)
1054   20016                     dec b          ;update drawable frame to be 8 for smooth descent
zslots7.z80 line 1054: unrecognized instruction.          (DEC)
1055   20016                 pop de  ;pointer
zslots7.z80 line 1055: unrecognized instruction.          (POP)
1056   20016                 ld a, (de)
zslots7.z80 line 1056: unrecognized instruction.          (LD)
1057   20016                 inc a
zslots7.z80 line 1057: unrecognized instruction.          (INC)
1058   20016                 ld (de), a        ;increase rawframe count
zslots7.z80 line 1058: unrecognized instruction.          (LD)
1059   20016                 push de         ;pointer
zslots7.z80 line 1059: unrecognized instruction.          (PUSH)
1060   20016                     push bc     
zslots7.z80 line 1060: unrecognized instruction.          (PUSH)
1061   20016                         push hl    ;xy
zslots7.z80 line 1061: unrecognized instruction.          (PUSH)
1062   20016             ;not at peek frame(8)
1063   20016             ;c = boardpos, b = drawable frame#
1064   20016             deleteLastBonusFrame:
1065   20016                             ld a, l
zslots7.z80 line 1065: unrecognized instruction.          (LD)
1066   20016                             dec a
zslots7.z80 line 1066: unrecognized instruction.          (DEC)
1067   20016                             ld l, a
zslots7.z80 line 1067: unrecognized instruction.          (LD)
1068   20016                             ld a, h  
zslots7.z80 line 1068: unrecognized instruction.          (LD)
1069   20016                             inc a
zslots7.z80 line 1069: unrecognized instruction.          (INC)
1070   20016                             inc a
zslots7.z80 line 1070: unrecognized instruction.          (INC)
1071   20016             
1072   20016                             ld b, 10
zslots7.z80 line 1072: unrecognized instruction.          (LD)
1073   20016                             ld c, 1
zslots7.z80 line 1073: unrecognized instruction.          (LD)
1074   20016                             ld h, 01h  ;sprite off
zslots7.z80 line 1074: unrecognized instruction.          (LD)
1075   20016                             ld ix, _10x16_off     
zslots7.z80 line 1075: unrecognized instruction.          (LD)
1076   20016                             call put_any_Sprite
zslots7.z80 line 1076: unrecognized instruction.          (CALL)
1077   20016                             call IONFastCopy
zslots7.z80 line 1077: unrecognized instruction.          (CALL)
1078   20016                         pop hl ; xy board pos
zslots7.z80 line 1078: unrecognized instruction.          (POP)
1079   20016                     pop bc
zslots7.z80 line 1079: unrecognized instruction.          (POP)
1080   20016                     push bc
zslots7.z80 line 1080: unrecognized instruction.          (PUSH)
1081   20016                         push hl
zslots7.z80 line 1081: unrecognized instruction.          (PUSH)
1082   20016                             ld a, b
zslots7.z80 line 1082: unrecognized instruction.          (LD)
1083   20016                             cp $F0
zslots7.z80 line 1083: unrecognized instruction.          (CP)
1084   20016                             jp z, late_miss    ;[]reached last frame of animation, user hasn't smashed enemy
zslots7.z80 line 1084: unrecognized instruction.          (JP)
1085   20016             drawCurrentBonusFrame:
1086   20016                         ;get to center of boardlocation
1087   20016                         pop hl      ;xy for boardPosition []upperLeft, lowerRight
zslots7.z80 line 1087: unrecognized instruction.          (POP)
1088   20016                     pop bc          ;b = drawable frame#
zslots7.z80 line 1088: unrecognized instruction.          (POP)
1089   20016                 pop de 
zslots7.z80 line 1089: unrecognized instruction.          (POP)
1090   20016                 push de
zslots7.z80 line 1090: unrecognized instruction.          (PUSH)
1091   20016                     push bc 
zslots7.z80 line 1091: unrecognized instruction.          (PUSH)
1092   20016                         push hl     ;xy
zslots7.z80 line 1092: unrecognized instruction.          (PUSH)
1093   20016                             ld a, l
zslots7.z80 line 1093: unrecognized instruction.          (LD)
1094   20016                             add a, 9    ;6 is height of bonus squares-- a = bottom of square
zslots7.z80 line 1094: unrecognized instruction.          (ADD)
1095   20016                             sub b        ;a is now adjusted for current frame number
zslots7.z80 line 1095: unrecognized instruction.          (SUB)
1096   20016                             ld l, a     ;y updated
zslots7.z80 line 1096: unrecognized instruction.          (LD)
1097   20016                             ld a, h     ;x
zslots7.z80 line 1097: unrecognized instruction.          (LD)
1098   20016                             add a, 5
zslots7.z80 line 1098: unrecognized instruction.          (ADD)
1099   20016                             push af         ;updated x
zslots7.z80 line 1099: unrecognized instruction.          (PUSH)
1100   20016                             ld h, b 
zslots7.z80 line 1100: unrecognized instruction.          (LD)
1101   20016                                 push hl     ;updated b,y
zslots7.z80 line 1101: unrecognized instruction.          (PUSH)
1102   20016                                     ex de, hl
zslots7.z80 line 1102: unrecognized instruction.          (EX)
1103   20016                                     ld d, 00h
zslots7.z80 line 1103: unrecognized instruction.          (LD)
1104   20016                                     ld e, $14
zslots7.z80 line 1104: unrecognized instruction.          (LD)
1105   20016                                     add hl, de
zslots7.z80 line 1105: unrecognized instruction.          (ADD)
1106   20016                                     ld a, (hl)      ;enemy id
zslots7.z80 line 1106: unrecognized instruction.          (LD)
1107   20016                                     ld l, a
zslots7.z80 line 1107: unrecognized instruction.          (LD)
1108   20016                                     ;zzc
1109   20016                                     ld h, 00h
zslots7.z80 line 1109: unrecognized instruction.          (LD)
1110   20016                                     ld d, 00h
zslots7.z80 line 1110: unrecognized instruction.          (LD)
1111   20016                                     ld e, 08h
zslots7.z80 line 1111: unrecognized instruction.          (LD)
1112   20016                                     call mult 
zslots7.z80 line 1112: unrecognized instruction.          (CALL)
1113   20016                                     ld a, l 
zslots7.z80 line 1113: unrecognized instruction.          (LD)
1114   20016                                     ld hl, bonus_enemies
zslots7.z80 line 1114: unrecognized instruction.          (LD)
1115   20016                                     ld (P_), hl
zslots7.z80 line 1115: unrecognized instruction.          (LD)
1116   20016                                     call jumpAfromP_    ;ix now hold correct enemy sprite
zslots7.z80 line 1116: unrecognized instruction.          (CALL)
1117   20016                                 pop hl 
zslots7.z80 line 1117: unrecognized instruction.          (POP)
1118   20016                                 ld b, h ;b
zslots7.z80 line 1118: unrecognized instruction.          (LD)
1119   20016                             pop af  ;x
zslots7.z80 line 1119: unrecognized instruction.          (POP)
1120   20016                             call ionPutSprite
zslots7.z80 line 1120: unrecognized instruction.          (CALL)
1121   20016                             call IONFastCopy
zslots7.z80 line 1121: unrecognized instruction.          (CALL)
1122   20016                         
1123   20016             checkKeyAgainstFullBoard:
1124   20016                             ;getCSC will return 0 if no key has been pressed since last call
1125   20016                             bcall(_getCSC)         ;A = KEY | CSC does not wait for keyPress | returns 0 on nokey pressed|AF/HL die 
zslots7.z80 line 1125: unrecognized instruction.          (BCALL(_GETCSC))
1126   20016                             ld c, a
zslots7.z80 line 1126: unrecognized instruction.          (LD)
1127   20016                             or %0
zslots7.z80 line 1127: unrecognized instruction.          (OR)
1128   20016                             jp z, bGetKeyEnd        ;no key pressed
zslots7.z80 line 1128: unrecognized instruction.          (JP)
1129   20016                             cp 12h
zslots7.z80 line 1129: unrecognized instruction.          (CP)
1130   20016                             jp c, bGetKeyEnd        ;pressed some key off the number board
zslots7.z80 line 1130: unrecognized instruction.          (JP)
1131   20016                             cp 25h
zslots7.z80 line 1131: unrecognized instruction.          (CP)
1132   20016                             jp nc, bGetKeyEnd       ;pressed key off board
zslots7.z80 line 1132: unrecognized instruction.          (JP)
1133   20016             
1134   20016                             ;pressed 1-9
1135   20016                             ld b, 0
zslots7.z80 line 1135: unrecognized instruction.          (LD)
1136   20016                             ld hl, kToSK
zslots7.z80 line 1136: unrecognized instruction.          (LD)
1137   20016             keyTOPosition:
1138   20016                             ld a, (hl)
zslots7.z80 line 1138: unrecognized instruction.          (LD)
1139   20016                             cp $F0
zslots7.z80 line 1139: unrecognized instruction.          (CP)
1140   20016                             jr z, bGetKeyEnd            ;should never reach here.  if 1-9 pressed, we should find it in ktosk
zslots7.z80 line 1140: unrecognized instruction.          (JR)
1141   20016                             cp c
zslots7.z80 line 1141: unrecognized instruction.          (CP)
1142   20016                             jr z, bktoPosFound
zslots7.z80 line 1142: unrecognized instruction.          (JR)
1143   20016                             inc b
zslots7.z80 line 1143: unrecognized instruction.          (INC)
1144   20016                             inc hl
zslots7.z80 line 1144: unrecognized instruction.          (INC)
1145   20016                             jr keyTOPosition
zslots7.z80 line 1145: unrecognized instruction.          (JR)
1146   20016             ;b = position corresponding to key pressed
1147   20016             bktoposFound:
1148   20016             ;check if position contains enemy
1149   20016                             ld a, b
zslots7.z80 line 1149: unrecognized instruction.          (LD)
1150   20016                             push af         ;position of pressedKey [0-8]
zslots7.z80 line 1150: unrecognized instruction.          (PUSH)
1151   20016                                 call bonusposAtoxyinhl  ;new xy for animating
zslots7.z80 line 1151: unrecognized instruction.          (CALL)
1152   20016                             pop af 
zslots7.z80 line 1152: unrecognized instruction.          (POP)
1153   20016                         pop de              ;xy of board[i]
zslots7.z80 line 1153: unrecognized instruction.          (POP)
1154   20016                         push hl             ;replace with new xy
zslots7.z80 line 1154: unrecognized instruction.          (PUSH)
1155   20016                             ld hl, bonusBoard
zslots7.z80 line 1155: unrecognized instruction.          (LD)
1156   20016                             ld (P_), hl
zslots7.z80 line 1156: unrecognized instruction.          (LD)
1157   20016                             call jumpAfromP_
zslots7.z80 line 1157: unrecognized instruction.          (CALL)
1158   20016                             ld a, (IX)          ;position of pressed key
zslots7.z80 line 1158: unrecognized instruction.          (LD)
1159   20016                             or %0               ;has enemy?
zslots7.z80 line 1159: unrecognized instruction.          (OR)
1160   20016                             jp z, smash_miss
zslots7.z80 line 1160: unrecognized instruction.          (JP)
1161   20016                             ;hit
1162   20016                             push ix             ;ix = bonusboard[i]
zslots7.z80 line 1162: unrecognized instruction.          (PUSH)
1163   20016                                 ;ld b, 00h
1164   20016                                 ;ld c, $14
1165   20016                                 ;add ix, bc
1166   20016                                 ld a, (IX+20)
zslots7.z80 line 1166: unrecognized instruction.          (LD)
1167   20016                             pop ix
zslots7.z80 line 1167: unrecognized instruction.          (POP)
1168   20016                             cp $01              ;is spikey?
zslots7.z80 line 1168: unrecognized instruction.          (CP)
1169   20016                             jp nz, smashed_enemy
zslots7.z80 line 1169: unrecognized instruction.          (JP)
1170   20016                             ld a, $0F               ;hit spikey code
zslots7.z80 line 1170: unrecognized instruction.          (LD)
1171   20016                             jp smash_miss
zslots7.z80 line 1171: unrecognized instruction.          (JP)
1172   20016             smashed_enemy:  
1173   20016                             ld (IX), 00h        ;reset smashed enemy
zslots7.z80 line 1173: unrecognized instruction.          (LD)
1174   20016                             ld (IX+20), 00h
zslots7.z80 line 1174: unrecognized instruction.          (LD)
1175   20016                             ld a, (enemyTimerMax)
zslots7.z80 line 1175: unrecognized instruction.          (LD)
1176   20016                             ld (ix+10), a        ;reset timer
zslots7.z80 line 1176: unrecognized instruction.          (LD)
1177   20016                             ;ld a, $0D         ;clean smash code
1178   20016                             jp smash        ;smash clears board first    
zslots7.z80 line 1178: unrecognized instruction.          (JP)
1179   20016                             ;enemy exists in pressed location            
1180   20016                             ;BIT   kbdSCR, (IY+kbdFlags)
1181   20016             bGetKeyEnd:
1182   20016                         pop hl    ;xy 
zslots7.z80 line 1182: unrecognized instruction.          (POP)
1183   20016                     pop bc        ;drawable frame #
zslots7.z80 line 1183: unrecognized instruction.          (POP)
1184   20016                 pop hl            ;frame pointer
zslots7.z80 line 1184: unrecognized instruction.          (POP)
1185   20016                 ld a, b
zslots7.z80 line 1185: unrecognized instruction.          (LD)
1186   20016                 cp 9
zslots7.z80 line 1186: unrecognized instruction.          (CP)
1187   20016                 jr z, baddieOnBreak
zslots7.z80 line 1187: unrecognized instruction.          (JR)
1188   20016                 inc (hl)          ;rawFrame# ++
zslots7.z80 line 1188: unrecognized instruction.          (INC)
1189   20016             baddieOnBreak:    
1190   20016                 inc hl            ;bonusBoard[i++]
zslots7.z80 line 1190: unrecognized instruction.          (INC)
1191   20016                 push hl           ;required by _BONUS_LOOP
zslots7.z80 line 1191: unrecognized instruction.          (PUSH)
1192   20016                     call delay    
zslots7.z80 line 1192: unrecognized instruction.          (CALL)
1193   20016               
1194   20016                     jp _BONUS_LOOP
zslots7.z80 line 1194: unrecognized instruction.          (JP)
1195   20016             
1196   20016             ;Sent here because user didn't smash enemy in time   
1197   20016             ;stack: 
1198   20016             ;   hl(xy), bc(dFrame,loc), *hl(boardPointer)
1199   20016             ;* = need to leave at this point before jumping back into _BONUS_LOOP
1200   20016             late_miss:
1201   20016                         pop hl      ;xy
zslots7.z80 line 1201: unrecognized instruction.          (POP)
1202   20016                     pop bc          ;drawFrame []draw something in spot missed "TOO SLOW"
zslots7.z80 line 1202: unrecognized instruction.          (POP)
1203   20016                 pop ix              ;boardPT
zslots7.z80 line 1203: unrecognized instruction.          (POP)
1204   20016                 ld a, 0
zslots7.z80 line 1204: unrecognized instruction.          (LD)
1205   20016                 ld (ix), a
zslots7.z80 line 1205: unrecognized instruction.          (LD)
1206   20016                 ld a, (enemyTimerMax)
zslots7.z80 line 1206: unrecognized instruction.          (LD)
1207   20016                 ld (ix+10), a        ;reset timer
zslots7.z80 line 1207: unrecognized instruction.          (LD)
1208   20016                 push ix             ;required
zslots7.z80 line 1208: unrecognized instruction.          (PUSH)
1209   20016                     push bc         ;empty req for bgetkeyend
zslots7.z80 line 1209: unrecognized instruction.          (PUSH)
1210   20016                         push hl     ;xy
zslots7.z80 line 1210: unrecognized instruction.          (PUSH)
1211   20016                         ld a, (ix+20)
zslots7.z80 line 1211: unrecognized instruction.          (LD)
1212   20016                         cp 01h          ;is spikey guy?
zslots7.z80 line 1212: unrecognized instruction.          (CP)
1213   20016                         ld (ix+20), $00
zslots7.z80 line 1213: unrecognized instruction.          (LD)
1214   20016                         jr z, smash_hit
zslots7.z80 line 1214: unrecognized instruction.          (JR)
1215   20016             
1216   20016                             ld hl, _TEXT_XY_TOPMC
zslots7.z80 line 1216: unrecognized instruction.          (LD)
1217   20016                             ld (penCol), hl
zslots7.z80 line 1217: unrecognized instruction.          (LD)
1218   20016                             ld hl, top_win_BON_2
zslots7.z80 line 1218: unrecognized instruction.          (LD)
1219   20016                             bcall(_VPuts)
zslots7.z80 line 1219: unrecognized instruction.          (BCALL(_VPUTS))
1220   20016                             call IONFastCopy
zslots7.z80 line 1220: unrecognized instruction.          (CALL)
1221   20016             
1222   20016                             jr lose_a_heart
zslots7.z80 line 1222: unrecognized instruction.          (JR)
1223   20016             ;f = z if miss
1224   20016             ;f = nz if hit 
1225   20016             smash:  
1226   20016                         pop hl 
zslots7.z80 line 1226: unrecognized instruction.          (POP)
1227   20016                         call bonus_swing_anim    ;exits with an xy pop into hl
zslots7.z80 line 1227: unrecognized instruction.          (CALL)
1228   20016                         push hl                  ;    push back on stack
zslots7.z80 line 1228: unrecognized instruction.          (PUSH)
1229   20016                             ;work with live hl vals
1230   20016                             jr smash_hit
zslots7.z80 line 1230: unrecognized instruction.          (JR)
1231   20016             
1232   20016             smash_miss: 
1233   20016                         pop hl 
zslots7.z80 line 1233: unrecognized instruction.          (POP)
1234   20016                         call bonus_swing_anim    ;exits with an xy pop into hl
zslots7.z80 line 1234: unrecognized instruction.          (CALL)
1235   20016                         push hl 
zslots7.z80 line 1235: unrecognized instruction.          (PUSH)
1236   20016                             LD HL, _TEXT_XY_TOPMC 
zslots7.z80 line 1236: unrecognized instruction.          (LD)
1237   20016                             LD (penCol), HL
zslots7.z80 line 1237: unrecognized instruction.          (LD)
1238   20016                             LD HL, top_win_BON_0
zslots7.z80 line 1238: unrecognized instruction.          (LD)
1239   20016                             bcall(_VPuts)   
zslots7.z80 line 1239: unrecognized instruction.          (BCALL(_VPUTS))
1240   20016                             call IONFastCopy
zslots7.z80 line 1240: unrecognized instruction.          (CALL)
1241   20016             lose_a_heart:    
1242   20016                             ld A, (heartCount)
zslots7.z80 line 1242: unrecognized instruction.          (LD)
1243   20016                             cp 1
zslots7.z80 line 1243: unrecognized instruction.          (CP)
1244   20016                             jp z, bonus_game_over
zslots7.z80 line 1244: unrecognized instruction.          (JP)
1245   20016                             dec a
zslots7.z80 line 1245: unrecognized instruction.          (DEC)
1246   20016                             ld (heartCount), A
zslots7.z80 line 1246: unrecognized instruction.          (LD)
1247   20016                             call redrawHearts
zslots7.z80 line 1247: unrecognized instruction.          (CALL)
1248   20016             
1249   20016                             call IONFastCopy
zslots7.z80 line 1249: unrecognized instruction.          (CALL)
1250   20016                             jp bGetKeyEnd
zslots7.z80 line 1250: unrecognized instruction.          (JP)
1251   20016             smash_hit:
1252   20016                             ld a, (bopCount)
zslots7.z80 line 1252: unrecognized instruction.          (LD)
1253   20016                             inc a
zslots7.z80 line 1253: unrecognized instruction.          (INC)
1254   20016                             ld (bopCount), a
zslots7.z80 line 1254: unrecognized instruction.          (LD)
1255   20016                             ld b, a
zslots7.z80 line 1255: unrecognized instruction.          (LD)
1256   20016                             ;zxc
1257   20016                             ld a, (nxtBonus)
zslots7.z80 line 1257: unrecognized instruction.          (LD)
1258   20016                             cp b
zslots7.z80 line 1258: unrecognized instruction.          (CP)
1259   20016                             jr nz, noLvlUp
zslots7.z80 line 1259: unrecognized instruction.          (JR)
1260   20016                             add a, 25
zslots7.z80 line 1260: unrecognized instruction.          (ADD)
1261   20016                             ld (nxtBonus), a
zslots7.z80 line 1261: unrecognized instruction.          (LD)
1262   20016                             ld a, (bonusLvl)
zslots7.z80 line 1262: unrecognized instruction.          (LD)
1263   20016                             inc a 
zslots7.z80 line 1263: unrecognized instruction.          (INC)
1264   20016                             ld (bonusLvl), a 
zslots7.z80 line 1264: unrecognized instruction.          (LD)
1265   20016                             
1266   20016                             ld a, (enemyTimerMax)
zslots7.z80 line 1266: unrecognized instruction.          (LD)
1267   20016                             sub $08
zslots7.z80 line 1267: unrecognized instruction.          (SUB)
1268   20016                             ld (enemyTimerMax), a 
zslots7.z80 line 1268: unrecognized instruction.          (LD)
1269   20016                             ;level up anim
1270   20016                             
1271   20016             noLvlUp:        ld hl, _NUM_XY_BOPCNT
zslots7.z80 line 1271: Label not found: (noLvlUp)
zslots7.z80 line 1271: label value misalligned.           (noLvlUp)
zslots7.z80 line 1271: unrecognized instruction.          (noLvlUp)
1272   20016                             ld (penCol), hl
zslots7.z80 line 1272: unrecognized instruction.          (LD)
1273   20016                             ld h, 00h
zslots7.z80 line 1273: unrecognized instruction.          (LD)
1274   20016                             ld a, (bopCount)
zslots7.z80 line 1274: unrecognized instruction.          (LD)
1275   20016                             ld l, a
zslots7.z80 line 1275: unrecognized instruction.          (LD)
1276   20016                             bcall(_setxxxxop2)          ;puts 16bit(xxxx) HL into OP2
zslots7.z80 line 1276: unrecognized instruction.          (BCALL(_SETXXXXOP2))
1277   20016             	            bcall(_op2toop1)            ;OP2 to OP1   
zslots7.z80 line 1277: unrecognized instruction.          (BCALL(_OP2TOOP1))
1278   20016             	            bcall(_dispop1a)            ;write OP1 to screen, at (PenCol, PenRow)
zslots7.z80 line 1278: unrecognized instruction.          (BCALL(_DISPOP1A))
1279   20016             
1280   20016                             LD HL, _TEXT_XY_TOPMC
zslots7.z80 line 1280: unrecognized instruction.          (LD)
1281   20016                             LD (penCol), HL
zslots7.z80 line 1281: unrecognized instruction.          (LD)
1282   20016                             LD HL, top_win_BON_1
zslots7.z80 line 1282: unrecognized instruction.          (LD)
1283   20016                             bcall(_VPuts)
zslots7.z80 line 1283: unrecognized instruction.          (BCALL(_VPUTS))
1284   20016                         
1285   20016                             jp bgetkeyend            
zslots7.z80 line 1285: unrecognized instruction.          (JP)
1286   20016             bonus_game_over:
1287   20016                             ld a, (bopCount)
zslots7.z80 line 1287: unrecognized instruction.          (LD)
1288   20016                             ld l, a
zslots7.z80 line 1288: unrecognized instruction.          (LD)
1289   20016                             ld h, 00h
zslots7.z80 line 1289: unrecognized instruction.          (LD)
1290   20016                             ld a, (_multiplier)
zslots7.z80 line 1290: unrecognized instruction.          (LD)
1291   20016                             ld e, a
zslots7.z80 line 1291: unrecognized instruction.          (LD)
1292   20016                             ld d, 00h
zslots7.z80 line 1292: unrecognized instruction.          (LD)
1293   20016                             call mult
zslots7.z80 line 1293: unrecognized instruction.          (CALL)
1294   20016                             ld d, 00h
zslots7.z80 line 1294: unrecognized instruction.          (LD)
1295   20016                             ld e, $22
zslots7.z80 line 1295: unrecognized instruction.          (LD)
1296   20016                             call mult
zslots7.z80 line 1296: unrecognized instruction.          (CALL)
1297   20016                             add hl, de
zslots7.z80 line 1297: unrecognized instruction.          (ADD)
1298   20016                             ld de, (money)
zslots7.z80 line 1298: unrecognized instruction.          (LD)
1299   20016                             ld (cur_win_total), hl
zslots7.z80 line 1299: unrecognized instruction.          (LD)
1300   20016                             add hl, de 
zslots7.z80 line 1300: unrecognized instruction.          (ADD)
1301   20016                             ld (new_money), hl 
zslots7.z80 line 1301: unrecognized instruction.          (LD)
1302   20016             
1303   20016                             bcall(_GrBufClr)
zslots7.z80 line 1303: unrecognized instruction.          (BCALL(_GRBUFCLR))
1304   20016                             
1305   20016             #IFDEF debug
1306   20016                             call printQRCode
zslots7.z80 line 1306: unrecognized instruction.          (CALL)
1307   20016             #ENDIF
1308   20016             
1309   20016                             ;reset bonusboard/reset timers
1310   20016                             call resetBonusInitializers
zslots7.z80 line 1310: unrecognized instruction.          (CALL)
1311   20016                             call draw_rmenu
zslots7.z80 line 1311: unrecognized instruction.          (CALL)
1312   20016                                            ;animate bonus counting
1313   20016                             ld A, (bt_flags)
zslots7.z80 line 1313: unrecognized instruction.          (LD)
1314   20016              ;isFirstGame:    .EQU     0
1315   20016             ;isSpinning:     .EQU     1
1316   20016             ;isCounting:     .EQU     2
1317   20016             ;isWaiting:      .EQU     3
1318   20016             ;isWin:          .EQU     4
1319   20016             ;isBonus:        .EQU     5
1320   20016             ;is1stBonusRoll: .EQU     6
1321   20016             ;cleartop:           .EQU     7
1322   20016                             ;flags on
1323   20016                             or %11010100
zslots7.z80 line 1323: unrecognized instruction.          (OR)
1324   20016                             ;flags off
1325   20016                             and %11010101
zslots7.z80 line 1325: unrecognized instruction.          (AND)
1326   20016                             LD (bt_flags), A
zslots7.z80 line 1326: unrecognized instruction.          (LD)
1327   20016                             ;ld a, (bt_flags2)
1328   20016                             ;or %1 ;isFromBonus = true
1329   20016                             ;ld (bt_flags2), a
1330   20016             
1331   20016             
1332   20016                         pop hl
zslots7.z80 line 1332: unrecognized instruction.          (POP)
1333   20016                     pop bc
zslots7.z80 line 1333: unrecognized instruction.          (POP)
1334   20016                 pop de
zslots7.z80 line 1334: unrecognized instruction.          (POP)
1335   20016                             ld hl, slot_win_states
zslots7.z80 line 1335: unrecognized instruction.          (LD)
1336   20016                             ld (data_p+6), hl
zslots7.z80 line 1336: unrecognized instruction.          (LD)
1337   20016                             ;hack the board redraw to think we are performing a normal stopspin
1338   20016                             jp skip_chk_win
zslots7.z80 line 1338: unrecognized instruction.          (JP)
1339   20016             bonus_swing_anim:
1340   20016                         ld a, l
zslots7.z80 line 1340: unrecognized instruction.          (LD)
1341   20016                         ld l, a
zslots7.z80 line 1341: unrecognized instruction.          (LD)
1342   20016                         dec l
zslots7.z80 line 1342: unrecognized instruction.          (DEC)
1343   20016                         ld a, h  
zslots7.z80 line 1343: unrecognized instruction.          (LD)
1344   20016                         add a, 3
zslots7.z80 line 1344: unrecognized instruction.          (ADD)
1345   20016                         push hl
zslots7.z80 line 1345: unrecognized instruction.          (PUSH)
1346   20016                             ld b, 10
zslots7.z80 line 1346: unrecognized instruction.          (LD)
1347   20016                             ld c, 1
zslots7.z80 line 1347: unrecognized instruction.          (LD)
1348   20016                             ld h, 01h  ;sprite off
zslots7.z80 line 1348: unrecognized instruction.          (LD)
1349   20016                             ld ix, _10x16_off     
zslots7.z80 line 1349: unrecognized instruction.          (LD)
1350   20016                             call put_any_Sprite
zslots7.z80 line 1350: unrecognized instruction.          (CALL)
1351   20016                             call IONFastCopy
zslots7.z80 line 1351: unrecognized instruction.          (CALL)
1352   20016                         pop hl 
zslots7.z80 line 1352: unrecognized instruction.          (POP)
1353   20016                         push hl
zslots7.z80 line 1353: unrecognized instruction.          (PUSH)
1354   20016                             LD A, H
zslots7.z80 line 1354: unrecognized instruction.          (LD)
1355   20016                             LD B, 9
zslots7.z80 line 1355: unrecognized instruction.          (LD)
1356   20016                             LD C, 2       ;12
zslots7.z80 line 1356: unrecognized instruction.          (LD)
1357   20016                             LD H, 3       ;xor
zslots7.z80 line 1357: unrecognized instruction.          (LD)
1358   20016                             LD IX, bonus_hammer1
zslots7.z80 line 1358: unrecognized instruction.          (LD)
1359   20016                             call put_any_Sprite ;putany
zslots7.z80 line 1359: unrecognized instruction.          (CALL)
1360   20016                             call IONFastCopy
zslots7.z80 line 1360: unrecognized instruction.          (CALL)
1361   20016                         pop hl
zslots7.z80 line 1361: unrecognized instruction.          (POP)
1362   20016                         push hl
zslots7.z80 line 1362: unrecognized instruction.          (PUSH)
1363   20016                             LD A, H
zslots7.z80 line 1363: unrecognized instruction.          (LD)
1364   20016                             LD B, 9
zslots7.z80 line 1364: unrecognized instruction.          (LD)
1365   20016                             LD C, 2       ;12
zslots7.z80 line 1365: unrecognized instruction.          (LD)
1366   20016                             LD H, 3       ;xor
zslots7.z80 line 1366: unrecognized instruction.          (LD)
1367   20016                             LD IX, bonus_hammer1
zslots7.z80 line 1367: unrecognized instruction.          (LD)
1368   20016                             call put_any_Sprite ;putany
zslots7.z80 line 1368: unrecognized instruction.          (CALL)
1369   20016                             call IONFastCopy
zslots7.z80 line 1369: unrecognized instruction.          (CALL)
1370   20016                         pop hl
zslots7.z80 line 1370: unrecognized instruction.          (POP)
1371   20016                         push hl
zslots7.z80 line 1371: unrecognized instruction.          (PUSH)
1372   20016                             LD A, H
zslots7.z80 line 1372: unrecognized instruction.          (LD)
1373   20016                             LD B, 9
zslots7.z80 line 1373: unrecognized instruction.          (LD)
1374   20016                             LD C, 2       ;12
zslots7.z80 line 1374: unrecognized instruction.          (LD)
1375   20016                             LD H, 3       ;xor
zslots7.z80 line 1375: unrecognized instruction.          (LD)
1376   20016                             LD IX, bonus_hammer2
zslots7.z80 line 1376: unrecognized instruction.          (LD)
1377   20016                             call put_any_Sprite ;putany
zslots7.z80 line 1377: unrecognized instruction.          (CALL)
1378   20016                             call IONFastCopy
zslots7.z80 line 1378: unrecognized instruction.          (CALL)
1379   20016                         pop hl
zslots7.z80 line 1379: unrecognized instruction.          (POP)
1380   20016                         push hl
zslots7.z80 line 1380: unrecognized instruction.          (PUSH)
1381   20016                             LD A, H
zslots7.z80 line 1381: unrecognized instruction.          (LD)
1382   20016                             LD B, 9
zslots7.z80 line 1382: unrecognized instruction.          (LD)
1383   20016                             LD C, 2       ;12
zslots7.z80 line 1383: unrecognized instruction.          (LD)
1384   20016                             LD H, 3       ;xor
zslots7.z80 line 1384: unrecognized instruction.          (LD)
1385   20016                             LD IX, bonus_hammer2
zslots7.z80 line 1385: unrecognized instruction.          (LD)
1386   20016                             call put_any_Sprite ;putany
zslots7.z80 line 1386: unrecognized instruction.          (CALL)
1387   20016                             call IONFastCopy
zslots7.z80 line 1387: unrecognized instruction.          (CALL)
1388   20016                         pop hl
zslots7.z80 line 1388: unrecognized instruction.          (POP)
1389   20016                         ret
zslots7.z80 line 1389: unrecognized instruction.          (RET)
1390   20016                         dec h
zslots7.z80 line 1390: unrecognized instruction.          (DEC)
1391   20016                         dec h
zslots7.z80 line 1391: unrecognized instruction.          (DEC)
1392   20016             
1393   20016                         push hl   
zslots7.z80 line 1393: unrecognized instruction.          (PUSH)
1394   20016                             LD A, H
zslots7.z80 line 1394: unrecognized instruction.          (LD)
1395   20016                             LD B, 12
zslots7.z80 line 1395: unrecognized instruction.          (LD)
1396   20016                             LD C, 2       ;8x8
zslots7.z80 line 1396: unrecognized instruction.          (LD)
1397   20016                             LD H, 3       ;xor
zslots7.z80 line 1397: unrecognized instruction.          (LD)
1398   20016                             LD IX, bonus_hammer3
zslots7.z80 line 1398: unrecognized instruction.          (LD)
1399   20016                             call put_any_Sprite ;putany
zslots7.z80 line 1399: unrecognized instruction.          (CALL)
1400   20016                             call IONFastCopy
zslots7.z80 line 1400: unrecognized instruction.          (CALL)
1401   20016                         pop hl
zslots7.z80 line 1401: unrecognized instruction.          (POP)
1402   20016                         push hl
zslots7.z80 line 1402: unrecognized instruction.          (PUSH)
1403   20016                             LD A, H
zslots7.z80 line 1403: unrecognized instruction.          (LD)
1404   20016                             LD B, 12
zslots7.z80 line 1404: unrecognized instruction.          (LD)
1405   20016                             LD C, 2       ;8x8
zslots7.z80 line 1405: unrecognized instruction.          (LD)
1406   20016                             LD H, 3       ;xor
zslots7.z80 line 1406: unrecognized instruction.          (LD)
1407   20016                             LD IX, bonus_hammer3
zslots7.z80 line 1407: unrecognized instruction.          (LD)
1408   20016                             call put_any_Sprite ;putany
zslots7.z80 line 1408: unrecognized instruction.          (CALL)
1409   20016                         pop hl          ;xy
zslots7.z80 line 1409: unrecognized instruction.          (POP)
1410   20016                         push hl
zslots7.z80 line 1410: unrecognized instruction.          (PUSH)
1411   20016                        ; call bonus_swing_anim
1412   20016                             LD A, H
zslots7.z80 line 1412: unrecognized instruction.          (LD)
1413   20016                             LD B, 12
zslots7.z80 line 1413: unrecognized instruction.          (LD)
1414   20016                             LD C, 2       ;12
zslots7.z80 line 1414: unrecognized instruction.          (LD)
1415   20016                             LD H, 3       ;xor
zslots7.z80 line 1415: unrecognized instruction.          (LD)
1416   20016                             LD IX, bonus_hammer4
zslots7.z80 line 1416: unrecognized instruction.          (LD)
1417   20016                             call put_any_Sprite ;putany
zslots7.z80 line 1417: unrecognized instruction.          (CALL)
1418   20016                             call IONFastCopy
zslots7.z80 line 1418: unrecognized instruction.          (CALL)
1419   20016                         pop hl
zslots7.z80 line 1419: unrecognized instruction.          (POP)
1420   20016                         push hl
zslots7.z80 line 1420: unrecognized instruction.          (PUSH)
1421   20016                             LD A, H
zslots7.z80 line 1421: unrecognized instruction.          (LD)
1422   20016                             LD B, 12
zslots7.z80 line 1422: unrecognized instruction.          (LD)
1423   20016                             LD C, 2       ;8x8
zslots7.z80 line 1423: unrecognized instruction.          (LD)
1424   20016                             LD H, 3       ;xor
zslots7.z80 line 1424: unrecognized instruction.          (LD)
1425   20016                             LD IX, bonus_hammer4
zslots7.z80 line 1425: unrecognized instruction.          (LD)
1426   20016                             call put_any_Sprite ;putany
zslots7.z80 line 1426: unrecognized instruction.          (CALL)
1427   20016                         pop hl
zslots7.z80 line 1427: unrecognized instruction.          (POP)
1428   20016                         push hl
zslots7.z80 line 1428: unrecognized instruction.          (PUSH)
1429   20016                             LD A, H
zslots7.z80 line 1429: unrecognized instruction.          (LD)
1430   20016                             LD B, 12
zslots7.z80 line 1430: unrecognized instruction.          (LD)
1431   20016                             LD C, 2       ;8x8
zslots7.z80 line 1431: unrecognized instruction.          (LD)
1432   20016                             LD H, 3       ;xor
zslots7.z80 line 1432: unrecognized instruction.          (LD)
1433   20016                             LD IX, bonus_hammer5
zslots7.z80 line 1433: unrecognized instruction.          (LD)
1434   20016                             call put_any_Sprite ;putany
zslots7.z80 line 1434: unrecognized instruction.          (CALL)
1435   20016                             call IONFastCopy
zslots7.z80 line 1435: unrecognized instruction.          (CALL)
1436   20016                         pop hl
zslots7.z80 line 1436: unrecognized instruction.          (POP)
1437   20016                         push hl
zslots7.z80 line 1437: unrecognized instruction.          (PUSH)
1438   20016                             LD A, H
zslots7.z80 line 1438: unrecognized instruction.          (LD)
1439   20016                             LD B, 12
zslots7.z80 line 1439: unrecognized instruction.          (LD)
1440   20016                             LD C, 2       ;8x8
zslots7.z80 line 1440: unrecognized instruction.          (LD)
1441   20016                             LD H, 3       ;xor
zslots7.z80 line 1441: unrecognized instruction.          (LD)
1442   20016                             LD IX, bonus_hammer5
zslots7.z80 line 1442: unrecognized instruction.          (LD)
1443   20016                             call put_any_Sprite ;putany
zslots7.z80 line 1443: unrecognized instruction.          (CALL)
1444   20016                         pop hl
zslots7.z80 line 1444: unrecognized instruction.          (POP)
1445   20016                         push hl
zslots7.z80 line 1445: unrecognized instruction.          (PUSH)
1446   20016                             LD A, H
zslots7.z80 line 1446: unrecognized instruction.          (LD)
1447   20016                             LD B, 12
zslots7.z80 line 1447: unrecognized instruction.          (LD)
1448   20016                             LD C, 2       ;8x8
zslots7.z80 line 1448: unrecognized instruction.          (LD)
1449   20016                             LD H, 3       ;xor
zslots7.z80 line 1449: unrecognized instruction.          (LD)
1450   20016                             LD IX, bonus_hammer6
zslots7.z80 line 1450: unrecognized instruction.          (LD)
1451   20016                             call put_any_Sprite ;putany
zslots7.z80 line 1451: unrecognized instruction.          (CALL)
1452   20016                             call IONFastCopy
zslots7.z80 line 1452: unrecognized instruction.          (CALL)
1453   20016                         pop hl
zslots7.z80 line 1453: unrecognized instruction.          (POP)
1454   20016                         push hl
zslots7.z80 line 1454: unrecognized instruction.          (PUSH)
1455   20016                             LD A, H
zslots7.z80 line 1455: unrecognized instruction.          (LD)
1456   20016                             LD B, 12
zslots7.z80 line 1456: unrecognized instruction.          (LD)
1457   20016                             LD C, 2       ;8x8
zslots7.z80 line 1457: unrecognized instruction.          (LD)
1458   20016                             LD H, 3       ;xor
zslots7.z80 line 1458: unrecognized instruction.          (LD)
1459   20016                             LD IX, bonus_hammer6
zslots7.z80 line 1459: unrecognized instruction.          (LD)
1460   20016                             call put_any_Sprite ;putany
zslots7.z80 line 1460: unrecognized instruction.          (CALL)
1461   20016                         pop hl          ;xy
zslots7.z80 line 1461: unrecognized instruction.          (POP)
1462   20016                         push hl
zslots7.z80 line 1462: unrecognized instruction.          (PUSH)
1463   20016                        ; call bonus_swing_anim
1464   20016                             LD A, H
zslots7.z80 line 1464: unrecognized instruction.          (LD)
1465   20016                             LD B, 12
zslots7.z80 line 1465: unrecognized instruction.          (LD)
1466   20016                             LD C, 2       ;12
zslots7.z80 line 1466: unrecognized instruction.          (LD)
1467   20016                             LD H, 3       ;xor
zslots7.z80 line 1467: unrecognized instruction.          (LD)
1468   20016                             LD IX, bonus_hammer7
zslots7.z80 line 1468: unrecognized instruction.          (LD)
1469   20016                             call put_any_Sprite ;putany
zslots7.z80 line 1469: unrecognized instruction.          (CALL)
1470   20016                             call IONFastCopy
zslots7.z80 line 1470: unrecognized instruction.          (CALL)
1471   20016                         pop hl
zslots7.z80 line 1471: unrecognized instruction.          (POP)
1472   20016                         push hl
zslots7.z80 line 1472: unrecognized instruction.          (PUSH)
1473   20016                             LD A, H
zslots7.z80 line 1473: unrecognized instruction.          (LD)
1474   20016                             LD B, 12
zslots7.z80 line 1474: unrecognized instruction.          (LD)
1475   20016                             LD C, 2       ;8x8
zslots7.z80 line 1475: unrecognized instruction.          (LD)
1476   20016                             LD H, 3       ;xor
zslots7.z80 line 1476: unrecognized instruction.          (LD)
1477   20016                             LD IX, bonus_hammer7
zslots7.z80 line 1477: unrecognized instruction.          (LD)
1478   20016                             call put_any_Sprite ;putany
zslots7.z80 line 1478: unrecognized instruction.          (CALL)
1479   20016                         pop hl
zslots7.z80 line 1479: unrecognized instruction.          (POP)
1480   20016                         push hl
zslots7.z80 line 1480: unrecognized instruction.          (PUSH)
1481   20016                             LD A, H
zslots7.z80 line 1481: unrecognized instruction.          (LD)
1482   20016                             LD B, 12
zslots7.z80 line 1482: unrecognized instruction.          (LD)
1483   20016                             LD C, 2       ;8x8
zslots7.z80 line 1483: unrecognized instruction.          (LD)
1484   20016                             LD H, 3       ;xor
zslots7.z80 line 1484: unrecognized instruction.          (LD)
1485   20016                             LD IX, bonus_hammer8
zslots7.z80 line 1485: unrecognized instruction.          (LD)
1486   20016                             call put_any_Sprite ;putany
zslots7.z80 line 1486: unrecognized instruction.          (CALL)
1487   20016                             call IONFastCopy
zslots7.z80 line 1487: unrecognized instruction.          (CALL)
1488   20016                         pop hl
zslots7.z80 line 1488: unrecognized instruction.          (POP)
1489   20016                         push hl
zslots7.z80 line 1489: unrecognized instruction.          (PUSH)
1490   20016                             LD A, H
zslots7.z80 line 1490: unrecognized instruction.          (LD)
1491   20016                             LD B, 12
zslots7.z80 line 1491: unrecognized instruction.          (LD)
1492   20016                             LD C, 2       ;8x8
zslots7.z80 line 1492: unrecognized instruction.          (LD)
1493   20016                             LD H, 3       ;xor
zslots7.z80 line 1493: unrecognized instruction.          (LD)
1494   20016                             LD IX, bonus_hammer8
zslots7.z80 line 1494: unrecognized instruction.          (LD)
1495   20016                             call put_any_Sprite ;putany
zslots7.z80 line 1495: unrecognized instruction.          (CALL)
1496   20016                             call IONFastCopy
zslots7.z80 line 1496: unrecognized instruction.          (CALL)
1497   20016                         pop hl
zslots7.z80 line 1497: unrecognized instruction.          (POP)
1498   20016                             ret
zslots7.z80 line 1498: unrecognized instruction.          (RET)
1499   20016                         ;pop af              ;hit miss
1500   20016             
1501   20016             ;args:
1502   20016             ;   A = a board position[0-8]
1503   20016             ;returns:
1504   20016             ;   HL = (h=x,l=y) coords of A
1505   20016             bonusPosAtoXYinHL:
1506   20016                 LD HL, BON_Y
zslots7.z80 line 1506: unrecognized instruction.          (LD)
1507   20016                 LD (P_), HL
zslots7.z80 line 1507: unrecognized instruction.          (LD)
1508   20016                 call jumpAfromP_
zslots7.z80 line 1508: unrecognized instruction.          (CALL)
1509   20016                 ld l, (ix)          ;y for sprite
zslots7.z80 line 1509: unrecognized instruction.          (LD)
1510   20016                 ld d, 0
zslots7.z80 line 1510: unrecognized instruction.          (LD)
1511   20016                 ld e, 0Ah
zslots7.z80 line 1511: unrecognized instruction.          (LD)
1512   20016                 add ix, de
zslots7.z80 line 1512: unrecognized instruction.          (ADD)
1513   20016                 ld a, (ix)          ;x  
zslots7.z80 line 1513: unrecognized instruction.          (LD)
1514   20016                 ld h, a           ;hl = x,y
zslots7.z80 line 1514: unrecognized instruction.          (LD)
1515   20016                 ret   
zslots7.z80 line 1515: unrecognized instruction.          (RET)
1516   20016             
1517   20016             
1518   20016             ;147AD
1519   20016             ;258BE
1520   20016             ;369CF
1521   20016             
1522   20016             ;log win data into slot_win_states (a,c,b,  a,c,b  ...)
1523   20016             ;   (COORD) temporarily holds the row of winning offsets to light up
1524   20016             ;   a = line number of win   ;c = no. of winning symbols in line ;b = symbolID
1525   20016             win_log: 
1526   20016                            ld HL, COORD         
zslots7.z80 line 1526: unrecognized instruction.          (LD)
1527   20016                            ld a, (HL)               ;A = current winning payline#
zslots7.z80 line 1527: unrecognized instruction.          (LD)
1528   20016             
1529   20016             win_log_bonus: ld HL, (data_p+6)        ;data_p6 holds offset for storing data INTO slot_win_states 
zslots7.z80 line 1529: Label not found: (win_log_bonus)
zslots7.z80 line 1529: label value misalligned.           (win_log_bonus)
zslots7.z80 line 1529: unrecognized instruction.          (win_log_bonus)
1530   20016                            ld (HL), a               ;Record winning payline# in slot_win_states db
zslots7.z80 line 1530: unrecognized instruction.          (LD)
1531   20016                            ;winline print
1532   20016                            ld a, (bt_flags)
zslots7.z80 line 1532: unrecognized instruction.          (LD)
1533   20016                            ;W C              ;turn win & counting on 
1534   20016                            or %10100
zslots7.z80 line 1534: unrecognized instruction.          (OR)
1535   20016                            ld (bt_flags), a
zslots7.z80 line 1535: unrecognized instruction.          (LD)
1536   20016             
1537   20016                            inc hl
zslots7.z80 line 1537: unrecognized instruction.          (INC)
1538   20016                            ld (HL), c               ;store inArow into slot_win_states (0,1)
zslots7.z80 line 1538: unrecognized instruction.          (LD)
1539   20016                            inc hl
zslots7.z80 line 1539: unrecognized instruction.          (INC)
1540   20016                            ld (HL), b               ;symbolID-needed for printing win data
zslots7.z80 line 1540: unrecognized instruction.          (LD)
1541   20016                            inc hl                   ;skip to win_total
zslots7.z80 line 1541: unrecognized instruction.          (INC)
1542   20016                            ld (data_p+6), HL
zslots7.z80 line 1542: unrecognized instruction.          (LD)
1543   20016                            ld a, b                  ;get symbol id into A for _pay offset jump
zslots7.z80 line 1543: unrecognized instruction.          (LD)
1544   20016                            ;----------------calculate winnings->(p6[4])------------
1545   20016             
1546   20016                             ld HL, sym_o
zslots7.z80 line 1546: unrecognized instruction.          (LD)
1547   20016                             ld (P_), HL
zslots7.z80 line 1547: unrecognized instruction.          (LD)
1548   20016                             ;ld b, c
1549   20016                             call jumpAfromP_
zslots7.z80 line 1549: unrecognized instruction.          (CALL)
1550   20016                             ld a, (IX)
zslots7.z80 line 1550: unrecognized instruction.          (LD)
1551   20016                             add a, _PAY
zslots7.z80 line 1551: unrecognized instruction.          (ADD)
1552   20016             
1553   20016                             ld HL, symbols
zslots7.z80 line 1553: unrecognized instruction.          (LD)
1554   20016                             LD (P_), HL
zslots7.z80 line 1554: unrecognized instruction.          (LD)
1555   20016                             call jumpAfromP_
zslots7.z80 line 1555: unrecognized instruction.          (CALL)
1556   20016                             ld a, (IX)                  ;pay 
zslots7.z80 line 1556: unrecognized instruction.          (LD)
1557   20016             
1558   20016                             ld E, A
zslots7.z80 line 1558: unrecognized instruction.          (LD)
1559   20016                             LD D, 00h
zslots7.z80 line 1559: unrecognized instruction.          (LD)
1560   20016                             ld L, C
zslots7.z80 line 1560: unrecognized instruction.          (LD)
1561   20016                             ld H, 00h
zslots7.z80 line 1561: unrecognized instruction.          (LD)
1562   20016                             call mult                   ;total of current win
zslots7.z80 line 1562: unrecognized instruction.          (CALL)
1563   20016             
1564   20016                             ;x multiplier
1565   20016                             ld a, (_multiplier)
zslots7.z80 line 1565: unrecognized instruction.          (LD)
1566   20016                             ld e, a
zslots7.z80 line 1566: unrecognized instruction.          (LD)
1567   20016                             ld d, 00h
zslots7.z80 line 1567: unrecognized instruction.          (LD)
1568   20016                             call mult                   ;updated total
zslots7.z80 line 1568: unrecognized instruction.          (CALL)
1569   20016             
1570   20016                             LD A, L
zslots7.z80 line 1570: unrecognized instruction.          (LD)
1571   20016                             LD DE, (data_p+6)
zslots7.z80 line 1571: unrecognized instruction.          (LD)
1572   20016                             LD (DE), A
zslots7.z80 line 1572: unrecognized instruction.          (LD)
1573   20016                             INC DE
zslots7.z80 line 1573: unrecognized instruction.          (INC)
1574   20016                             LD A, H
zslots7.z80 line 1574: unrecognized instruction.          (LD)
1575   20016                             LD (DE), A
zslots7.z80 line 1575: unrecognized instruction.          (LD)
1576   20016                             INC DE
zslots7.z80 line 1576: unrecognized instruction.          (INC)
1577   20016                             LD (data_p+6), DE
zslots7.z80 line 1577: unrecognized instruction.          (LD)
1578   20016             
1579   20016                         ;**we don't animate here, because we are waiting to poll all winning results
1580   20016                         ;**first, in the _win_anim_array - then draw them at the same time w/ draw_arr_at_arr
1581   20016                            ret
zslots7.z80 line 1581: unrecognized instruction.          (RET)
1582   20016             
1583   20016              
1584   20016             ;fill up the win_anim_array, and prep for XORing of winning symbols               
1585   20016             classify_wins:
1586   20016                             ;while slot_win_states !=0,
1587   20016                             ld HL, slot_win_states
zslots7.z80 line 1587: unrecognized instruction.          (LD)
1588   20016                             ld (data_p+6), HL
zslots7.z80 line 1588: unrecognized instruction.          (LD)
1589   20016             cw_re_entry:
1590   20016                             ld b, (HL)     ;line number of first win
zslots7.z80 line 1590: unrecognized instruction.          (LD)
1591   20016                             inc B          ;line# is saved as 0 index for ease of earlier algos--reset base.
zslots7.z80 line 1591: unrecognized instruction.          (INC)
1592   20016                             inc hl
zslots7.z80 line 1592: unrecognized instruction.          (INC)
1593   20016                             ld c, (HL)     ;3,4, or 5 in a row
zslots7.z80 line 1593: unrecognized instruction.          (LD)
1594   20016                             inc hl         ;skip symbolID
zslots7.z80 line 1594: unrecognized instruction.          (INC)
1595   20016                             inc hl         ;skip total
zslots7.z80 line 1595: unrecognized instruction.          (INC)
1596   20016                             inc hl         ;skip 2nd byte of total
zslots7.z80 line 1596: unrecognized instruction.          (INC)
1597   20016                             ld (data_p+6), HL
zslots7.z80 line 1597: unrecognized instruction.          (LD)
1598   20016                             ld a, b
zslots7.z80 line 1598: unrecognized instruction.          (LD)
1599   20016                             ;get to the line number
1600   20016                             cp 1            ;check if on the first line *A=slot_win_states[0], first win line#
zslots7.z80 line 1600: unrecognized instruction.          (CP)
1601   20016             
1602   20016                             ld a, 0
zslots7.z80 line 1602: unrecognized instruction.          (LD)
1603   20016                             dec B           ;get 0 indexed   
zslots7.z80 line 1603: unrecognized instruction.          (DEC)
1604   20016                             jr z, skiplo   
zslots7.z80 line 1604: unrecognized instruction.          (JR)
1605   20016             jYpp:           
1606   20016                             add a, 6             
zslots7.z80 line 1606: unrecognized instruction.          (ADD)
1607   20016                             djnz jYpp
zslots7.z80 line 1607: unrecognized instruction.          (DJNZ)
1608   20016             
1609   20016             ;<-----------------A=offset to reach Y axis of pay_rules array.
1610   20016             
1611   20016             ;for (winStates[j])
1612   20016             ;   for (xInArow)
1613   20016             ;       slot_cur_reel_state[pay_rule[i]] -> win_anim_array[pay_rule[i]]
1614   20016                                        ;
1615   20016             skiplo:     
1616   20016             ;19EFA 
1617   20016                            LD HL, pay_rules                  ;HL = (HL + DE(Offset))
zslots7.z80 line 1617: unrecognized instruction.          (LD)
1618   20016                            LD (P_), HL
zslots7.z80 line 1618: unrecognized instruction.          (LD)
1619   20016                            CALL jumpAfromP_
zslots7.z80 line 1619: unrecognized instruction.          (CALL)
1620   20016                            LD (data_p), IX  
zslots7.z80 line 1620: unrecognized instruction.          (LD)
1621   20016                            LD A, (IX)                       ;pay_rule[i]
zslots7.z80 line 1621: unrecognized instruction.          (LD)
1622   20016             
1623   20016             ;    for(C = i)               symbolID          
1624   20016             ;        slot_cur_reel_state[(data_p[i])] -> win_anim_array[(data_p[i])                  
1625   20016                            DEC A                            ;adjust offset 
zslots7.z80 line 1625: unrecognized instruction.          (DEC)
1626   20016                            LD HL, slot_chk_win_state       ;HL = (HL + DE(Offset))
zslots7.z80 line 1626: unrecognized instruction.          (LD)
1627   20016                            LD (P_), HL
zslots7.z80 line 1627: unrecognized instruction.          (LD)
1628   20016                            CALL jumpAfromP_
zslots7.z80 line 1628: unrecognized instruction.          (CALL)
1629   20016                            LD (data_p+2), IX                ;symbolID pointer
zslots7.z80 line 1629: unrecognized instruction.          (LD)
1630   20016             
1631   20016             ;      for(C = i)
1632   20016             ;          (data_p+2) -> win_anim_array[(data_p)]
1633   20016             ;------------------
1634   20016             val_to_aro:     
1635   20016                            ;zzz offsets are showing as 2, 5, 8, 11, 14 (wrong winning line than copied from)
1636   20016                            LD HL, (data_p)                  ;we pulled symbol from _state+(data_p), add to _win_anim+(data_p)
zslots7.z80 line 1636: unrecognized instruction.          (LD)
1637   20016                            ;DEC L                            ;adjust indexing
1638   20016             fill_sym2wins: LD A, (HL)                       ;A = position where symbol was from/needs to go to
zslots7.z80 line 1638: Label not found: (fill_sym2wins)
zslots7.z80 line 1638: label value misalligned.           (fill_sym2wins)
zslots7.z80 line 1638: unrecognized instruction.          (fill_sym2wins)
1639   20016                            DEC A                            ;adjust indexing
zslots7.z80 line 1639: unrecognized instruction.          (DEC)
1640   20016                            LD HL, win_anim_array            ;HL = (HL + DE(Offset))
zslots7.z80 line 1640: unrecognized instruction.          (LD)
1641   20016                            LD (P_), HL
zslots7.z80 line 1641: unrecognized instruction.          (LD)
1642   20016                            CALL jumpAfromP_
zslots7.z80 line 1642: unrecognized instruction.          (CALL)
1643   20016                            LD (data_p+4), IX  
zslots7.z80 line 1643: unrecognized instruction.          (LD)
1644   20016                 
1645   20016             ;--------------------------------------
1646   20016             ;(data_p+2)                /////////
1647   20016             ; symbolID  -> (data_p+4)  //
1648   20016             ;---------------------------
1649   20016             
1650   20016                             LD HL, (data_p+2)               ;(data_p+2)                             
zslots7.z80 line 1650: unrecognized instruction.          (LD)
1651   20016                             LD A, (HL)                      ;A = symbol to copy into win_anim_array,
zslots7.z80 line 1651: unrecognized instruction.          (LD)
1652   20016                             ;**Symbol correct on 1st iteration, repeats wrong after 2nd iteration.
1653   20016                             LD (IX), A                      ;copy symbol in position                                               
zslots7.z80 line 1653: unrecognized instruction.          (LD)
1654   20016                             dec C                                        
zslots7.z80 line 1654: unrecognized instruction.          (DEC)
1655   20016                             LD HL, (data_p)                
zslots7.z80 line 1655: unrecognized instruction.          (LD)
1656   20016                             inc HL                          ;point to next pay_rule item
zslots7.z80 line 1656: unrecognized instruction.          (INC)
1657   20016                             LD (data_p), HL
zslots7.z80 line 1657: unrecognized instruction.          (LD)
1658   20016                             LD A, 0
zslots7.z80 line 1658: unrecognized instruction.          (LD)
1659   20016                             CP C
zslots7.z80 line 1659: unrecognized instruction.          (CP)
1660   20016                             jr nz, fill_sym2wins                ;need to jump to next pay_rule item ->
zslots7.z80 line 1660: unrecognized instruction.          (JR)
1661   20016             
1662   20016                             ld HL, (data_p+6)                   ;pointing to L in H,L
zslots7.z80 line 1662: unrecognized instruction.          (LD)
1663   20016                             inc hl                              ;skip total
zslots7.z80 line 1663: unrecognized instruction.          (INC)
1664   20016             
1665   20016                             ld a, (hl)
zslots7.z80 line 1665: unrecognized instruction.          (LD)
1666   20016                             LD (data_p+6), HL
zslots7.z80 line 1666: unrecognized instruction.          (LD)
1667   20016                             cp $0F
zslots7.z80 line 1667: unrecognized instruction.          (CP)
1668   20016                             jp nz, cw_re_entry                  ;jump to next pay_rule row   \/
zslots7.z80 line 1668: unrecognized instruction.          (JP)
1669   20016             
1670   20016                             call get_total_win_of_spin          ;does all the math for counting & winimation
zslots7.z80 line 1670: unrecognized instruction.          (CALL)
1671   20016                             ;reset data_p6 pointer
1672   20016                             LD HL, slot_win_states
zslots7.z80 line 1672: unrecognized instruction.          (LD)
1673   20016                             LD (data_p+6), HL
zslots7.z80 line 1673: unrecognized instruction.          (LD)
1674   20016             
1675   20016                             ret
zslots7.z80 line 1675: unrecognized instruction.          (RET)
1676   20016             ;prints B integers from HL onto the display                
1677   20016             print_arrayOfBytes:
1678   20016             pa_lp:          ld a, (HL)
zslots7.z80 line 1678: Label not found: (pa_lp)
zslots7.z80 line 1678: label value misalligned.           (pa_lp)
zslots7.z80 line 1678: unrecognized instruction.          (pa_lp)
1679   20016                             inc  HL
zslots7.z80 line 1679: unrecognized instruction.          (INC)
1680   20016                             push HL
zslots7.z80 line 1680: unrecognized instruction.          (PUSH)
1681   20016                             push bc
zslots7.z80 line 1681: unrecognized instruction.          (PUSH)
1682   20016                             bcall(_setxxop1)            ;place A into OP1
zslots7.z80 line 1682: unrecognized instruction.          (BCALL(_SETXXOP1))
1683   20016             	            bcall(_dispop1a)            ;write OP1 to screen, at (PenCol, PenRow)
zslots7.z80 line 1683: unrecognized instruction.          (BCALL(_DISPOP1A))
1684   20016                             pop HL
zslots7.z80 line 1684: unrecognized instruction.          (POP)
1685   20016                             pop bc
zslots7.z80 line 1685: unrecognized instruction.          (POP)
1686   20016                             dec b
zslots7.z80 line 1686: unrecognized instruction.          (DEC)
1687   20016                             ld a, b
zslots7.z80 line 1687: unrecognized instruction.          (LD)
1688   20016                             cp 01h
zslots7.z80 line 1688: unrecognized instruction.          (CP)
1689   20016                             jr nz, pa_lp 
zslots7.z80 line 1689: unrecognized instruction.          (JR)
1690   20016                             call IONfastCopy
zslots7.z80 line 1690: unrecognized instruction.          (CALL)
1691   20016                             ret
zslots7.z80 line 1691: unrecognized instruction.          (RET)
1692   20016             
1693   20016             ;animates money counting up towards new total
1694   20016             _count_up:      ;HL is new total, to count to
1695   20016                             ;DE is current balance
1696   20016                             LD HL, (new_money)
zslots7.z80 line 1696: unrecognized instruction.          (LD)
1697   20016                             LD DE, (money)
zslots7.z80 line 1697: unrecognized instruction.          (LD)
1698   20016                             INC DE
zslots7.z80 line 1698: unrecognized instruction.          (INC)
1699   20016                             LD (money), DE
zslots7.z80 line 1699: unrecognized instruction.          (LD)
1700   20016                             SBC HL, DE
zslots7.z80 line 1700: unrecognized instruction.          (SBC)
1701   20016                             jr z, moneyCounted
zslots7.z80 line 1701: unrecognized instruction.          (JR)
1702   20016             
1703   20016                             ret
zslots7.z80 line 1703: unrecognized instruction.          (RET)
1704   20016             moneyCounted:
1705   20016                             ld a, (bt_flags)
zslots7.z80 line 1705: unrecognized instruction.          (LD)
1706   20016                             res isCounting, a
zslots7.z80 line 1706: unrecognized instruction.          (RES)
1707   20016                             ld (bt_flags), a 
zslots7.z80 line 1707: unrecognized instruction.          (LD)
1708   20016                             ret     
zslots7.z80 line 1708: unrecognized instruction.          (RET)
1709   20016             
1710   20016             ;call this once you've classified all wins
1711   20016             get_total_win_of_spin:
1712   20016                             LD HL, slot_win_states
zslots7.z80 line 1712: unrecognized instruction.          (LD)
1713   20016                             LD (data_p+6), HL
zslots7.z80 line 1713: unrecognized instruction.          (LD)
1714   20016             
1715   20016             g_t_l:          inc hl
zslots7.z80 line 1715: Label not found: (g_t_l)
zslots7.z80 line 1715: label value misalligned.           (g_t_l)
zslots7.z80 line 1715: unrecognized instruction.          (g_t_l)
1716   20016                             inc hl
zslots7.z80 line 1716: unrecognized instruction.          (INC)
1717   20016                             inc hl
zslots7.z80 line 1717: unrecognized instruction.          (INC)
1718   20016                             push hl
zslots7.z80 line 1718: unrecognized instruction.          (PUSH)
1719   20016                             LD A, (HL)         ;get HL 16bit total into DE
zslots7.z80 line 1719: unrecognized instruction.          (LD)
1720   20016                             INC HL
zslots7.z80 line 1720: unrecognized instruction.          (INC)
1721   20016                             LD E, A
zslots7.z80 line 1721: unrecognized instruction.          (LD)
1722   20016                             LD A, (HL)
zslots7.z80 line 1722: unrecognized instruction.          (LD)
1723   20016                             LD D, A
zslots7.z80 line 1723: unrecognized instruction.          (LD)
1724   20016             
1725   20016                             LD HL, (cur_win_total)
zslots7.z80 line 1725: unrecognized instruction.          (LD)
1726   20016                          
1727   20016                             ADD HL, DE
zslots7.z80 line 1727: unrecognized instruction.          (ADD)
1728   20016             
1729   20016                             LD (cur_win_total), HL      ;total $ of payline win
zslots7.z80 line 1729: unrecognized instruction.          (LD)
1730   20016                     
1731   20016                             pop hl
zslots7.z80 line 1731: unrecognized instruction.          (POP)
1732   20016             
1733   20016                             inc hl                      ;2nd byte
zslots7.z80 line 1733: unrecognized instruction.          (INC)
1734   20016                             inc hl                      ;next win item
zslots7.z80 line 1734: unrecognized instruction.          (INC)
1735   20016             
1736   20016                             ld a, (HL)
zslots7.z80 line 1736: unrecognized instruction.          (LD)
1737   20016                             cp $0F
zslots7.z80 line 1737: unrecognized instruction.          (CP)
1738   20016                             jr nz, g_t_l
zslots7.z80 line 1738: unrecognized instruction.          (JR)
1739   20016                             
1740   20016                             LD    BC, _NUM_XY_MONEY
zslots7.z80 line 1740: unrecognized instruction.          (LD)
1741   20016                             LD    (PenCol), BC              ; PenCol comes before PenRow-  
zslots7.z80 line 1741: unrecognized instruction.          (LD)
1742   20016                             LD    DE, (money)
zslots7.z80 line 1742: unrecognized instruction.          (LD)
1743   20016                             LD    HL, (cur_win_total)
zslots7.z80 line 1743: unrecognized instruction.          (LD)
1744   20016                             ADD   HL, DE
zslots7.z80 line 1744: unrecognized instruction.          (ADD)
1745   20016                             LD (new_money), HL
zslots7.z80 line 1745: unrecognized instruction.          (LD)
1746   20016             
1747   20016                             ret      
zslots7.z80 line 1747: unrecognized instruction.          (RET)
1748   20016             
1749   20016             ;16bit multiplication routine from ZiLog
1750   20016             ;de * hl -> hl
1751   20016             mult:
1752   20016                             ld   b, 16
zslots7.z80 line 1752: unrecognized instruction.          (LD)
1753   20016                             ld   c, d
zslots7.z80 line 1753: unrecognized instruction.          (LD)
1754   20016                             ld   a, e
zslots7.z80 line 1754: unrecognized instruction.          (LD)
1755   20016                             ex   de, hl
zslots7.z80 line 1755: unrecognized instruction.          (EX)
1756   20016                             ld   hl, 0
zslots7.z80 line 1756: unrecognized instruction.          (LD)
1757   20016             mloop:          srl  c
zslots7.z80 line 1757: Label not found: (mloop)
zslots7.z80 line 1757: label value misalligned.           (mloop)
zslots7.z80 line 1757: unrecognized instruction.          (mloop)
1758   20016                             rra
zslots7.z80 line 1758: unrecognized instruction.          (RRA)
1759   20016                             jr   nc, noadd
zslots7.z80 line 1759: unrecognized instruction.          (JR)
1760   20016                             add  hl, de
zslots7.z80 line 1760: unrecognized instruction.          (ADD)
1761   20016             
1762   20016             noadd:          ex   de, hl
zslots7.z80 line 1762: Label not found: (noadd)
zslots7.z80 line 1762: label value misalligned.           (noadd)
zslots7.z80 line 1762: unrecognized instruction.          (noadd)
1763   20016                             add  hl, hl
zslots7.z80 line 1763: unrecognized instruction.          (ADD)
1764   20016                             ex   de, hl
zslots7.z80 line 1764: unrecognized instruction.          (EX)
1765   20016                             djnz mloop
zslots7.z80 line 1765: unrecognized instruction.          (DJNZ)
1766   20016                             ret
zslots7.z80 line 1766: unrecognized instruction.          (RET)
1767   20016                      
1768   20016             ;Put large sprite
1769   20016             ;B = height
1770   20016             ;C = width / 8
1771   20016             ; l=yc
1772   20016             ; a=xc
1773   20016             ; ix holds pointer
1774   20016             XORSPR_L:
1775   20016                           push HL
zslots7.z80 line 1775: unrecognized instruction.          (PUSH)
1776   20016                           LD HL, bonus_symbol
zslots7.z80 line 1776: unrecognized instruction.          (LD)
1777   20016                           LD (P_), IX
zslots7.z80 line 1777: unrecognized instruction.          (LD)
1778   20016                           LD DE, (P_)
zslots7.z80 line 1778: unrecognized instruction.          (LD)
1779   20016                           SBC HL, DE
zslots7.z80 line 1779: unrecognized instruction.          (SBC)
1780   20016                           pop HL
zslots7.z80 line 1780: unrecognized instruction.          (POP)
1781   20016                           jp z, XORSPR_BONUS
zslots7.z80 line 1781: unrecognized instruction.          (JP)
1782   20016                           LD   B, 8
zslots7.z80 line 1782: unrecognized instruction.          (LD)
1783   20016                           LD   C, 1              
zslots7.z80 line 1783: unrecognized instruction.          (LD)
1784   20016                           CALL IonLargeSprite
zslots7.z80 line 1784: unrecognized instruction.          (CALL)
1785   20016                           ret
zslots7.z80 line 1785: unrecognized instruction.          (RET)
1786   20016             
1787   20016             
1788   20016             XORSPR_BONUS: LD B, 10
zslots7.z80 line 1788: Label not found: (XORSPR_BONUS)
zslots7.z80 line 1788: label value misalligned.           (XORSPR_BONUS)
zslots7.z80 line 1788: unrecognized instruction.          (XORSPR_BONUS)
1789   20016                           LD C, 2
zslots7.z80 line 1789: unrecognized instruction.          (LD)
1790   20016                           dec a
zslots7.z80 line 1790: unrecognized instruction.          (DEC)
1791   20016                           dec a
zslots7.z80 line 1791: unrecognized instruction.          (DEC)
1792   20016                           dec a
zslots7.z80 line 1792: unrecognized instruction.          (DEC)
1793   20016                           dec a
zslots7.z80 line 1793: unrecognized instruction.          (DEC)
1794   20016                           dec l
zslots7.z80 line 1794: unrecognized instruction.          (DEC)
1795   20016                           CALL IonLargeSprite
zslots7.z80 line 1795: unrecognized instruction.          (CALL)
1796   20016                           ret                   
zslots7.z80 line 1796: unrecognized instruction.          (RET)
1797   20016             
1798   20016             ;fully customizable sprite routine
1799   20016             ;   any size, and/or/xor
1800   20016             ;-----> Draw a picture
1801   20016             ;Input:	ix->sprite
1802   20016             ;	a=x
1803   20016             ;	l=y
1804   20016             ;	b=height	(in pixels)
1805   20016             ;	c=width		(in bytes, e.g. 2 would be 16)
1806   20016             ;   h=off/on/xor
1807   20016             ;     (1=off/2=on/else=xor)
1808   20016             
1809   20016             ;Output: nothing
1810   20016             ; All registers are destroyed except bc', de', hl'
1811   20016             ; 
1812   20016             ; Used for clear masks.  0's will override
1813   20016             put_any_Sprite:
1814   20016                 push af   ;x coord
zslots7.z80 line 1814: unrecognized instruction.          (PUSH)
1815   20016                  ld a, h
zslots7.z80 line 1815: unrecognized instruction.          (LD)
1816   20016                   cp 01h
zslots7.z80 line 1816: unrecognized instruction.          (CP)
1817   20016                   jp nz, _OnorXor
zslots7.z80 line 1817: unrecognized instruction.          (JP)
1818   20016                   ld a, $A2        ;and d
zslots7.z80 line 1818: unrecognized instruction.          (LD)
1819   20016                   ld (_on_off_d),a
zslots7.z80 line 1819: unrecognized instruction.          (LD)
1820   20016                   inc a
zslots7.z80 line 1820: unrecognized instruction.          (INC)
1821   20016                   ld (_on_off_e),a ;and e
zslots7.z80 line 1821: unrecognized instruction.          (LD)
1822   20016                   jr psprite_begin
zslots7.z80 line 1822: unrecognized instruction.          (JR)
1823   20016             _OnorXor:
1824   20016                  ld a, h
zslots7.z80 line 1824: unrecognized instruction.          (LD)
1825   20016                  cp 02h
zslots7.z80 line 1825: unrecognized instruction.          (CP)
1826   20016                  jp nz, _xor_sprite
zslots7.z80 line 1826: unrecognized instruction.          (JP)
1827   20016                  ld a, $B2        ;or d
zslots7.z80 line 1827: unrecognized instruction.          (LD)
1828   20016                  ld (_on_off_d),a
zslots7.z80 line 1828: unrecognized instruction.          (LD)
1829   20016                  inc a
zslots7.z80 line 1829: unrecognized instruction.          (INC)
1830   20016                  ld (_on_off_e),a ;or e
zslots7.z80 line 1830: unrecognized instruction.          (LD)
1831   20016                  jr psprite_begin
zslots7.z80 line 1831: unrecognized instruction.          (JR)
1832   20016             _xor_sprite: 
1833   20016                  ld a, $AA        ;xor d
zslots7.z80 line 1833: unrecognized instruction.          (LD)
1834   20016                  ld (_on_off_d),a
zslots7.z80 line 1834: unrecognized instruction.          (LD)
1835   20016                  inc a
zslots7.z80 line 1835: unrecognized instruction.          (INC)
1836   20016                  ld (_on_off_e),a ;or e  
zslots7.z80 line 1836: unrecognized instruction.          (LD)
1837   20016             psprite_begin:
1838   20016                 pop af            ;og vals from caller
zslots7.z80 line 1838: unrecognized instruction.          (POP)
1839   20016             	di
zslots7.z80 line 1839: unrecognized instruction.          (DI)
1840   20016             	ex	af,af'
zslots7.z80 line 1840: unrecognized instruction.          (EX)
1841   20016             	ld	a,c
zslots7.z80 line 1841: unrecognized instruction.          (LD)
1842   20016             	push	af
zslots7.z80 line 1842: unrecognized instruction.          (PUSH)
1843   20016             	ex	af,af'
zslots7.z80 line 1843: unrecognized instruction.          (EX)
1844   20016             	ld	e,l
zslots7.z80 line 1844: unrecognized instruction.          (LD)
1845   20016             	ld	h,$00
zslots7.z80 line 1845: unrecognized instruction.          (LD)
1846   20016             	ld	d,h
zslots7.z80 line 1846: unrecognized instruction.          (LD)
1847   20016             	add	hl,de
zslots7.z80 line 1847: unrecognized instruction.          (ADD)
1848   20016             	add	hl,de
zslots7.z80 line 1848: unrecognized instruction.          (ADD)
1849   20016             	add	hl,hl
zslots7.z80 line 1849: unrecognized instruction.          (ADD)
1850   20016             	add	hl,hl
zslots7.z80 line 1850: unrecognized instruction.          (ADD)
1851   20016             	ld	e,a
zslots7.z80 line 1851: unrecognized instruction.          (LD)
1852   20016             	and	$07
zslots7.z80 line 1852: unrecognized instruction.          (AND)
1853   20016             	ld	c,a
zslots7.z80 line 1853: unrecognized instruction.          (LD)
1854   20016             	srl	e
zslots7.z80 line 1854: unrecognized instruction.          (SRL)
1855   20016             	srl	e
zslots7.z80 line 1855: unrecognized instruction.          (SRL)
1856   20016             	srl	e
zslots7.z80 line 1856: unrecognized instruction.          (SRL)
1857   20016             	add	hl,de
zslots7.z80 line 1857: unrecognized instruction.          (ADD)
1858   20016             	ld	de,gbuf
zslots7.z80 line 1858: unrecognized instruction.          (LD)
1859   20016             	add	hl,de
zslots7.z80 line 1859: unrecognized instruction.          (ADD)
1860   20016             anySpriteLoop1:
1861   20016             	push	hl
zslots7.z80 line 1861: unrecognized instruction.          (PUSH)
1862   20016             anySpriteLoop2:
1863   20016             	ld	d,(ix)
zslots7.z80 line 1863: unrecognized instruction.          (LD)
1864   20016             	ld	e,$00
zslots7.z80 line 1864: unrecognized instruction.          (LD)
1865   20016             	ld	a,c
zslots7.z80 line 1865: unrecognized instruction.          (LD)
1866   20016             	or	a
zslots7.z80 line 1866: unrecognized instruction.          (OR)
1867   20016             	jr	z,anySpriteSkip1
zslots7.z80 line 1867: unrecognized instruction.          (JR)
1868   20016             anySpriteLoop3:
1869   20016             	srl	d
zslots7.z80 line 1869: unrecognized instruction.          (SRL)
1870   20016             	rr	e
zslots7.z80 line 1870: unrecognized instruction.          (RR)
1871   20016             	dec	a
zslots7.z80 line 1871: unrecognized instruction.          (DEC)
1872   20016             	jr	nz,anySpriteLoop3
zslots7.z80 line 1872: unrecognized instruction.          (JR)
1873   20016             anySpriteSkip1:
1874   20016             	ld	a,(hl)
zslots7.z80 line 1874: unrecognized instruction.          (LD)
1875   20016             _on_off_d:	xor	d
zslots7.z80 line 1875: Label not found: (_on_off_d)
zslots7.z80 line 1875: label value misalligned.           (_on_off_d)
zslots7.z80 line 1875: unrecognized instruction.          (_on_off_d)
1876   20016             	ld	(hl),a
zslots7.z80 line 1876: unrecognized instruction.          (LD)
1877   20016             	inc	hl
zslots7.z80 line 1877: unrecognized instruction.          (INC)
1878   20016             	ld	a,(hl)
zslots7.z80 line 1878: unrecognized instruction.          (LD)
1879   20016             _on_off_e:	xor	e
zslots7.z80 line 1879: Label not found: (_on_off_e)
zslots7.z80 line 1879: label value misalligned.           (_on_off_e)
zslots7.z80 line 1879: unrecognized instruction.          (_on_off_e)
1880   20016             	ld	(hl),a
zslots7.z80 line 1880: unrecognized instruction.          (LD)
1881   20016             	inc	ix
zslots7.z80 line 1881: unrecognized instruction.          (INC)
1882   20016             	ex	af,af'
zslots7.z80 line 1882: unrecognized instruction.          (EX)
1883   20016             	dec	a
zslots7.z80 line 1883: unrecognized instruction.          (DEC)
1884   20016             	push	af
zslots7.z80 line 1884: unrecognized instruction.          (PUSH)
1885   20016             	ex	af,af'
zslots7.z80 line 1885: unrecognized instruction.          (EX)
1886   20016             	pop	af
zslots7.z80 line 1886: unrecognized instruction.          (POP)
1887   20016             	jr	nz,anySpriteLoop2
zslots7.z80 line 1887: unrecognized instruction.          (JR)
1888   20016             	pop	hl
zslots7.z80 line 1888: unrecognized instruction.          (POP)
1889   20016             	pop	af
zslots7.z80 line 1889: unrecognized instruction.          (POP)
1890   20016             	push	af
zslots7.z80 line 1890: unrecognized instruction.          (PUSH)
1891   20016             	ex	af,af'
zslots7.z80 line 1891: unrecognized instruction.          (EX)
1892   20016             	ld	de,$0C
zslots7.z80 line 1892: unrecognized instruction.          (LD)
1893   20016             	add	hl,de
zslots7.z80 line 1893: unrecognized instruction.          (ADD)
1894   20016             	djnz	anySpriteLoop1
zslots7.z80 line 1894: unrecognized instruction.          (DJNZ)
1895   20016             	pop	af
zslots7.z80 line 1895: unrecognized instruction.          (POP)
1896   20016             	ret
zslots7.z80 line 1896: unrecognized instruction.          (RET)
1897   20016             
1898   20016             
1899   20016             ;-----> Draw a sprite
1900   20016             ; b=size of sprite
1901   20016             ; l=yc
1902   20016             ; a=xc
1903   20016             ; ix holds pointer
1904   20016             ;Output:   Sprite is XORed to the graph buffer.
1905   20016             ;ix->next sprite
1906   20016             ;Destroys: af bc de hl ix
1907   20016             
1908   20016             XORSPR:
1909   20016                             LD   B,8                         ;size of the sprite
zslots7.z80 line 1909: unrecognized instruction.          (LD)
1910   20016                             CALL ionPutSprite
zslots7.z80 line 1910: unrecognized instruction.          (CALL)
1911   20016                             ;CALL ionPutSprite
1912   20016                             RET
zslots7.z80 line 1912: unrecognized instruction.          (RET)
1913   20016             ;------
1914   20016             buffer_to_backup:  
1915   20016                             LD   HL,PLOTSSCREEN		;save whole screen as background
zslots7.z80 line 1915: unrecognized instruction.          (LD)
1916   20016                             LD   DE,SAVESSCREEN
zslots7.z80 line 1916: unrecognized instruction.          (LD)
1917   20016                             LD   BC,768
zslots7.z80 line 1917: unrecognized instruction.          (LD)
1918   20016                             LDIR
zslots7.z80 line 1918: unrecognized instruction.          (LDIR)
1919   20016                             ret
zslots7.z80 line 1919: unrecognized instruction.          (RET)
1920   20016             backup_to_buffer:   
1921   20016                             LD   HL,SAVESSCREEN
zslots7.z80 line 1921: unrecognized instruction.          (LD)
1922   20016                             LD   DE,PLOTSSCREEN
zslots7.z80 line 1922: unrecognized instruction.          (LD)
1923   20016                             LD   BC,768
zslots7.z80 line 1923: unrecognized instruction.          (LD)
1924   20016                             LDIR
zslots7.z80 line 1924: unrecognized instruction.          (LDIR)
1925   20016                             RET
zslots7.z80 line 1925: unrecognized instruction.          (RET)
1926   20016             
1927   20016             DELAY:         LD   B,20
zslots7.z80 line 1927: Label not found: (DELAY)
zslots7.z80 line 1927: label value misalligned.           (DELAY)
zslots7.z80 line 1927: unrecognized instruction.          (DELAY)
1928   20016             LOOP1:         PUSH BC
zslots7.z80 line 1928: Label not found: (LOOP1)
zslots7.z80 line 1928: label value misalligned.           (LOOP1)
zslots7.z80 line 1928: unrecognized instruction.          (LOOP1)
1929   20016                            LD   B,255
zslots7.z80 line 1929: unrecognized instruction.          (LD)
1930   20016             LOOP2:         DJNZ LOOP2
zslots7.z80 line 1930: Label not found: (LOOP2)
zslots7.z80 line 1930: label value misalligned.           (LOOP2)
zslots7.z80 line 1930: unrecognized instruction.          (LOOP2)
1931   20016                            POP  BC
zslots7.z80 line 1931: unrecognized instruction.          (POP)
1932   20016                            DJNZ LOOP1
zslots7.z80 line 1932: unrecognized instruction.          (DJNZ)
1933   20016                            RET
zslots7.z80 line 1933: unrecognized instruction.          (RET)
1934   20016                 
1935   20016             genStore_15_rng:  
1936   20016                            LD HL, slot_cur_reel_state
zslots7.z80 line 1936: unrecognized instruction.          (LD)
1937   20016                            LD (data_p), hl
zslots7.z80 line 1937: unrecognized instruction.          (LD)
1938   20016                            LD DE, slot_saved_reel_state
zslots7.z80 line 1938: unrecognized instruction.          (LD)
1939   20016                            LD BC, 25    
zslots7.z80 line 1939: unrecognized instruction.          (LD)
1940   20016                            LDIR                     ;move previous board to saved area.
zslots7.z80 line 1940: unrecognized instruction.          (LDIR)
1941   20016                            
1942   20016             new_num:
1943   20016                            CALL rng8toA             ;8bit rand -> A register, HL becomes new seed                
zslots7.z80 line 1943: unrecognized instruction.          (CALL)
1944   20016                            ld e, 1                  ;offset counter, start at 1 instead of 0, to not overflow 
zslots7.z80 line 1944: unrecognized instruction.          (LD)
1945   20016                            ld HL, ratio_table    
zslots7.z80 line 1945: unrecognized instruction.          (LD)
1946   20016                            ;ld a, 20
1947   20016                            LD d, (HL)               ;first %value in the ratio table (0-40)/255->B
zslots7.z80 line 1947: unrecognized instruction.          (LD)
1948   20016             roll_prob:                  
1949   20016                            cp d
zslots7.z80 line 1949: unrecognized instruction.          (CP)
1950   20016                            jp c, rollz
zslots7.z80 line 1950: unrecognized instruction.          (JP)
1951   20016                            inc hl
zslots7.z80 line 1951: unrecognized instruction.          (INC)
1952   20016                            ld d, (HL)
zslots7.z80 line 1952: unrecognized instruction.          (LD)
1953   20016                            inc e
zslots7.z80 line 1953: unrecognized instruction.          (INC)
1954   20016                            jp nz, roll_prob
zslots7.z80 line 1954: unrecognized instruction.          (JP)
1955   20016             rollz:        
1956   20016                            ;ld a, e                             ;Loading 0 into A overflows _setxxop1() 
1957   20016                            LD  HL, (data_p)                     ;_curstate address
zslots7.z80 line 1957: unrecognized instruction.          (LD)
1958   20016                            INC E
zslots7.z80 line 1958: unrecognized instruction.          (INC)
1959   20016                            LD (HL), e                           ;new data -> indirectly into _curstate 
zslots7.z80 line 1959: unrecognized instruction.          (LD)
1960   20016                            INC HL                               ;HL     now points to _curstate+1 address
zslots7.z80 line 1960: unrecognized instruction.          (INC)
1961   20016                            LD (data_p), HL                      ;data_p now points to _curstate+1 address
zslots7.z80 line 1961: unrecognized instruction.          (LD)
1962   20016                            ld a, (HL)
zslots7.z80 line 1962: unrecognized instruction.          (LD)
1963   20016                            cp $0F
zslots7.z80 line 1963: unrecognized instruction.          (CP)
1964   20016                            jr nz, new_num
zslots7.z80 line 1964: unrecognized instruction.          (JR)
1965   20016                            
1966   20016             
1967   20016                            ld hl, slot_cur_reel_state
zslots7.z80 line 1967: unrecognized instruction.          (LD)
1968   20016                            ld (data_p), hl
zslots7.z80 line 1968: unrecognized instruction.          (LD)
1969   20016                            ret 
zslots7.z80 line 1969: unrecognized instruction.          (RET)
1970   20016             
1971   20016             
1972   20016             
1973   20016             rng8toA:
1974   20016             ;This code snippet is 9 bytes and 43cc
1975   20016             ;Inputs:
1976   20016             ;   HL is the input seed and must be non-zero
1977   20016             ;Outputs:
1978   20016             ;   A is the 8-bit pseudo-random number
1979   20016             ;   HL is the new seed value (will be non-zero)
1980   20016                               ;opcode cc
1981   20016                             LD a, (rng_seed)
zslots7.z80 line 1981: unrecognized instruction.          (LD)
1982   20016                             LD h, a
zslots7.z80 line 1982: unrecognized instruction.          (LD)
1983   20016                             LD a, (rng_seed+1)
zslots7.z80 line 1983: unrecognized instruction.          (LD)
1984   20016                             LD l, a
zslots7.z80 line 1984: unrecognized instruction.          (LD)
1985   20016             
1986   20016                             add hl,hl     ; 29    11
zslots7.z80 line 1986: unrecognized instruction.          (ADD)
1987   20016                             sbc a,a       ; 9F     4
zslots7.z80 line 1987: unrecognized instruction.          (SBC)
1988   20016                             and %00101101 ; E62D   7
zslots7.z80 line 1988: unrecognized instruction.          (AND)
1989   20016                             xor l         ; AD     4
zslots7.z80 line 1989: unrecognized instruction.          (XOR)
1990   20016                             LD l,a        ; 6F     4
zslots7.z80 line 1990: unrecognized instruction.          (LD)
1991   20016                             LD a,r        ; ED5F   9
zslots7.z80 line 1991: unrecognized instruction.          (LD)
1992   20016                             add a,h       ; 84     4
zslots7.z80 line 1992: unrecognized instruction.          (ADD)
1993   20016             
1994   20016                             LD b, a
zslots7.z80 line 1994: unrecognized instruction.          (LD)
1995   20016                             LD a, h
zslots7.z80 line 1995: unrecognized instruction.          (LD)
1996   20016                             LD (rng_seed), a
zslots7.z80 line 1996: unrecognized instruction.          (LD)
1997   20016                             LD a, l
zslots7.z80 line 1997: unrecognized instruction.          (LD)
1998   20016                             LD (rng_seed+1), a
zslots7.z80 line 1998: unrecognized instruction.          (LD)
1999   20016                             LD a, b
zslots7.z80 line 1999: unrecognized instruction.          (LD)
2000   20016             
2001   20016                             ret 
zslots7.z80 line 2001: unrecognized instruction.          (RET)
2002   20016             resetBonusInitializers:
2003   20016                            LD   HL, bonEmyKey    
zslots7.z80 line 2003: unrecognized instruction.          (LD)
2004   20016                            LD   DE, bonEmyKey+1
zslots7.z80 line 2004: unrecognized instruction.          (LD)
2005   20016                            LD   (HL),$00
zslots7.z80 line 2005: unrecognized instruction.          (LD)
2006   20016                            LD   BC, 8
zslots7.z80 line 2006: unrecognized instruction.          (LD)
2007   20016                            LDIR
zslots7.z80 line 2007: unrecognized instruction.          (LDIR)
2008   20016             
2009   20016                            LD   HL, bonusBoard	    
zslots7.z80 line 2009: unrecognized instruction.          (LD)
2010   20016                            LD   DE, bonusBoard+1
zslots7.z80 line 2010: unrecognized instruction.          (LD)
2011   20016                            LD   (HL),$00
zslots7.z80 line 2011: unrecognized instruction.          (LD)
2012   20016                            LD   BC, 8
zslots7.z80 line 2012: unrecognized instruction.          (LD)
2013   20016                            LDIR
zslots7.z80 line 2013: unrecognized instruction.          (LDIR)
2014   20016             
2015   20016                            LD   HL, bonusPeekTimer	    
zslots7.z80 line 2015: unrecognized instruction.          (LD)
2016   20016                            LD   DE, bonusPeekTimer+1
zslots7.z80 line 2016: unrecognized instruction.          (LD)
2017   20016                            LD    A, (enemyTimerMax)
zslots7.z80 line 2017: unrecognized instruction.          (LD)
2018   20016                            LD   (HL),A
zslots7.z80 line 2018: unrecognized instruction.          (LD)
2019   20016                            LD   BC, 8
zslots7.z80 line 2019: unrecognized instruction.          (LD)
2020   20016                            LDIR
zslots7.z80 line 2020: unrecognized instruction.          (LDIR)
2021   20016             
2022   20016                            ld a, 0
zslots7.z80 line 2022: unrecognized instruction.          (LD)
2023   20016                            ld (bopCount), a
zslots7.z80 line 2023: unrecognized instruction.          (LD)
2024   20016                         
2025   20016                            ret
zslots7.z80 line 2025: unrecognized instruction.          (RET)
2026   20016             draw_layer_fillall:
2027   20016                            LD   HL,PLOTSSCREEN		            ;top LCD black
zslots7.z80 line 2027: unrecognized instruction.          (LD)
2028   20016                            LD   DE,PLOTSSCREEN+1
zslots7.z80 line 2028: unrecognized instruction.          (LD)
2029   20016                            LD   (HL),$FF
zslots7.z80 line 2029: unrecognized instruction.          (LD)
2030   20016                            LD   BC,767
zslots7.z80 line 2030: unrecognized instruction.          (LD)
2031   20016                            LDIR
zslots7.z80 line 2031: unrecognized instruction.          (LDIR)
2032   20016                            ret
zslots7.z80 line 2032: unrecognized instruction.          (RET)
2033   20016             draw_layer_fillbg_top:
2034   20016                            LD   HL,PLOTSSCREEN		            ;top LCD black
zslots7.z80 line 2034: unrecognized instruction.          (LD)
2035   20016                            LD   DE,PLOTSSCREEN+1
zslots7.z80 line 2035: unrecognized instruction.          (LD)
2036   20016                            LD   (HL),$FF
zslots7.z80 line 2036: unrecognized instruction.          (LD)
2037   20016                            LD   BC,263
zslots7.z80 line 2037: unrecognized instruction.          (LD)
2038   20016                            LDIR
zslots7.z80 line 2038: unrecognized instruction.          (LDIR)
2039   20016                            ret
zslots7.z80 line 2039: unrecognized instruction.          (RET)
2040   20016             draw_layer_fillbg_low:
2041   20016                            LD   HL,PLOTSSCREEN+(54*12)	            ;bottom LCD black
zslots7.z80 line 2041: unrecognized instruction.          (LD)
2042   20016                            LD   DE,PLOTSSCREEN+(54*12)+1
zslots7.z80 line 2042: unrecognized instruction.          (LD)
2043   20016                            LD   (HL),$FF
zslots7.z80 line 2043: unrecognized instruction.          (LD)
2044   20016                            LD   BC,160
zslots7.z80 line 2044: unrecognized instruction.          (LD)
2045   20016                            LDIR              
zslots7.z80 line 2045: unrecognized instruction.          (LDIR)
2046   20016                            ret
zslots7.z80 line 2046: unrecognized instruction.          (RET)
2047   20016             
2048   20016             draw_layer_bonus_bg:
2049   20016                             bcall(_GrBufClr)
zslots7.z80 line 2049: unrecognized instruction.          (BCALL(_GRBUFCLR))
2050   20016                             call draw_top_layers
zslots7.z80 line 2050: unrecognized instruction.          (CALL)
2051   20016                             ;call draw_mask_layer
2052   20016                             ;Y + 11 between rows
2053   20016                             ld HL, _NUM_XY_MONEY
zslots7.z80 line 2053: unrecognized instruction.          (LD)
2054   20016                             LD (PenCol), HL
zslots7.z80 line 2054: unrecognized instruction.          (LD)
2055   20016                             LD HL, text_bot_expl2
zslots7.z80 line 2055: unrecognized instruction.          (LD)
2056   20016                             bcall(_VputS)
zslots7.z80 line 2056: unrecognized instruction.          (BCALL(_VPUTS))
2057   20016                             RES   textInverse, (IY+textFlags)   ;invert text    
zslots7.z80 line 2057: unrecognized instruction.          (RES)
2058   20016             
2059   20016                             LD HL, _NUM_XY_BO7
zslots7.z80 line 2059: unrecognized instruction.          (LD)
2060   20016                             LD (penCol), HL
zslots7.z80 line 2060: unrecognized instruction.          (LD)
2061   20016                             LD A, '7'
zslots7.z80 line 2061: unrecognized instruction.          (LD)
2062   20016                             bcall(_VPutMap)
zslots7.z80 line 2062: unrecognized instruction.          (BCALL(_VPUTMAP))
2063   20016                             LD HL, _NUM_XY_BO8
zslots7.z80 line 2063: unrecognized instruction.          (LD)
2064   20016                             LD (penCol), HL
zslots7.z80 line 2064: unrecognized instruction.          (LD)
2065   20016                             LD A, '8'
zslots7.z80 line 2065: unrecognized instruction.          (LD)
2066   20016                             bcall(_VputMap)
zslots7.z80 line 2066: unrecognized instruction.          (BCALL(_VPUTMAP))
2067   20016                             LD HL, _NUM_XY_BO9
zslots7.z80 line 2067: unrecognized instruction.          (LD)
2068   20016                             LD (penCol), HL
zslots7.z80 line 2068: unrecognized instruction.          (LD)
2069   20016                             LD A, '9'
zslots7.z80 line 2069: unrecognized instruction.          (LD)
2070   20016                             bcall(_VputMap)
zslots7.z80 line 2070: unrecognized instruction.          (BCALL(_VPUTMAP))
2071   20016             
2072   20016                             LD HL, _NUM_XY_BO4
zslots7.z80 line 2072: unrecognized instruction.          (LD)
2073   20016                             LD (penCol), HL
zslots7.z80 line 2073: unrecognized instruction.          (LD)
2074   20016                             LD A, '4'
zslots7.z80 line 2074: unrecognized instruction.          (LD)
2075   20016                             bcall(_VPutMap)
zslots7.z80 line 2075: unrecognized instruction.          (BCALL(_VPUTMAP))
2076   20016                             LD HL, _NUM_XY_BO5
zslots7.z80 line 2076: unrecognized instruction.          (LD)
2077   20016                             LD (penCol), HL
zslots7.z80 line 2077: unrecognized instruction.          (LD)
2078   20016                             LD A, '5'
zslots7.z80 line 2078: unrecognized instruction.          (LD)
2079   20016                             bcall(_VputMap)
zslots7.z80 line 2079: unrecognized instruction.          (BCALL(_VPUTMAP))
2080   20016             
2081   20016                         
2082   20016                             LD HL, _NUM_XY_BO6
zslots7.z80 line 2082: unrecognized instruction.          (LD)
2083   20016                             LD A, L
zslots7.z80 line 2083: unrecognized instruction.          (LD)
2084   20016                             DEC A
zslots7.z80 line 2084: unrecognized instruction.          (DEC)
2085   20016                             DEC A
zslots7.z80 line 2085: unrecognized instruction.          (DEC)
2086   20016                             DEC A
zslots7.z80 line 2086: unrecognized instruction.          (DEC)
2087   20016                             LD L, H
zslots7.z80 line 2087: unrecognized instruction.          (LD)
2088   20016                             INC L
zslots7.z80 line 2088: unrecognized instruction.          (INC)
2089   20016                             INC L
zslots7.z80 line 2089: unrecognized instruction.          (INC)
2090   20016                             LD B, 8
zslots7.z80 line 2090: unrecognized instruction.          (LD)
2091   20016                             LD IX, bonus_enemy1
zslots7.z80 line 2091: unrecognized instruction.          (LD)
2092   20016                             call ionPutSprite
zslots7.z80 line 2092: unrecognized instruction.          (CALL)
2093   20016                             ;LD (penCol), HL
2094   20016                             ;LD A, '6'
2095   20016                             ;bcall(_VputMap)
2096   20016             
2097   20016                             LD HL, _NUM_XY_BO1
zslots7.z80 line 2097: unrecognized instruction.          (LD)
2098   20016                             LD (penCol), HL
zslots7.z80 line 2098: unrecognized instruction.          (LD)
2099   20016                             LD A, '1'
zslots7.z80 line 2099: unrecognized instruction.          (LD)
2100   20016                             bcall(_VPutMap)
zslots7.z80 line 2100: unrecognized instruction.          (BCALL(_VPUTMAP))
2101   20016                             LD HL, _NUM_XY_BO2
zslots7.z80 line 2101: unrecognized instruction.          (LD)
2102   20016                             LD (penCol), HL
zslots7.z80 line 2102: unrecognized instruction.          (LD)
2103   20016                             LD A, '2'
zslots7.z80 line 2103: unrecognized instruction.          (LD)
2104   20016                             bcall(_VputMap)
zslots7.z80 line 2104: unrecognized instruction.          (BCALL(_VPUTMAP))
2105   20016                             LD HL, _NUM_XY_BO3
zslots7.z80 line 2105: unrecognized instruction.          (LD)
2106   20016                             LD (penCol), HL
zslots7.z80 line 2106: unrecognized instruction.          (LD)
2107   20016                             LD A, '3'
zslots7.z80 line 2107: unrecognized instruction.          (LD)
2108   20016                             bcall(_VputMap)
zslots7.z80 line 2108: unrecognized instruction.          (BCALL(_VPUTMAP))
2109   20016                             SET  textInverse, (IY+textFlags)   ;invert text 
zslots7.z80 line 2109: unrecognized instruction.          (SET)
2110   20016             
2111   20016                            ;n>=1
2112   20016             bon_redraw:    
2113   20016                            LD DE, _BON_XY_HP1
zslots7.z80 line 2113: unrecognized instruction.          (LD)
2114   20016                            LD A, E
zslots7.z80 line 2114: unrecognized instruction.          (LD)
2115   20016                            LD L, D
zslots7.z80 line 2115: unrecognized instruction.          (LD)
2116   20016                            LD B, 8
zslots7.z80 line 2116: unrecognized instruction.          (LD)
2117   20016                            LD IX, bonus_heart_on
zslots7.z80 line 2117: unrecognized instruction.          (LD)
2118   20016                            call ionPutSprite
zslots7.z80 line 2118: unrecognized instruction.          (CALL)
2119   20016             
2120   20016                            LD DE, _BON_XY_HP2
zslots7.z80 line 2120: unrecognized instruction.          (LD)
2121   20016                            LD A, E
zslots7.z80 line 2121: unrecognized instruction.          (LD)
2122   20016                            LD L, D
zslots7.z80 line 2122: unrecognized instruction.          (LD)
2123   20016                            LD B, 8
zslots7.z80 line 2123: unrecognized instruction.          (LD)
2124   20016                            LD IX, bonus_heart_on
zslots7.z80 line 2124: unrecognized instruction.          (LD)
2125   20016                            call ionPutSprite
zslots7.z80 line 2125: unrecognized instruction.          (CALL)
2126   20016             
2127   20016                            LD DE, _BON_XY_HP3
zslots7.z80 line 2127: unrecognized instruction.          (LD)
2128   20016                            LD A, E
zslots7.z80 line 2128: unrecognized instruction.          (LD)
2129   20016                            LD L, D
zslots7.z80 line 2129: unrecognized instruction.          (LD)
2130   20016                            LD B, 8
zslots7.z80 line 2130: unrecognized instruction.          (LD)
2131   20016                            LD IX, bonus_heart_on
zslots7.z80 line 2131: unrecognized instruction.          (LD)
2132   20016                            call ionPutSprite
zslots7.z80 line 2132: unrecognized instruction.          (CALL)
2133   20016             
2134   20016                            ld HL, _TEXT_XY_TOPBL
zslots7.z80 line 2134: unrecognized instruction.          (LD)
2135   20016                            LD (PenCol), HL
zslots7.z80 line 2135: unrecognized instruction.          (LD)
2136   20016                            LD HL, text_top_expl
zslots7.z80 line 2136: unrecognized instruction.          (LD)
2137   20016                            bcall(_VputS)            
zslots7.z80 line 2137: unrecognized instruction.          (BCALL(_VPUTS))
2138   20016             
2139   20016                            ;LD BC, 24*256+42                ;1st point, X=25, Y=30
2140   20016                            ;LD DE, 88*256+42                ;2nd point, X=62, Y=50
2141   20016                            LD H, 02h                       ;line on
zslots7.z80 line 2141: unrecognized instruction.          (LD)
2142   20016                            ;bcall(_iline)
2143   20016                            LD BC, 18*256+31                ;1st point, X=25, Y=30
zslots7.z80 line 2143: unrecognized instruction.          (LD)
2144   20016                            LD DE, 90*256+31                ;2nd point, X=62, Y=50
zslots7.z80 line 2144: unrecognized instruction.          (LD)
2145   20016                            bcall(_iline)
zslots7.z80 line 2145: unrecognized instruction.          (BCALL(_ILINE))
2146   20016                            LD BC, 18*256+20                ;1st point, X=25, Y=30
zslots7.z80 line 2146: unrecognized instruction.          (LD)
2147   20016                            LD DE, 90*256+20                ;2nd point, X=62, Y=50
zslots7.z80 line 2147: unrecognized instruction.          (LD)
2148   20016                            bcall(_iline)
zslots7.z80 line 2148: unrecognized instruction.          (BCALL(_ILINE))
2149   20016                            ;LD BC, 24*256+9                ;1st point, X=25, Y=30
2150   20016                            ;LD DE, 88*256+9                ;2nd point, X=62, Y=50
2151   20016                            ;bcall(_iline)
2152   20016             
2153   20016             ; Draws a vertical line from (D, L)-(D, E)
2154   20016             ;BON_Y: .db  $2C,$2C,$2C, $21,$21,$21, $16,$16,$16, 0fh
2155   20016             ;BON_X: .db  $1A,$2A,$3A, $1A,$2A,$3A, $1A,$2A,$3A, 0fh
2156   20016                            ;LD BC, 12*256+41                 ;1st point, X=25, Y=30
2157   20016                            ;LD DE, 12*256+10                 ;2nd point, X=62, Y=50
2158   20016                            ;bcall(_iline)
2159   20016                            LD BC, 40*256+41                 ;1st point, X=25, Y=30
zslots7.z80 line 2159: unrecognized instruction.          (LD)
2160   20016                            LD DE, 40*256+10                 ;2nd point, X=62, Y=50                     ;line on
zslots7.z80 line 2160: unrecognized instruction.          (LD)
2161   20016                            bcall(_iline)
zslots7.z80 line 2161: unrecognized instruction.          (BCALL(_ILINE))
2162   20016                            LD BC, 68*256+41                ;1st point, X=25, Y=30
zslots7.z80 line 2162: unrecognized instruction.          (LD)
2163   20016                            LD DE, 68*256+10                ;2nd point, X=62, Y=50
zslots7.z80 line 2163: unrecognized instruction.          (LD)
2164   20016                            bcall(_iline)
zslots7.z80 line 2164: unrecognized instruction.          (BCALL(_ILINE))
2165   20016                            ;LD BC, 95*256+41                ;1st point, X=25, Y=30
2166   20016                            ;LD DE, 95*256+10                ;2nd point, X=62, Y=50
2167   20016                            ;bcall(_iline)
2168   20016                            call IONFastCopy
zslots7.z80 line 2168: unrecognized instruction.          (CALL)
2169   20016              
2170   20016             redrawHearts:  ld A, (heartCount)
zslots7.z80 line 2170: Label not found: (redrawHearts)
zslots7.z80 line 2170: label value misalligned.           (redrawHearts)
zslots7.z80 line 2170: unrecognized instruction.          (redrawHearts)
2171   20016                            cp 3
zslots7.z80 line 2171: unrecognized instruction.          (CP)
2172   20016                            ret nc
zslots7.z80 line 2172: unrecognized instruction.          (RET)
2173   20016                            cp 2 
zslots7.z80 line 2173: unrecognized instruction.          (CP)
2174   20016                            push af
zslots7.z80 line 2174: unrecognized instruction.          (PUSH)
2175   20016                            call z, draw1heartgone
zslots7.z80 line 2175: unrecognized instruction.          (CALL)
2176   20016                            pop af
zslots7.z80 line 2176: unrecognized instruction.          (POP)
2177   20016                            cp 1
zslots7.z80 line 2177: unrecognized instruction.          (CP)
2178   20016                            call z, draw2heartsgone
zslots7.z80 line 2178: unrecognized instruction.          (CALL)
2179   20016                            ret
zslots7.z80 line 2179: unrecognized instruction.          (RET)
2180   20016             draw1heartgone:
2181   20016                            LD DE, _BON_XY_HP1
zslots7.z80 line 2181: unrecognized instruction.          (LD)
2182   20016                            LD A, E
zslots7.z80 line 2182: unrecognized instruction.          (LD)
2183   20016                            LD L, D
zslots7.z80 line 2183: unrecognized instruction.          (LD)
2184   20016                            LD B, 8
zslots7.z80 line 2184: unrecognized instruction.          (LD)
2185   20016                            LD IX, bonus_heart_off
zslots7.z80 line 2185: unrecognized instruction.          (LD)
2186   20016                            call ionPutSprite
zslots7.z80 line 2186: unrecognized instruction.          (CALL)
2187   20016             
2188   20016                            ld A, (heartCount)
zslots7.z80 line 2188: unrecognized instruction.          (LD)
2189   20016                            cp 1
zslots7.z80 line 2189: unrecognized instruction.          (CP)
2190   20016                            ret nz
zslots7.z80 line 2190: unrecognized instruction.          (RET)
2191   20016             
2192   20016             draw2heartsgone:
2193   20016                            LD DE, _BON_XY_HP2
zslots7.z80 line 2193: unrecognized instruction.          (LD)
2194   20016                            LD A, E
zslots7.z80 line 2194: unrecognized instruction.          (LD)
2195   20016                            LD L, D
zslots7.z80 line 2195: unrecognized instruction.          (LD)
2196   20016                            LD B, 8
zslots7.z80 line 2196: unrecognized instruction.          (LD)
2197   20016                            LD IX, bonus_heart_off
zslots7.z80 line 2197: unrecognized instruction.          (LD)
2198   20016                            call ionPutSprite
zslots7.z80 line 2198: unrecognized instruction.          (CALL)
2199   20016                            ret
zslots7.z80 line 2199: unrecognized instruction.          (RET)
2200   20016             
2201   20016             
2202   20016             ;clear out a defined chunk of gbuffer
2203   20016             mask_from_reel_A:
2204   20016                            LD   DE, $000B            ;inc each iteration
zslots7.z80 line 2204: unrecognized instruction.          (LD)
2205   20016                            LD IX, PLOTSSCREEN+6
zslots7.z80 line 2205: unrecognized instruction.          (LD)
2206   20016             msk_loop:       
2207   20016             
2208   20016                            LD (data_p), IX
zslots7.z80 line 2208: unrecognized instruction.          (LD)
2209   20016                            LD HL, (data_p)
zslots7.z80 line 2209: unrecognized instruction.          (LD)
2210   20016                            INC IX
zslots7.z80 line 2210: unrecognized instruction.          (INC)
2211   20016                            LD (data_p), IX 
zslots7.z80 line 2211: unrecognized instruction.          (LD)
2212   20016                            LD DE, (data_p)
zslots7.z80 line 2212: unrecognized instruction.          (LD)
2213   20016                            LD (HL), $FF
zslots7.z80 line 2213: unrecognized instruction.          (LD)
2214   20016                            LD BC, 4
zslots7.z80 line 2214: unrecognized instruction.          (LD)
2215   20016                            LDIR
zslots7.z80 line 2215: unrecognized instruction.          (LDIR)
2216   20016                
2217   20016                            LD DE, $000B
zslots7.z80 line 2217: unrecognized instruction.          (LD)
2218   20016                            LD HL,  760
zslots7.z80 line 2218: unrecognized instruction.          (LD)
2219   20016                            ADD IX, DE
zslots7.z80 line 2219: unrecognized instruction.          (ADD)
2220   20016                    
2221   20016                            ret    
zslots7.z80 line 2221: unrecognized instruction.          (RET)
2222   20016             draw_mask_layer:
2223   20016                 LD ix, maskXYWH
zslots7.z80 line 2223: unrecognized instruction.          (LD)
2224   20016                 LD a, (ix)        ;x
zslots7.z80 line 2224: unrecognized instruction.          (LD)
2225   20016                 inc ix
zslots7.z80 line 2225: unrecognized instruction.          (INC)
2226   20016                 LD e, (ix)        ;y
zslots7.z80 line 2226: unrecognized instruction.          (LD)
2227   20016                 inc ix 
zslots7.z80 line 2227: unrecognized instruction.          (INC)
2228   20016                 call clearGBUFrect
zslots7.z80 line 2228: unrecognized instruction.          (CALL)
2229   20016                 call ionFastCopy
zslots7.z80 line 2229: unrecognized instruction.          (CALL)
2230   20016                 ;clear out pointers
2231   20016                 ld hl, p_callseq
zslots7.z80 line 2231: unrecognized instruction.          (LD)
2232   20016                 ld de, p_callseq+1
zslots7.z80 line 2232: unrecognized instruction.          (LD)
2233   20016                 ld bc, 5 
zslots7.z80 line 2233: unrecognized instruction.          (LD)
2234   20016                 ld (hl), $00
zslots7.z80 line 2234: unrecognized instruction.          (LD)
2235   20016                 ldir 
zslots7.z80 line 2235: unrecognized instruction.          (LDIR)
2236   20016                 ret 
zslots7.z80 line 2236: unrecognized instruction.          (RET)
2237   20016             ;clearGBUFrect()
2238   20016             ;clears out a rectangle in the graph buffer
2239   20016             ;
2240   20016             ;inputs: a=x, e=y, d=width, height
2241   20016             clearGBUFrect:
2242   20016                 call ionGetPixel
zslots7.z80 line 2242: unrecognized instruction.          (CALL)
2243   20016                 push hl 
zslots7.z80 line 2243: unrecognized instruction.          (PUSH)
2244   20016                  ld b, a   ;bit offset into first byte per row
zslots7.z80 line 2244: unrecognized instruction.          (LD)
2245   20016                  call _bitRemainderFromOffset  ; c=byte 1 remainder
zslots7.z80 line 2245: unrecognized instruction.          (CALL)
2246   20016                  ld b, a 
zslots7.z80 line 2246: unrecognized instruction.          (LD)
2247   20016             
2248   20016                 ;width/8
2249   20016             
2250   20016                  ld d, (ix)
zslots7.z80 line 2250: unrecognized instruction.          (LD)
2251   20016                  inc ix 
zslots7.z80 line 2251: unrecognized instruction.          (INC)
2252   20016                  ld a, d 
zslots7.z80 line 2252: unrecognized instruction.          (LD)
2253   20016                  cp 9
zslots7.z80 line 2253: unrecognized instruction.          (CP)
2254   20016                  jp nc, _moreBits
zslots7.z80 line 2254: unrecognized instruction.          (JP)
2255   20016                  ld hl, _renderB1Remainder
zslots7.z80 line 2255: unrecognized instruction.          (LD)
2256   20016                  ld (p_callseq), hl 
zslots7.z80 line 2256: unrecognized instruction.          (LD)
2257   20016                  jp _procFIN
zslots7.z80 line 2257: unrecognized instruction.          (JP)
2258   20016             _moreBits:
2259   20016                  sub c 
zslots7.z80 line 2259: unrecognized instruction.          (SUB)
2260   20016                  ;a = bits left after we render the remainder
2261   20016                  cp 9
zslots7.z80 line 2261: unrecognized instruction.          (CP)
2262   20016                  jp nc, __nxt
zslots7.z80 line 2262: unrecognized instruction.          (JP)
2263   20016                  call _bcLone
zslots7.z80 line 2263: unrecognized instruction.          (CALL)
2264   20016                  ld d, a ;finremainder's mask
zslots7.z80 line 2264: unrecognized instruction.          (LD)
2265   20016                  ld hl, _renderB1Remainder
zslots7.z80 line 2265: unrecognized instruction.          (LD)
2266   20016                  ld (p_callseq), hl 
zslots7.z80 line 2266: unrecognized instruction.          (LD)
2267   20016                  ld hl, _renderRNRemainder
zslots7.z80 line 2267: unrecognized instruction.          (LD)
2268   20016                  ld (p_callseq+2), hl 
zslots7.z80 line 2268: unrecognized instruction.          (LD)
2269   20016                  jp _procFIN
zslots7.z80 line 2269: unrecognized instruction.          (JP)
2270   20016             __nxt:
2271   20016             
2272   20016             ;----------all flows before this are self-ended - full row instructions are in p_callseq ptr----
2273   20016                  ;c=remainder count
2274   20016                  ld d, a
zslots7.z80 line 2274: unrecognized instruction.          (LD)
2275   20016                  call _getb1remMSK   
zslots7.z80 line 2275: unrecognized instruction.          (CALL)
2276   20016                  ld hl, _renderB1Remainder
zslots7.z80 line 2276: unrecognized instruction.          (LD)
2277   20016                  ld (p_callseq), hl 
zslots7.z80 line 2277: unrecognized instruction.          (LD)
2278   20016             
2279   20016                  call _byteCount ;e=bytecount a=remainder of (Width-StartOffset)%8 
zslots7.z80 line 2279: unrecognized instruction.          (CALL)
2280   20016                  ld d, a 
zslots7.z80 line 2280: unrecognized instruction.          (LD)
2281   20016                  or %0  
zslots7.z80 line 2281: unrecognized instruction.          (OR)
2282   20016                  jp z, _noFINbits
zslots7.z80 line 2282: unrecognized instruction.          (JP)
2283   20016                  call _createLastBitsInRowMask ;a = final bits mask
zslots7.z80 line 2283: unrecognized instruction.          (CALL)
2284   20016                  ld d, a      ;d = final bits mask, if d=0, no final mask
zslots7.z80 line 2284: unrecognized instruction.          (LD)
2285   20016                 ;ld c, 3      ;instruction counter, per row
2286   20016                  ld hl, _renderRNRemainder
zslots7.z80 line 2286: unrecognized instruction.          (LD)
2287   20016                  ld (p_callseq+4), hl 
zslots7.z80 line 2287: unrecognized instruction.          (LD)
2288   20016             _noFINbits:
2289   20016                  ld hl, _rendFullBytesinRow
zslots7.z80 line 2289: unrecognized instruction.          (LD)
2290   20016                  ld (p_callseq+2), hl
zslots7.z80 line 2290: unrecognized instruction.          (LD)
2291   20016             
2292   20016             _procFIN: 
2293   20016             
2294   20016                pop hl
zslots7.z80 line 2294: unrecognized instruction.          (POP)
2295   20016                ld c, (ix)
zslots7.z80 line 2295: unrecognized instruction.          (LD)
2296   20016             
2297   20016             
2298   20016             _zeroBufCOLj:  
2299   20016                ld ix, (p_callseq)
zslots7.z80 line 2299: unrecognized instruction.          (LD)
2300   20016                push de
zslots7.z80 line 2300: unrecognized instruction.          (PUSH)
2301   20016                  push hl   
zslots7.z80 line 2301: unrecognized instruction.          (PUSH)
2302   20016                   jp (ix)
zslots7.z80 line 2302: unrecognized instruction.          (JP)
2303   20016             __rechk:
2304   20016                   ld a, (p_callseq+2)
zslots7.z80 line 2304: unrecognized instruction.          (LD)
2305   20016                   or %0
zslots7.z80 line 2305: unrecognized instruction.          (OR)
2306   20016                   jp z, _partBre
zslots7.z80 line 2306: unrecognized instruction.          (JP)
2307   20016                   ld ix, (p_callseq+2)
zslots7.z80 line 2307: unrecognized instruction.          (LD)
2308   20016                   jp (ix)
zslots7.z80 line 2308: unrecognized instruction.          (JP)
2309   20016             __rechk2:
2310   20016                   ld a, (p_callseq+4)
zslots7.z80 line 2310: unrecognized instruction.          (LD)
2311   20016                   or %0
zslots7.z80 line 2311: unrecognized instruction.          (OR)
2312   20016                   jp z, _partBre
zslots7.z80 line 2312: unrecognized instruction.          (JP)
2313   20016                   ld ix, (p_callseq+4)
zslots7.z80 line 2313: unrecognized instruction.          (LD)
2314   20016                   jp (ix)
zslots7.z80 line 2314: unrecognized instruction.          (JP)
2315   20016             _partBre:
2316   20016                  pop hl 
zslots7.z80 line 2316: unrecognized instruction.          (POP)
2317   20016                  ld e, 12
zslots7.z80 line 2317: unrecognized instruction.          (LD)
2318   20016                  ld d, 0 
zslots7.z80 line 2318: unrecognized instruction.          (LD)
2319   20016                  add hl, de 
zslots7.z80 line 2319: unrecognized instruction.          (ADD)
2320   20016                  dec c
zslots7.z80 line 2320: unrecognized instruction.          (DEC)
2321   20016                 pop de 
zslots7.z80 line 2321: unrecognized instruction.          (POP)
2322   20016                 jp nz, _zeroBufCOLj
zslots7.z80 line 2322: unrecognized instruction.          (JP)
2323   20016                 ret 
zslots7.z80 line 2323: unrecognized instruction.          (RET)
2324   20016             
2325   20016             ;inputs: e = bytecount
2326   20016             _rendFullBytesinRow:
2327   20016                 ld (hl), $00
zslots7.z80 line 2327: unrecognized instruction.          (LD)
2328   20016                 inc hl 
zslots7.z80 line 2328: unrecognized instruction.          (INC)
2329   20016                 dec e
zslots7.z80 line 2329: unrecognized instruction.          (DEC)
2330   20016                 jp nz, _rendFullBytesinRow
zslots7.z80 line 2330: unrecognized instruction.          (JP)
2331   20016                 jp __rechk2
zslots7.z80 line 2331: unrecognized instruction.          (JP)
2332   20016             
2333   20016             ;inputs:  d = bits remaining
2334   20016             ;output:  a = && mask to close out the row
2335   20016             _createLastBitsInRowMask:
2336   20016                 ld c, %00000001
zslots7.z80 line 2336: unrecognized instruction.          (LD)
2337   20016             _clbi:         
2338   20016                 ld a, 8
zslots7.z80 line 2338: unrecognized instruction.          (LD)
2339   20016                 sub d 
zslots7.z80 line 2339: unrecognized instruction.          (SUB)
2340   20016                 xor a 
zslots7.z80 line 2340: unrecognized instruction.          (XOR)
2341   20016             __clp:
2342   20016                 or c 
zslots7.z80 line 2342: unrecognized instruction.          (OR)
2343   20016                 sla c 
zslots7.z80 line 2343: unrecognized instruction.          (SLA)
2344   20016                 dec d 
zslots7.z80 line 2344: unrecognized instruction.          (DEC)
2345   20016                 jp nz, __clp
zslots7.z80 line 2345: unrecognized instruction.          (JP)
2346   20016                 ret 
zslots7.z80 line 2346: unrecognized instruction.          (RET)
2347   20016             
2348   20016             ;output:  e=byte count, a=remainder     
2349   20016             _byteCount:
2350   20016                 xor a 
zslots7.z80 line 2350: unrecognized instruction.          (XOR)
2351   20016                 ld c, 1 ;bitcounter 
zslots7.z80 line 2351: unrecognized instruction.          (LD)
2352   20016                 srl d
zslots7.z80 line 2352: unrecognized instruction.          (SRL)
2353   20016                 call c, __bcc
zslots7.z80 line 2353: unrecognized instruction.          (CALL)
2354   20016                 srl d 
zslots7.z80 line 2354: unrecognized instruction.          (SRL)
2355   20016                 call c, __bcc 
zslots7.z80 line 2355: unrecognized instruction.          (CALL)
2356   20016                 srl d 
zslots7.z80 line 2356: unrecognized instruction.          (SRL)
2357   20016                 call c, __bcc
zslots7.z80 line 2357: unrecognized instruction.          (CALL)
2358   20016                 ld e, d
zslots7.z80 line 2358: unrecognized instruction.          (LD)
2359   20016                 ret  
zslots7.z80 line 2359: unrecognized instruction.          (RET)
2360   20016             __bcc:
2361   20016                 sla c 
zslots7.z80 line 2361: unrecognized instruction.          (SLA)
2362   20016                 or c 
zslots7.z80 line 2362: unrecognized instruction.          (OR)
2363   20016             
2364   20016                 ret
zslots7.z80 line 2364: unrecognized instruction.          (RET)
2365   20016             ;b=starting position
2366   20016             ;c=bits remaining to 0 out 
2367   20016             _getb1remMSK:
2368   20016                 ld a, b
zslots7.z80 line 2368: unrecognized instruction.          (LD)
2369   20016                 cp $80
zslots7.z80 line 2369: unrecognized instruction.          (CP)
2370   20016                 jp nz, __gmk
zslots7.z80 line 2370: unrecognized instruction.          (JP)
2371   20016                 ld a, 0
zslots7.z80 line 2371: unrecognized instruction.          (LD)
2372   20016                 jp __gmkFIN
zslots7.z80 line 2372: unrecognized instruction.          (JP)
2373   20016             __gmk:
2374   20016                 push de 
zslots7.z80 line 2374: unrecognized instruction.          (PUSH)
2375   20016                 ld d, %10000000
zslots7.z80 line 2375: unrecognized instruction.          (LD)
2376   20016                 ld a, b 
zslots7.z80 line 2376: unrecognized instruction.          (LD)
2377   20016             __gmki:
2378   20016                 or d
zslots7.z80 line 2378: unrecognized instruction.          (OR)
2379   20016                 srl d
zslots7.z80 line 2379: unrecognized instruction.          (SRL)
2380   20016                 dec c
zslots7.z80 line 2380: unrecognized instruction.          (DEC)
2381   20016                 jp nz, __gmki
zslots7.z80 line 2381: unrecognized instruction.          (JP)
2382   20016                 pop de 
zslots7.z80 line 2382: unrecognized instruction.          (POP)
2383   20016             __gmkFIN
2384   20016                 ld (rectMaskB1Mask), a 
zslots7.z80 line 2384: unrecognized instruction.          (LD)
2385   20016                 ret 
zslots7.z80 line 2385: unrecognized instruction.          (RET)
2386   20016             
2387   20016             ;b=starting position
2388   20016             _renderB1Remainder:
2389   20016                 ld a, (rectMaskB1Mask)
zslots7.z80 line 2389: unrecognized instruction.          (LD)
2390   20016                 and (hl) 
zslots7.z80 line 2390: unrecognized instruction.          (AND)
2391   20016                 ld (hl), a 
zslots7.z80 line 2391: unrecognized instruction.          (LD)
2392   20016                 inc hl 
zslots7.z80 line 2392: unrecognized instruction.          (INC)
2393   20016                 jp __rechk
zslots7.z80 line 2393: unrecognized instruction.          (JP)
2394   20016             
2395   20016             
2396   20016             ;inputs: d = final bytemask
2397   20016             _renderRNRemainder:
2398   20016                 ld a, d 
zslots7.z80 line 2398: unrecognized instruction.          (LD)
2399   20016                 and (hl)
zslots7.z80 line 2399: unrecognized instruction.          (AND)
2400   20016                 ld (hl), a 
zslots7.z80 line 2400: unrecognized instruction.          (LD)
2401   20016                 inc hl 
zslots7.z80 line 2401: unrecognized instruction.          (INC)
2402   20016                 jp _partBre 
zslots7.z80 line 2402: unrecognized instruction.          (JP)
2403   20016             
2404   20016             ;the full width is less than 16
2405   20016             ;c = bits remaining after byte0's remainder is rendered
2406   20016             _bcLone:
2407   20016                 ld d, c 
zslots7.z80 line 2407: unrecognized instruction.          (LD)
2408   20016                 call _createLastBitsInRowMask
zslots7.z80 line 2408: unrecognized instruction.          (CALL)
2409   20016                 ret
zslots7.z80 line 2409: unrecognized instruction.          (RET)
2410   20016             
2411   20016             ;input:  b = getpixel bitmask
2412   20016             ;output: c = the remainder
2413   20016             _bitRemainderFromOffset:
2414   20016                 ld c, 8 
zslots7.z80 line 2414: unrecognized instruction.          (LD)
2415   20016             
2416   20016             _bremI:        
2417   20016                 srl b 
zslots7.z80 line 2417: unrecognized instruction.          (SRL)
2418   20016                 ret z 
zslots7.z80 line 2418: unrecognized instruction.          (RET)
2419   20016                 dec c 
zslots7.z80 line 2419: unrecognized instruction.          (DEC)
2420   20016                 jp _bremI
zslots7.z80 line 2420: unrecognized instruction.          (JP)
2421   20016             ;fill full bytes with 0's
2422   20016             
2423   20016             ; Draws a vertical line from (D, L)-(D, E)
2424   20016             Draw_Line:
2425   20016                 LD a, 5
zslots7.z80 line 2425: unrecognized instruction.          (LD)
2426   20016                 ld l, a
zslots7.z80 line 2426: unrecognized instruction.          (LD)
2427   20016                 LD D, A
zslots7.z80 line 2427: unrecognized instruction.          (LD)
2428   20016                 LD a, 30
zslots7.z80 line 2428: unrecognized instruction.          (LD)
2429   20016                 LD e, a 
zslots7.z80 line 2429: unrecognized instruction.          (LD)
2430   20016             
2431   20016                 LD     A, E
zslots7.z80 line 2431: unrecognized instruction.          (LD)
2432   20016                 SUB    L
zslots7.z80 line 2432: unrecognized instruction.          (SUB)
2433   20016                 RET    Z
zslots7.z80 line 2433: unrecognized instruction.          (RET)
2434   20016                 PUSH   AF        ; Find and store vertical length of line
zslots7.z80 line 2434: unrecognized instruction.          (PUSH)
2435   20016             
2436   20016                 LD     A, D
zslots7.z80 line 2436: unrecognized instruction.          (LD)
2437   20016                 CALL   ionGetPixel
zslots7.z80 line 2437: unrecognized instruction.          (CALL)
2438   20016             
2439   20016                 POP    BC        ; Now B = number of pixels to draw
zslots7.z80 line 2439: unrecognized instruction.          (POP)
2440   20016                 LD     DE, 12     ; There are 12 bytes between rows
zslots7.z80 line 2440: unrecognized instruction.          (LD)
2441   20016                 LD     C, A       ; Save the bitmask because it will get obliterated
zslots7.z80 line 2441: unrecognized instruction.          (LD)
2442   20016             
2443   20016             PlotLoop:
2444   20016                 LD     A, C
zslots7.z80 line 2444: unrecognized instruction.          (LD)
2445   20016                 OR     (HL)
zslots7.z80 line 2445: unrecognized instruction.          (OR)
2446   20016                 LD     (HL), A
zslots7.z80 line 2446: unrecognized instruction.          (LD)
2447   20016                 ADD    HL, DE
zslots7.z80 line 2447: unrecognized instruction.          (ADD)
2448   20016                 DJNZ   PlotLoop
zslots7.z80 line 2448: unrecognized instruction.          (DJNZ)
2449   20016                 RET
zslots7.z80 line 2449: unrecognized instruction.          (RET)
2450   20016             
2451   20016             ;Load (data_p) with the address of the array sequence to draw
2452   20016             draw_sarr_at_xarr_yarr:
2453   20016                            LD HL, (data_p+8)
zslots7.z80 line 2453: unrecognized instruction.          (LD)
2454   20016                            LD (data_p), HL
zslots7.z80 line 2454: unrecognized instruction.          (LD)
2455   20016             dsarr_loop:   
2456   20016                            LD HL, (data_p)            
zslots7.z80 line 2456: unrecognized instruction.          (LD)
2457   20016                            LD A, (HL)
zslots7.z80 line 2457: unrecognized instruction.          (LD)
2458   20016                            CP $0F
zslots7.z80 line 2458: unrecognized instruction.          (CP)
2459   20016                            ret z
zslots7.z80 line 2459: unrecognized instruction.          (RET)
2460   20016                            INC HL
zslots7.z80 line 2460: unrecognized instruction.          (INC)
2461   20016                            LD (data_p), HL
zslots7.z80 line 2461: unrecognized instruction.          (LD)
2462   20016                            or %0                      ;reels with no data don't get re-drawn
zslots7.z80 line 2462: unrecognized instruction.          (OR)
2463   20016                            jr z, dsarr_loop             
zslots7.z80 line 2463: unrecognized instruction.          (JR)
2464   20016                            ld HL, draw_w_h
zslots7.z80 line 2464: unrecognized instruction.          (LD)
2465   20016                            cp $09                     ;if bonus symbol custom height
zslots7.z80 line 2465: unrecognized instruction.          (CP)
2466   20016                            ld b, (HL)                  ;sprite width, from calling def
zslots7.z80 line 2466: unrecognized instruction.          (LD)
2467   20016                            INC HL
zslots7.z80 line 2467: unrecognized instruction.          (INC)
2468   20016                            ld c, (HL)                  ;sprite height, set from caller
zslots7.z80 line 2468: unrecognized instruction.          (LD)
2469   20016                            
2470   20016                            ADD A, A                    ;E contains 1-8 result of the rng symbol
zslots7.z80 line 2470: unrecognized instruction.          (ADD)
2471   20016                            ADD A, A                    ;(1-8)*8 = sprite offset
zslots7.z80 line 2471: unrecognized instruction.          (ADD)
2472   20016                            ADD A, A 
zslots7.z80 line 2472: unrecognized instruction.          (ADD)
2473   20016                            ld HL, slot_sprites
zslots7.z80 line 2473: unrecognized instruction.          (LD)
2474   20016                            ld (P_), HL
zslots7.z80 line 2474: unrecognized instruction.          (LD)
2475   20016                            call jumpAfromP_
zslots7.z80 line 2475: unrecognized instruction.          (CALL)
2476   20016                            push IX
zslots7.z80 line 2476: unrecognized instruction.          (PUSH)
2477   20016                            ;dec IX
2478   20016                   ;
2479   20016                            ld a, (aO)
zslots7.z80 line 2479: unrecognized instruction.          (LD)
2480   20016                            add a, sX
zslots7.z80 line 2480: unrecognized instruction.          (ADD)
2481   20016             
2482   20016                            LD HL, (data_p)
zslots7.z80 line 2482: unrecognized instruction.          (LD)
2483   20016                            dec HL
zslots7.z80 line 2483: unrecognized instruction.          (DEC)
2484   20016                            LD (P_), HL
zslots7.z80 line 2484: unrecognized instruction.          (LD)
2485   20016                            call jumpAfromP_
zslots7.z80 line 2485: unrecognized instruction.          (CALL)
2486   20016                            ld A, (IX)
zslots7.z80 line 2486: unrecognized instruction.          (LD)
2487   20016                            LD BC, $001A
zslots7.z80 line 2487: unrecognized instruction.          (LD)
2488   20016                            ADD IX, BC
zslots7.z80 line 2488: unrecognized instruction.          (ADD)
2489   20016                            LD L, (IX)
zslots7.z80 line 2489: unrecognized instruction.          (LD)
2490   20016                            
2491   20016                            ;add a, $1A
2492   20016                            ;ld (u_y+2), a
2493   20016             
2494   20016             ;u_x:           ld A, (IX + sX)         ;x coordinate
2495   20016             ;u_y:           LD HL, (IX + sY)         ;y coordinate [***LOADING 0 on stopspin]
2496   20016                            pop IX
zslots7.z80 line 2496: unrecognized instruction.          (POP)
2497   20016             
2498   20016                            ld  c, a
zslots7.z80 line 2498: unrecognized instruction.          (LD)
2499   20016                            LD  A, (spinAnimCount)
zslots7.z80 line 2499: unrecognized instruction.          (LD)
2500   20016                            add a, l
zslots7.z80 line 2500: unrecognized instruction.          (ADD)
2501   20016                            ld  L, A
zslots7.z80 line 2501: unrecognized instruction.          (LD)
2502   20016                            ld  a, c
zslots7.z80 line 2502: unrecognized instruction.          (LD)
2503   20016                            CALL XORSPR_L
zslots7.z80 line 2503: unrecognized instruction.          (CALL)
2504   20016             
2505   20016                     
2506   20016                            jp dsarr_loop
zslots7.z80 line 2506: unrecognized instruction.          (JP)
2507   20016             ;call whenever multiplier or lines is updated.
2508   20016             _incMult:    
2509   20016                          ld a, (_multiplier)
zslots7.z80 line 2509: unrecognized instruction.          (LD)
2510   20016                          cp 05h
zslots7.z80 line 2510: unrecognized instruction.          (CP)
2511   20016                          jp nz, _incM
zslots7.z80 line 2511: unrecognized instruction.          (JP)
2512   20016                          ld a, 1
zslots7.z80 line 2512: unrecognized instruction.          (LD)
2513   20016                          ld (_multiplier), a
zslots7.z80 line 2513: unrecognized instruction.          (LD)
2514   20016                          jr d_incM
zslots7.z80 line 2514: unrecognized instruction.          (JR)
2515   20016             _incM:       inc a
zslots7.z80 line 2515: Label not found: (_incM)
zslots7.z80 line 2515: label value misalligned.           (_incM)
zslots7.z80 line 2515: unrecognized instruction.          (_incM)
2516   20016                          ld (_multiplier), a
zslots7.z80 line 2516: unrecognized instruction.          (LD)
2517   20016             
2518   20016             d_incM:        LD HL, _TEXT_XY_RMENU
zslots7.z80 line 2518: Label not found: (d_incM)
zslots7.z80 line 2518: label value misalligned.           (d_incM)
zslots7.z80 line 2518: unrecognized instruction.          (d_incM)
2519   20016                            LD (PenCol), HL
zslots7.z80 line 2519: unrecognized instruction.          (LD)
2520   20016                            LD A, ' '
zslots7.z80 line 2520: unrecognized instruction.          (LD)
2521   20016                            bcall(_VPutMap)
zslots7.z80 line 2521: unrecognized instruction.          (BCALL(_VPUTMAP))
2522   20016                            LD A, 78h            ;small 'x'
zslots7.z80 line 2522: unrecognized instruction.          (LD)
2523   20016                            bcall(_VPutMap)    
zslots7.z80 line 2523: unrecognized instruction.          (BCALL(_VPUTMAP))
2524   20016             
2525   20016                            jr preUpdateBet
zslots7.z80 line 2525: unrecognized instruction.          (JR)
2526   20016             
2527   20016             _incLines:
2528   20016                          ld a, (_lines)
zslots7.z80 line 2528: unrecognized instruction.          (LD)
2529   20016                          cp 09h
zslots7.z80 line 2529: unrecognized instruction.          (CP)
2530   20016                          jp nz, _incL
zslots7.z80 line 2530: unrecognized instruction.          (JP)
2531   20016                          ld a, 1
zslots7.z80 line 2531: unrecognized instruction.          (LD)
2532   20016                          ld (_lines), a
zslots7.z80 line 2532: unrecognized instruction.          (LD)
2533   20016                          jr d_incL
zslots7.z80 line 2533: unrecognized instruction.          (JR)
2534   20016             _incL:       inc a
zslots7.z80 line 2534: Label not found: (_incL)
zslots7.z80 line 2534: label value misalligned.           (_incL)
zslots7.z80 line 2534: unrecognized instruction.          (_incL)
2535   20016                          ld (_lines), a
zslots7.z80 line 2535: unrecognized instruction.          (LD)
2536   20016             
2537   20016             d_incL:        LD HL, _TEXT_XY_RMENU3
zslots7.z80 line 2537: Label not found: (d_incL)
zslots7.z80 line 2537: label value misalligned.           (d_incL)
zslots7.z80 line 2537: unrecognized instruction.          (d_incL)
2538   20016                            LD (PenCol), HL
zslots7.z80 line 2538: unrecognized instruction.          (LD)
2539   20016                            LD A, ' '
zslots7.z80 line 2539: unrecognized instruction.          (LD)
2540   20016                            bcall(_VPutMap)
zslots7.z80 line 2540: unrecognized instruction.          (BCALL(_VPUTMAP))
2541   20016                            LD A, 2Bh            ;small '+'
zslots7.z80 line 2541: unrecognized instruction.          (LD)
2542   20016                            bcall(_VPutMap)    
zslots7.z80 line 2542: unrecognized instruction.          (BCALL(_VPUTMAP))
2543   20016                                              
2544   20016                            jr preUpdateBet_l
zslots7.z80 line 2544: unrecognized instruction.          (JR)
2545   20016             
2546   20016             _decLines:
2547   20016                          ld a, (_lines)
zslots7.z80 line 2547: unrecognized instruction.          (LD)
2548   20016                          cp 01h
zslots7.z80 line 2548: unrecognized instruction.          (CP)
2549   20016                          jp nz, _decL
zslots7.z80 line 2549: unrecognized instruction.          (JP)
2550   20016                          ld a, 9
zslots7.z80 line 2550: unrecognized instruction.          (LD)
2551   20016                          ld (_lines), a
zslots7.z80 line 2551: unrecognized instruction.          (LD)
2552   20016                          jr d_decL
zslots7.z80 line 2552: unrecognized instruction.          (JR)
2553   20016             _decL:       dec a
zslots7.z80 line 2553: Label not found: (_decL)
zslots7.z80 line 2553: label value misalligned.           (_decL)
zslots7.z80 line 2553: unrecognized instruction.          (_decL)
2554   20016                          ld (_lines), a
zslots7.z80 line 2554: unrecognized instruction.          (LD)
2555   20016             
2556   20016             d_decL:        LD HL, _TEXT_XY_RMENU2
zslots7.z80 line 2556: Label not found: (d_decL)
zslots7.z80 line 2556: label value misalligned.           (d_decL)
zslots7.z80 line 2556: unrecognized instruction.          (d_decL)
2557   20016                            LD (PenCol), HL
zslots7.z80 line 2557: unrecognized instruction.          (LD)
2558   20016                            LD A, ' '
zslots7.z80 line 2558: unrecognized instruction.          (LD)
2559   20016                            bcall(_VPutMap)
zslots7.z80 line 2559: unrecognized instruction.          (BCALL(_VPUTMAP))
2560   20016                            LD A, 2Dh            ;small '-'
zslots7.z80 line 2560: unrecognized instruction.          (LD)
2561   20016                            bcall(_VPutMap)         
zslots7.z80 line 2561: unrecognized instruction.          (BCALL(_VPUTMAP))
2562   20016                         
2563   20016                            jr preUpdateBet_l
zslots7.z80 line 2563: unrecognized instruction.          (JR)
2564   20016             
2565   20016             
2566   20016             preUpdateBet_l:
2567   20016                            call draw_activePayLines_mini
zslots7.z80 line 2567: unrecognized instruction.          (CALL)
2568   20016                            ;
2569   20016             ;highlight buttons being pressed, check $, anything else that needs to be done before update bet
2570   20016             preUpdateBet:
2571   20016                            call ionFastCopy
zslots7.z80 line 2571: unrecognized instruction.          (CALL)
2572   20016                            call draw_rmenu
zslots7.z80 line 2572: unrecognized instruction.          (CALL)
2573   20016             
2574   20016             
2575   20016             updateBet:          
2576   20016                         ld a, 00h
zslots7.z80 line 2576: unrecognized instruction.          (LD)
2577   20016                         ld h, a
zslots7.z80 line 2577: unrecognized instruction.          (LD)
2578   20016                         ld d, a
zslots7.z80 line 2578: unrecognized instruction.          (LD)
2579   20016             
2580   20016                         ld a, (_lines)
zslots7.z80 line 2580: unrecognized instruction.          (LD)
2581   20016                         ld e, a
zslots7.z80 line 2581: unrecognized instruction.          (LD)
2582   20016                         ld a, (_multiplier)
zslots7.z80 line 2582: unrecognized instruction.          (LD)
2583   20016                         ld l, a
zslots7.z80 line 2583: unrecognized instruction.          (LD)
2584   20016                         call mult
zslots7.z80 line 2584: unrecognized instruction.          (CALL)
2585   20016             
2586   20016                         ld B, L
zslots7.z80 line 2586: unrecognized instruction.          (LD)
2587   20016                         LD DE, (money)
zslots7.z80 line 2587: unrecognized instruction.          (LD)
2588   20016                         LD A, E
zslots7.z80 line 2588: unrecognized instruction.          (LD)
2589   20016                         cp 00h
zslots7.z80 line 2589: unrecognized instruction.          (CP)
2590   20016                         jp nz, enmoney
zslots7.z80 line 2590: unrecognized instruction.          (JP)
2591   20016                         CP B
zslots7.z80 line 2591: unrecognized instruction.          (CP)
2592   20016                         ret c 
zslots7.z80 line 2592: unrecognized instruction.          (RET)
2593   20016             enmoney:    
2594   20016                         LD (_totalBet), HL
zslots7.z80 line 2594: unrecognized instruction.          (LD)
2595   20016                         ret 
zslots7.z80 line 2595: unrecognized instruction.          (RET)
2596   20016             
2597   20016             draw_rmenu:
2598   20016                            LD HL, _TEXT_XY_RMENU
zslots7.z80 line 2598: unrecognized instruction.          (LD)
2599   20016                            LD (PenCol), HL
zslots7.z80 line 2599: unrecognized instruction.          (LD)
2600   20016                            LD A, ' '
zslots7.z80 line 2600: unrecognized instruction.          (LD)
2601   20016                            bcall(_VPutMap)
zslots7.z80 line 2601: unrecognized instruction.          (BCALL(_VPUTMAP))
2602   20016                            LD A, 78h            ;small 'x'
zslots7.z80 line 2602: unrecognized instruction.          (LD)
2603   20016                            bcall(_VPutMap)       
zslots7.z80 line 2603: unrecognized instruction.          (BCALL(_VPUTMAP))
2604   20016             
2605   20016                            LD HL, _TEXT_XY_RMENU2
zslots7.z80 line 2605: unrecognized instruction.          (LD)
2606   20016                            LD (PenCol), HL
zslots7.z80 line 2606: unrecognized instruction.          (LD)
2607   20016                            LD A, ' '
zslots7.z80 line 2607: unrecognized instruction.          (LD)
2608   20016                            bcall(_VPutMap)
zslots7.z80 line 2608: unrecognized instruction.          (BCALL(_VPUTMAP))
2609   20016                            LD A, 2Dh            ;small '-'
zslots7.z80 line 2609: unrecognized instruction.          (LD)
2610   20016                            bcall(_VPutMap)
zslots7.z80 line 2610: unrecognized instruction.          (BCALL(_VPUTMAP))
2611   20016             
2612   20016                            LD HL, _TEXT_XY_RMENU3
zslots7.z80 line 2612: unrecognized instruction.          (LD)
2613   20016                            LD (PenCol), HL
zslots7.z80 line 2613: unrecognized instruction.          (LD)
2614   20016                            LD A, ' '
zslots7.z80 line 2614: unrecognized instruction.          (LD)
2615   20016                            bcall(_VPutMap)
zslots7.z80 line 2615: unrecognized instruction.          (BCALL(_VPUTMAP))
2616   20016                            LD A, 2Bh            ;small '+'
zslots7.z80 line 2616: unrecognized instruction.          (LD)
2617   20016                            bcall(_VPutMap)
zslots7.z80 line 2617: unrecognized instruction.          (BCALL(_VPUTMAP))
2618   20016                           
2619   20016                            ;turn off text highlighting
2620   20016                            RES   textInverse, (IY+textFlags)   ;invert text
zslots7.z80 line 2620: unrecognized instruction.          (RES)
2621   20016                            LD HL, _NUM_XY_LNS
zslots7.z80 line 2621: unrecognized instruction.          (LD)
2622   20016                            LD (PenCol), HL
zslots7.z80 line 2622: unrecognized instruction.          (LD)
2623   20016                            LD a, (_lines)
zslots7.z80 line 2623: unrecognized instruction.          (LD)
2624   20016                            bcall(_setxxop1)            ;place A into OP1
zslots7.z80 line 2624: unrecognized instruction.          (BCALL(_SETXXOP1))
2625   20016             	           bcall(_dispop1a)            ;write OP1 to screen, at (PenCol, PenRow)  
zslots7.z80 line 2625: unrecognized instruction.          (BCALL(_DISPOP1A))
2626   20016             
2627   20016                            LD HL, _NUM_XY_MTP
zslots7.z80 line 2627: unrecognized instruction.          (LD)
2628   20016                            LD (PenCol), HL
zslots7.z80 line 2628: unrecognized instruction.          (LD)
2629   20016                            LD a, (_multiplier)
zslots7.z80 line 2629: unrecognized instruction.          (LD)
2630   20016                            bcall(_setxxop1)            ;place A into OP1
zslots7.z80 line 2630: unrecognized instruction.          (BCALL(_SETXXOP1))
2631   20016             	           bcall(_dispop1a)            ;write OP1 to screen, at (PenCol, PenRow)           
zslots7.z80 line 2631: unrecognized instruction.          (BCALL(_DISPOP1A))
2632   20016                            SET   textInverse, (IY+textFlags)   ;invert text
zslots7.z80 line 2632: unrecognized instruction.          (SET)
2633   20016                            call IONfastCopy
zslots7.z80 line 2633: unrecognized instruction.          (CALL)
2634   20016                            ret
zslots7.z80 line 2634: unrecognized instruction.          (RET)
2635   20016             ;jumpAfromP_()
2636   20016             ;takes an offset(A) and a pointer (P*), jumps 16bits and returns new
2637   20016             ;location in IX.  Used for dynamic jumping
2638   20016             ;   inputs:
2639   20016             ;       A = offset, P* = entry point
2640   20016             ;   output:
2641   20016             ;       IX now points to new memory location
2642   20016             ;   destroys:
2643   20016             ;       HL, DE, IX 
2644   20016             jumpAfromP_:    
2645   20016                            LD E,  A
zslots7.z80 line 2645: unrecognized instruction.          (LD)
2646   20016                            LD D,  00h             
zslots7.z80 line 2646: unrecognized instruction.          (LD)
2647   20016                            LD IX, (P_)       ;HL = (HL + DE(Offset))
zslots7.z80 line 2647: unrecognized instruction.          (LD)
2648   20016                            ADD IX, DE
zslots7.z80 line 2648: unrecognized instruction.          (ADD)
2649   20016                            ret
zslots7.z80 line 2649: unrecognized instruction.          (RET)
2650   20016             jumpEDfromP_:                 
2651   20016                            LD IX, (P_)       ;HL = (HL + DE(Offset))
zslots7.z80 line 2651: unrecognized instruction.          (LD)
2652   20016                            ADD IX, DE
zslots7.z80 line 2652: unrecognized instruction.          (ADD)
2653   20016                            ret
zslots7.z80 line 2653: unrecognized instruction.          (RET)
2654   20016             draw_top_layers:
2655   20016                             call draw_mask_layer 
zslots7.z80 line 2655: unrecognized instruction.          (CALL)
2656   20016                             call draw_layer_fillbg_top     
zslots7.z80 line 2656: unrecognized instruction.          (CALL)
2657   20016                             call draw_layer_fillbg_low
zslots7.z80 line 2657: unrecognized instruction.          (CALL)
2658   20016                             ret
zslots7.z80 line 2658: unrecognized instruction.          (RET)
2659   20016             
2660   20016             draw_activePayLines_mini:  
2661   20016                             ld b, 8
zslots7.z80 line 2661: unrecognized instruction.          (LD)
2662   20016                             ld c, 2
zslots7.z80 line 2662: unrecognized instruction.          (LD)
2663   20016                             ld a, 4Fh
zslots7.z80 line 2663: unrecognized instruction.          (LD)
2664   20016                             ld l, 38h   ;bottom right panel       
zslots7.z80 line 2664: unrecognized instruction.          (LD)
2665   20016                             ;ld a, 2Eh
2666   20016                             ld IX, _8x16_on
zslots7.z80 line 2666: unrecognized instruction.          (LD)
2667   20016                             ld h, 02; 
zslots7.z80 line 2667: unrecognized instruction.          (LD)
2668   20016                             call put_any_Sprite
zslots7.z80 line 2668: unrecognized instruction.          (CALL)
2669   20016                             call IONfastCopy
zslots7.z80 line 2669: unrecognized instruction.          (CALL)
2670   20016             
2671   20016                             ld a, (_lines)
zslots7.z80 line 2671: unrecognized instruction.          (LD)
2672   20016                             ld c, a         ;end condition
zslots7.z80 line 2672: unrecognized instruction.          (LD)
2673   20016                             ld b, 1         ;start point
zslots7.z80 line 2673: unrecognized instruction.          (LD)
2674   20016                             LD IX, minimap
zslots7.z80 line 2674: unrecognized instruction.          (LD)
2675   20016             
2676   20016             _dapl:          push ix
zslots7.z80 line 2676: Label not found: (_dapl)
zslots7.z80 line 2676: label value misalligned.           (_dapl)
zslots7.z80 line 2676: unrecognized instruction.          (_dapl)
2677   20016                             push bc
zslots7.z80 line 2677: unrecognized instruction.          (PUSH)
2678   20016             
2679   20016                             ld b, 8
zslots7.z80 line 2679: unrecognized instruction.          (LD)
2680   20016                             ld c, 2
zslots7.z80 line 2680: unrecognized instruction.          (LD)
2681   20016                             ld a, 4Fh
zslots7.z80 line 2681: unrecognized instruction.          (LD)
2682   20016                             ld l, 38h
zslots7.z80 line 2682: unrecognized instruction.          (LD)
2683   20016                             ;ld l, 2Eh
2684   20016                 
2685   20016                             call IonLargeSprite
zslots7.z80 line 2685: unrecognized instruction.          (CALL)
2686   20016                             call IonFastCopy
zslots7.z80 line 2686: unrecognized instruction.          (CALL)
2687   20016                             pop bc   
zslots7.z80 line 2687: unrecognized instruction.          (POP)
2688   20016                             pop ix 
zslots7.z80 line 2688: unrecognized instruction.          (POP)
2689   20016                             ld a, c
zslots7.z80 line 2689: unrecognized instruction.          (LD)
2690   20016                             cp b
zslots7.z80 line 2690: unrecognized instruction.          (CP)
2691   20016                             ret z
zslots7.z80 line 2691: unrecognized instruction.          (RET)
2692   20016                             inc b
zslots7.z80 line 2692: unrecognized instruction.          (INC)
2693   20016             
2694   20016                             ld d, 00h
zslots7.z80 line 2694: unrecognized instruction.          (LD)
2695   20016                             ld e, 10h
zslots7.z80 line 2695: unrecognized instruction.          (LD)
2696   20016                             add ix, de 
zslots7.z80 line 2696: unrecognized instruction.          (ADD)
2697   20016                            
2698   20016                             jr _dapl
zslots7.z80 line 2698: unrecognized instruction.          (JR)
2699   20016                             ret
zslots7.z80 line 2699: unrecognized instruction.          (RET)
2700   20016             ;Put large sprite
2701   20016             ;B = height
2702   20016             ;C = width / 8
2703   20016             ; l=yc
2704   20016             ; a=xc
2705   20016             ; ix holds pointer
2706   20016             
2707   20016             
2708   20016             draw_activePayLines:
2709   20016             ;            for(i=1; i<=_lines, i++)
2710   20016             ;                for(j=(1); slot_rules[j+1]!=$FF, j++)                 
2711   20016             ;                   B = drawX[ i[j] ]+4
2712   20016             ;                   C = drawY[ i[j] ]+4
2713   20016             ;                   
2714   20016             ;                   D = drawX[ i[j+1] ]+4
2715   20016             ;                   E = drawY[ i[j+1] ]+4
2716   20016             ;                   bcall(_iline)
2717   20016             ;                   LD B, D
2718   20016             ;                   LD C, E
2719   20016             
2720   20016             
2721   20016                 LD HL, pay_rules
zslots7.z80 line 2721: unrecognized instruction.          (LD)
2722   20016                 LD (data_p+6), HL       ;slot_rules[0]
zslots7.z80 line 2722: unrecognized instruction.          (LD)
2723   20016             
2724   20016                 ld a, (_lines)
zslots7.z80 line 2724: unrecognized instruction.          (LD)
2725   20016                 ld b, a         ;j
zslots7.z80 line 2725: unrecognized instruction.          (LD)
2726   20016                 ld c, 1         ;start condition
zslots7.z80 line 2726: unrecognized instruction.          (LD)
2727   20016                 push bc
zslots7.z80 line 2727: unrecognized instruction.          (PUSH)
2728   20016             
2729   20016                     call _gLX          ;gets X,Y -> B, C
zslots7.z80 line 2729: unrecognized instruction.          (CALL)
2730   20016                
2731   20016             
2732   20016             _incj:      push bc
zslots7.z80 line 2732: Label not found: (_incj)
zslots7.z80 line 2732: label value misalligned.           (_incj)
zslots7.z80 line 2732: unrecognized instruction.          (_incj)
2733   20016                         LD HL, (data_p+6)   ;j+1
zslots7.z80 line 2733: unrecognized instruction.          (LD)
2734   20016                         inc HL
zslots7.z80 line 2734: unrecognized instruction.          (INC)
2735   20016                         LD (data_p+6), HL
zslots7.z80 line 2735: unrecognized instruction.          (LD)
2736   20016                         call _gLX      
zslots7.z80 line 2736: unrecognized instruction.          (CALL)
2737   20016                         ld d, b
zslots7.z80 line 2737: unrecognized instruction.          (LD)
2738   20016                         ld e, c
zslots7.z80 line 2738: unrecognized instruction.          (LD)
2739   20016                         pop bc 
zslots7.z80 line 2739: unrecognized instruction.          (POP)
2740   20016                         call zi_line
zslots7.z80 line 2740: unrecognized instruction.          (CALL)
2741   20016                         pop bc
zslots7.z80 line 2741: unrecognized instruction.          (POP)
2742   20016                         inc b
zslots7.z80 line 2742: unrecognized instruction.          (INC)
2743   20016                         ld a, b 
zslots7.z80 line 2743: unrecognized instruction.          (LD)
2744   20016                         cp 06h
zslots7.z80 line 2744: unrecognized instruction.          (CP)
2745   20016                         jr c, _noInci
zslots7.z80 line 2745: unrecognized instruction.          (JR)
2746   20016                         inc c               ;i++
zslots7.z80 line 2746: unrecognized instruction.          (INC)
2747   20016                         ld a, (_lines)
zslots7.z80 line 2747: unrecognized instruction.          (LD)
2748   20016                         cp c 
zslots7.z80 line 2748: unrecognized instruction.          (CP)
2749   20016                         ret nc              ;i >= lines? return
zslots7.z80 line 2749: unrecognized instruction.          (RET)
2750   20016                         ld hl, (data_p+6)
zslots7.z80 line 2750: unrecognized instruction.          (LD)
2751   20016                         inc hl
zslots7.z80 line 2751: unrecognized instruction.          (INC)
2752   20016                         ld (data_p+6), hl
zslots7.z80 line 2752: unrecognized instruction.          (LD)
2753   20016             _noInci:    
2754   20016                         push bc
zslots7.z80 line 2754: unrecognized instruction.          (PUSH)
2755   20016                         ld b, d             ;end of this line, is beginning of next line
zslots7.z80 line 2755: unrecognized instruction.          (LD)
2756   20016                         ld c, e             ;__
zslots7.z80 line 2756: unrecognized instruction.          (LD)
2757   20016                         jr _incj
zslots7.z80 line 2757: unrecognized instruction.          (JR)
2758   20016             
2759   20016             _gLX:
2760   20016                         LD a, (HL)
zslots7.z80 line 2760: unrecognized instruction.          (LD)
2761   20016                         dec a               ;adj offset.  
zslots7.z80 line 2761: unrecognized instruction.          (DEC)
2762   20016                         LD HL, draw_at_X
zslots7.z80 line 2762: unrecognized instruction.          (LD)
2763   20016                         LD (P_), HL
zslots7.z80 line 2763: unrecognized instruction.          (LD)
2764   20016                         call jumpAfromP_
zslots7.z80 line 2764: unrecognized instruction.          (CALL)
2765   20016                         ld b, (IX)
zslots7.z80 line 2765: unrecognized instruction.          (LD)
2766   20016                         inc b
zslots7.z80 line 2766: unrecognized instruction.          (INC)
2767   20016                         inc b
zslots7.z80 line 2767: unrecognized instruction.          (INC)
2768   20016                         inc b
zslots7.z80 line 2768: unrecognized instruction.          (INC)
2769   20016                         inc b  
zslots7.z80 line 2769: unrecognized instruction.          (INC)
2770   20016             
2771   20016             ;getY  
2772   20016                         LD HL, (data_p+6)
zslots7.z80 line 2772: unrecognized instruction.          (LD)
2773   20016                         LD a, (HL)
zslots7.z80 line 2773: unrecognized instruction.          (LD)
2774   20016                         dec A               ;adj offset
zslots7.z80 line 2774: unrecognized instruction.          (DEC)
2775   20016                         LD HL, draw_at_Y
zslots7.z80 line 2775: unrecognized instruction.          (LD)
2776   20016                         LD (P_), HL
zslots7.z80 line 2776: unrecognized instruction.          (LD)
2777   20016                         call jumpAfromP_
zslots7.z80 line 2777: unrecognized instruction.          (CALL)
2778   20016                         ld c, (IX)
zslots7.z80 line 2778: unrecognized instruction.          (LD)
2779   20016                         inc c
zslots7.z80 line 2779: unrecognized instruction.          (INC)
2780   20016                         inc c
zslots7.z80 line 2780: unrecognized instruction.          (INC)
2781   20016                         inc c
zslots7.z80 line 2781: unrecognized instruction.          (INC)
2782   20016                         inc c
zslots7.z80 line 2782: unrecognized instruction.          (INC)
2783   20016                         push bc
zslots7.z80 line 2783: unrecognized instruction.          (PUSH)
2784   20016             
2785   20016                         ;from 4,17h -> 44h, 17h                
2786   20016                             ld l, b 
zslots7.z80 line 2786: unrecognized instruction.          (LD)
2787   20016                             ld h, 00h
zslots7.z80 line 2787: unrecognized instruction.          (LD)
2788   20016                             ld d, 01h           ;de = 256 = $0100
zslots7.z80 line 2788: unrecognized instruction.          (LD)
2789   20016                             ld e, 00h
zslots7.z80 line 2789: unrecognized instruction.          (LD)
2790   20016                             call mult           ;x * 256
zslots7.z80 line 2790: unrecognized instruction.          (CALL)
2791   20016                           
2792   20016                             pop bc              ;c = y
zslots7.z80 line 2792: unrecognized instruction.          (POP)
2793   20016                             ld a, 64
zslots7.z80 line 2793: unrecognized instruction.          (LD)
2794   20016                             sub c
zslots7.z80 line 2794: unrecognized instruction.          (SUB)
2795   20016                             ld c, a
zslots7.z80 line 2795: unrecognized instruction.          (LD)
2796   20016                             ld b,  00h
zslots7.z80 line 2796: unrecognized instruction.          (LD)
2797   20016                             add hl, bc          ;hl = (x*256)+y
zslots7.z80 line 2797: unrecognized instruction.          (ADD)
2798   20016                             ;hl is correct
2799   20016                             ld c, l
zslots7.z80 line 2799: unrecognized instruction.          (LD)
2800   20016                             ld b, h
zslots7.z80 line 2800: unrecognized instruction.          (LD)
2801   20016                             push bc             ;correct coord in bc
zslots7.z80 line 2801: unrecognized instruction.          (PUSH)
2802   20016             
2803   20016                         ret
zslots7.z80 line 2803: unrecognized instruction.          (RET)
2804   20016             ;----------------------------------QR Routines-----------------------------------------------
2805   20016             printQRCode:            
2806   20016                            call QR_prepareData              
zslots7.z80 line 2806: unrecognized instruction.          (CALL)
2807   20016                            call createQR29x29Mask7
zslots7.z80 line 2807: unrecognized instruction.          (CALL)
2808   20016                            call rs_encode
zslots7.z80 line 2808: unrecognized instruction.          (CALL)
2809   20016                            call qr_formatData
zslots7.z80 line 2809: unrecognized instruction.          (CALL)
2810   20016             
2811   20016                            ld a, 20
zslots7.z80 line 2811: unrecognized instruction.          (LD)
2812   20016                            ld (qr_x), a 
zslots7.z80 line 2812: unrecognized instruction.          (LD)
2813   20016                            ld (qr_y), a 
zslots7.z80 line 2813: unrecognized instruction.          (LD)
2814   20016                            ld ix, qr_copyzone
zslots7.z80 line 2814: unrecognized instruction.          (LD)
2815   20016                            ld h, 2
zslots7.z80 line 2815: unrecognized instruction.          (LD)
2816   20016                            call printQRaw
zslots7.z80 line 2816: unrecognized instruction.          (CALL)
2817   20016                            call printQRmask
zslots7.z80 line 2817: unrecognized instruction.          (CALL)
2818   20016                            call printQRQuietZones
zslots7.z80 line 2818: unrecognized instruction.          (CALL)
2819   20016                            call printBCH
zslots7.z80 line 2819: unrecognized instruction.          (CALL)
2820   20016                            call bgsloop
zslots7.z80 line 2820: unrecognized instruction.          (CALL)
2821   20016             bgsloop:
2822   20016                         ld A, %11111101
zslots7.z80 line 2822: unrecognized instruction.          (LD)
2823   20016                         out (1), A
zslots7.z80 line 2823: unrecognized instruction.          (OUT)
2824   20016                         in a, (1)
zslots7.z80 line 2824: unrecognized instruction.          (IN)
2825   20016                         and $20
zslots7.z80 line 2825: unrecognized instruction.          (AND)
2826   20016                         ret z
zslots7.z80 line 2826: unrecognized instruction.          (RET)
2827   20016                         jr bgsloop
zslots7.z80 line 2827: unrecognized instruction.          (JR)
2828   20016             ;                               ...43210   14...98   ;15 bits
2829   20016             ;qr_v3_BCHfinal:        .db     %01110110, %01101001
2830   20016             printBCH:
2831   20016                     ld hl, qr_v3_BCHfinal
zslots7.z80 line 2831: unrecognized instruction.          (LD)
2832   20016                     ld a, 20
zslots7.z80 line 2832: unrecognized instruction.          (LD)
2833   20016                     ld c, a 
zslots7.z80 line 2833: unrecognized instruction.          (LD)
2834   20016                     ld (qr_y), a 
zslots7.z80 line 2834: unrecognized instruction.          (LD)
2835   20016                     add a, 3
zslots7.z80 line 2835: unrecognized instruction.          (ADD)
2836   20016                     ld (qr_x), a 
zslots7.z80 line 2836: unrecognized instruction.          (LD)
2837   20016             
2838   20016             ;BCH 0-7 offset = x+28, y+8
2839   20016                     add a, 28
zslots7.z80 line 2839: unrecognized instruction.          (ADD)
2840   20016                     ld b, a 
zslots7.z80 line 2840: unrecognized instruction.          (LD)
2841   20016                     ld a, c  
zslots7.z80 line 2841: unrecognized instruction.          (LD)
2842   20016                     add a, 8+1
zslots7.z80 line 2842: unrecognized instruction.          (ADD)
2843   20016                     ld c, a 
zslots7.z80 line 2843: unrecognized instruction.          (LD)
2844   20016                     ld a, LCD_HEIGHT
zslots7.z80 line 2844: unrecognized instruction.          (LD)
2845   20016                     sub c 
zslots7.z80 line 2845: unrecognized instruction.          (SUB)
2846   20016                     ld c, a 
zslots7.z80 line 2846: unrecognized instruction.          (LD)
2847   20016                     ld d, $80   ;8; iterations
zslots7.z80 line 2847: unrecognized instruction.          (LD)
2848   20016                     call _drawBCH
zslots7.z80 line 2848: unrecognized instruction.          (CALL)
2849   20016             
2850   20016             ;BCH 0-5 offset = x+8, y+0+1  || y+1 *6
2851   20016                     ld a, (qr_y)
zslots7.z80 line 2851: unrecognized instruction.          (LD)
2852   20016                     ld c, a  
zslots7.z80 line 2852: unrecognized instruction.          (LD)
2853   20016                     ld a, LCD_HEIGHT-1
zslots7.z80 line 2853: unrecognized instruction.          (LD)
2854   20016                     sub c
zslots7.z80 line 2854: unrecognized instruction.          (SUB)
2855   20016                     ld c, a 
zslots7.z80 line 2855: unrecognized instruction.          (LD)
2856   20016                     ld a, (qr_x)
zslots7.z80 line 2856: unrecognized instruction.          (LD)
2857   20016                     add a, 8 
zslots7.z80 line 2857: unrecognized instruction.          (ADD)
2858   20016                     ld b, a 
zslots7.z80 line 2858: unrecognized instruction.          (LD)
2859   20016                     ld d, $20   ;6 iterations
zslots7.z80 line 2859: unrecognized instruction.          (LD)
2860   20016                     ld a, $0D
zslots7.z80 line 2860: unrecognized instruction.          (LD)
2861   20016                     ld (_bcdir), a 
zslots7.z80 line 2861: unrecognized instruction.          (LD)
2862   20016                     call _drawBCH
zslots7.z80 line 2862: unrecognized instruction.          (CALL)
2863   20016                     dec c
zslots7.z80 line 2863: unrecognized instruction.          (DEC)
2864   20016                     ;sla e 
2865   20016                     ;ld d, $40
2866   20016                     ;call _bchi
2867   20016                     ld d, 1 
zslots7.z80 line 2867: unrecognized instruction.          (LD)
2868   20016                     bcall(_ipoint)  
zslots7.z80 line 2868: unrecognized instruction.          (BCALL(_IPOINT))
2869   20016                     dec c
zslots7.z80 line 2869: unrecognized instruction.          (DEC)
2870   20016                     ld d, 0 
zslots7.z80 line 2870: unrecognized instruction.          (LD)
2871   20016                     bcall(_ipoint)
zslots7.z80 line 2871: unrecognized instruction.          (BCALL(_IPOINT))
2872   20016                     dec b 
zslots7.z80 line 2872: unrecognized instruction.          (DEC)
2873   20016                     ld d, 1 
zslots7.z80 line 2873: unrecognized instruction.          (LD)
2874   20016                     bcall(_ipoint)  
zslots7.z80 line 2874: unrecognized instruction.          (BCALL(_IPOINT))
2875   20016                     dec b 
zslots7.z80 line 2875: unrecognized instruction.          (DEC)
2876   20016                     dec b 
zslots7.z80 line 2876: unrecognized instruction.          (DEC)
2877   20016                     dec b 
zslots7.z80 line 2877: unrecognized instruction.          (DEC)
2878   20016                     ld a, $05
zslots7.z80 line 2878: unrecognized instruction.          (LD)
2879   20016                     ld (_bcdir), a 
zslots7.z80 line 2879: unrecognized instruction.          (LD)
2880   20016                     inc hl 
zslots7.z80 line 2880: unrecognized instruction.          (INC)
2881   20016                     ld d, $40   ;6 iterations   
zslots7.z80 line 2881: unrecognized instruction.          (LD)
2882   20016                     ld e, %00000100   
zslots7.z80 line 2882: unrecognized instruction.          (LD)
2883   20016                     call _bchi    
zslots7.z80 line 2883: unrecognized instruction.          (CALL)
2884   20016             ;BCH 8-14=(0-6) offset = x-8, y-14  || y-1 *7
2885   20016             
2886   20016                     ld a, c 
zslots7.z80 line 2886: unrecognized instruction.          (LD)
2887   20016                     sub 14
zslots7.z80 line 2887: unrecognized instruction.          (SUB)
2888   20016                     ld c, a 
zslots7.z80 line 2888: unrecognized instruction.          (LD)
2889   20016                     ld a, b 
zslots7.z80 line 2889: unrecognized instruction.          (LD)
2890   20016                     add a, 9
zslots7.z80 line 2890: unrecognized instruction.          (ADD)
2891   20016                     ld b, a 
zslots7.z80 line 2891: unrecognized instruction.          (LD)
2892   20016                     ld d, $40   ;7 iterations
zslots7.z80 line 2892: unrecognized instruction.          (LD)
2893   20016                     ld a, $0D
zslots7.z80 line 2893: unrecognized instruction.          (LD)
2894   20016                     ld (_bcdir), a 
zslots7.z80 line 2894: unrecognized instruction.          (LD)
2895   20016                     call _drawBCH   
zslots7.z80 line 2895: unrecognized instruction.          (CALL)
2896   20016                     dec b 
zslots7.z80 line 2896: unrecognized instruction.          (DEC)
2897   20016                     dec b 
zslots7.z80 line 2897: unrecognized instruction.          (DEC)
2898   20016                     ld a, c 
zslots7.z80 line 2898: unrecognized instruction.          (LD)
2899   20016                     add a, 9
zslots7.z80 line 2899: unrecognized instruction.          (ADD)
2900   20016                     ld c, a 
zslots7.z80 line 2900: unrecognized instruction.          (LD)
2901   20016                     ld e, 13
zslots7.z80 line 2901: unrecognized instruction.          (LD)
2902   20016                     ld d, 1 
zslots7.z80 line 2902: unrecognized instruction.          (LD)
2903   20016                     call drawDividers
zslots7.z80 line 2903: unrecognized instruction.          (CALL)
2904   20016                     inc c
zslots7.z80 line 2904: unrecognized instruction.          (INC)
2905   20016                     inc b
zslots7.z80 line 2905: unrecognized instruction.          (INC)
2906   20016                     inc b
zslots7.z80 line 2906: unrecognized instruction.          (INC)
2907   20016                     ld a, $04
zslots7.z80 line 2907: unrecognized instruction.          (LD)
2908   20016                     ld (_divd), a 
zslots7.z80 line 2908: unrecognized instruction.          (LD)
2909   20016                     call drawDividers
zslots7.z80 line 2909: unrecognized instruction.          (CALL)
2910   20016                     ret      
zslots7.z80 line 2910: unrecognized instruction.          (RET)
2911   20016             ;13 bits, 1010101....1
2912   20016             drawDividers:
2913   20016                     ld e, 13
zslots7.z80 line 2913: unrecognized instruction.          (LD)
2914   20016                     ld d, 1 
zslots7.z80 line 2914: unrecognized instruction.          (LD)
2915   20016             _divi:
2916   20016                     bcall(_ipoint)
zslots7.z80 line 2916: unrecognized instruction.          (BCALL(_IPOINT))
2917   20016             _divd:  inc c
zslots7.z80 line 2917: Label not found: (_divd)
zslots7.z80 line 2917: label value misalligned.           (_divd)
zslots7.z80 line 2917: unrecognized instruction.          (_divd)
2918   20016                     dec e
zslots7.z80 line 2918: unrecognized instruction.          (DEC)
2919   20016                     ret z 
zslots7.z80 line 2919: unrecognized instruction.          (RET)
2920   20016                     ld a, d 
zslots7.z80 line 2920: unrecognized instruction.          (LD)
2921   20016                     xor 1
zslots7.z80 line 2921: unrecognized instruction.          (XOR)
2922   20016                     ld d, a 
zslots7.z80 line 2922: unrecognized instruction.          (LD)
2923   20016                     jp _divi
zslots7.z80 line 2923: unrecognized instruction.          (JP)
2924   20016                     
2925   20016                     ret
zslots7.z80 line 2925: unrecognized instruction.          (RET)
2926   20016             
2927   20016             _drawBCH:
2928   20016             
2929   20016                     ld e, %00000001
zslots7.z80 line 2929: unrecognized instruction.          (LD)
2930   20016                 
2931   20016             _bchi:
2932   20016                     push de 
zslots7.z80 line 2932: unrecognized instruction.          (PUSH)
2933   20016                     ld a, (hl)
zslots7.z80 line 2933: unrecognized instruction.          (LD)
2934   20016                     and e 
zslots7.z80 line 2934: unrecognized instruction.          (AND)
2935   20016                     jp z, _bchzb
zslots7.z80 line 2935: unrecognized instruction.          (JP)
2936   20016                     ld d, 1 
zslots7.z80 line 2936: unrecognized instruction.          (LD)
2937   20016                     bcall(_ipoint)
zslots7.z80 line 2937: unrecognized instruction.          (BCALL(_IPOINT))
2938   20016                     jp _bchcont
zslots7.z80 line 2938: unrecognized instruction.          (JP)
2939   20016             _bchzb:
2940   20016                     ld d, 0
zslots7.z80 line 2940: unrecognized instruction.          (LD)
2941   20016                     bcall(_ipoint)
zslots7.z80 line 2941: unrecognized instruction.          (BCALL(_IPOINT))
2942   20016             _bchcont:
2943   20016             
2944   20016             _bcdir: dec b
zslots7.z80 line 2944: Label not found: (_bcdir)
zslots7.z80 line 2944: label value misalligned.           (_bcdir)
zslots7.z80 line 2944: unrecognized instruction.          (_bcdir)
2945   20016                     ld a, e 
zslots7.z80 line 2945: unrecognized instruction.          (LD)
2946   20016                     pop de 
zslots7.z80 line 2946: unrecognized instruction.          (POP)
2947   20016                     ld e, a 
zslots7.z80 line 2947: unrecognized instruction.          (LD)
2948   20016                     cp d
zslots7.z80 line 2948: unrecognized instruction.          (CP)
2949   20016                     ret z 
zslots7.z80 line 2949: unrecognized instruction.          (RET)
2950   20016                     sla e
zslots7.z80 line 2950: unrecognized instruction.          (SLA)
2951   20016             
2952   20016                     jp _bchi
zslots7.z80 line 2952: unrecognized instruction.          (JP)
2953   20016                     ret 
zslots7.z80 line 2953: unrecognized instruction.          (RET)
2954   20016             
2955   20016             ;ipoint b=x, c=y, d=f(off,on,xor,test,cpybuff2disp)
2956   20016             printQRaw:
2957   20016             ;Input:	ix->sprite
2958   20016             ;	a=x
2959   20016             ;	l=y
2960   20016             ;	b=height	(in pixels)
2961   20016             ;	c=width		(in bytes, e.g. 2 would be 16)
2962   20016              ;  h=off/on/xor
2963   20016               ;   (1=off/2=on/else=xor)
2964   20016                            ld a, (qr_y)
zslots7.z80 line 2964: unrecognized instruction.          (LD)
2965   20016                            ld l, a 
zslots7.z80 line 2965: unrecognized instruction.          (LD)
2966   20016                            ld a, (qr_x)
zslots7.z80 line 2966: unrecognized instruction.          (LD)
2967   20016                            ld b, 29
zslots7.z80 line 2967: unrecognized instruction.          (LD)
2968   20016                            ld c, 4
zslots7.z80 line 2968: unrecognized instruction.          (LD)
2969   20016                            call put_any_Sprite
zslots7.z80 line 2969: unrecognized instruction.          (CALL)
2970   20016                            call ionFastCopy
zslots7.z80 line 2970: unrecognized instruction.          (CALL)
2971   20016                            ret 
zslots7.z80 line 2971: unrecognized instruction.          (RET)
2972   20016             
2973   20016             printQRmask: 
2974   20016                            ld a, (qr_y)
zslots7.z80 line 2974: unrecognized instruction.          (LD)
2975   20016                            ld l, a 
zslots7.z80 line 2975: unrecognized instruction.          (LD)
2976   20016                            ld a, (qr_x)
zslots7.z80 line 2976: unrecognized instruction.          (LD)
2977   20016                            add a, 3 
zslots7.z80 line 2977: unrecognized instruction.          (ADD)
2978   20016                            ld (qr_x), a 
zslots7.z80 line 2978: unrecognized instruction.          (LD)
2979   20016                            ld b, 29
zslots7.z80 line 2979: unrecognized instruction.          (LD)
2980   20016                            ld c, 4
zslots7.z80 line 2980: unrecognized instruction.          (LD)
2981   20016                            ld h, 3
zslots7.z80 line 2981: unrecognized instruction.          (LD)
2982   20016                            ld ix, QR_29x29_mask7
zslots7.z80 line 2982: unrecognized instruction.          (LD)
2983   20016                            call put_any_Sprite
zslots7.z80 line 2983: unrecognized instruction.          (CALL)
2984   20016                            call ionFastCopy
zslots7.z80 line 2984: unrecognized instruction.          (CALL)
2985   20016                            ret  
zslots7.z80 line 2985: unrecognized instruction.          (RET)
2986   20016             ;inputs:
2987   20016                          
2988   20016             printQRQuietZones: 
2989   20016             ;l=square dimension   
2990   20016             ;b=x1,c=y1
2991   20016             ;d=x2,e=y2
2992   20016             ;h= 0off/1on/2xor
2993   20016             
2994   20016             ;outer parimeters
2995   20016                            ld a, (qr_y)
zslots7.z80 line 2995: unrecognized instruction.          (LD)
2996   20016                            inc a
zslots7.z80 line 2996: unrecognized instruction.          (INC)
2997   20016                            ld (qr_y), a 
zslots7.z80 line 2997: unrecognized instruction.          (LD)
2998   20016             
2999   20016                            ld a, (qr_x)
zslots7.z80 line 2999: unrecognized instruction.          (LD)
3000   20016                            ld h, a 
zslots7.z80 line 3000: unrecognized instruction.          (LD)
3001   20016                            sub 7
zslots7.z80 line 3001: unrecognized instruction.          (SUB)
3002   20016                            ld (qr_x), a 
zslots7.z80 line 3002: unrecognized instruction.          (LD)
3003   20016                            ld b, a 
zslots7.z80 line 3003: unrecognized instruction.          (LD)
3004   20016                            ld a, (qr_y)
zslots7.z80 line 3004: unrecognized instruction.          (LD)
3005   20016                            ld l, a 
zslots7.z80 line 3005: unrecognized instruction.          (LD)
3006   20016                            sub 7 
zslots7.z80 line 3006: unrecognized instruction.          (SUB)
3007   20016                            ld (qr_y), a 
zslots7.z80 line 3007: unrecognized instruction.          (LD)
3008   20016                            push hl 
zslots7.z80 line 3008: unrecognized instruction.          (PUSH)
3009   20016                            ld b, 7
zslots7.z80 line 3009: unrecognized instruction.          (LD)
3010   20016                            ld l, 42
zslots7.z80 line 3010: unrecognized instruction.          (LD)
3011   20016             _outerq:               
3012   20016                            push bc 
zslots7.z80 line 3012: unrecognized instruction.          (PUSH)
3013   20016                            push hl 
zslots7.z80 line 3013: unrecognized instruction.          (PUSH)
3014   20016                            ld H, 00h
zslots7.z80 line 3014: unrecognized instruction.          (LD)
3015   20016                            call drawBox
zslots7.z80 line 3015: unrecognized instruction.          (CALL)
3016   20016                            pop hl 
zslots7.z80 line 3016: unrecognized instruction.          (POP)
3017   20016                            dec l
zslots7.z80 line 3017: unrecognized instruction.          (DEC)
3018   20016                            dec l 
zslots7.z80 line 3018: unrecognized instruction.          (DEC)
3019   20016                            ld a, (qr_x)
zslots7.z80 line 3019: unrecognized instruction.          (LD)
3020   20016                            inc a
zslots7.z80 line 3020: unrecognized instruction.          (INC)
3021   20016                            ld (qr_x), a
zslots7.z80 line 3021: unrecognized instruction.          (LD)
3022   20016                            ld a, (qr_y)
zslots7.z80 line 3022: unrecognized instruction.          (LD)
3023   20016                            inc a 
zslots7.z80 line 3023: unrecognized instruction.          (INC)
3024   20016                            ld (qr_y), a 
zslots7.z80 line 3024: unrecognized instruction.          (LD)
3025   20016                            pop bc 
zslots7.z80 line 3025: unrecognized instruction.          (POP)
3026   20016                            djnz _outerq
zslots7.z80 line 3026: unrecognized instruction.          (DJNZ)
3027   20016                         
3028   20016                            pop hl           ;refresh original x,y vals
zslots7.z80 line 3028: unrecognized instruction.          (POP)
3029   20016                            ld a, h 
zslots7.z80 line 3029: unrecognized instruction.          (LD)
3030   20016                            ld (qr_x), a 
zslots7.z80 line 3030: unrecognized instruction.          (LD)
3031   20016                            ld a, l 
zslots7.z80 line 3031: unrecognized instruction.          (LD)
3032   20016                            ld (qr_y), a 
zslots7.z80 line 3032: unrecognized instruction.          (LD)
3033   20016             
3034   20016             ;orientor boxes
3035   20016                            ld a, (qr_y)
zslots7.z80 line 3035: unrecognized instruction.          (LD)
3036   20016                            dec a 
zslots7.z80 line 3036: unrecognized instruction.          (DEC)
3037   20016                            ld (qr_y), a 
zslots7.z80 line 3037: unrecognized instruction.          (LD)
3038   20016                            ld l, a 
zslots7.z80 line 3038: unrecognized instruction.          (LD)
3039   20016                            ld a, (qr_x)
zslots7.z80 line 3039: unrecognized instruction.          (LD)
3040   20016                            dec a 
zslots7.z80 line 3040: unrecognized instruction.          (DEC)
3041   20016                            ld (qr_x), a 
zslots7.z80 line 3041: unrecognized instruction.          (LD)
3042   20016                            ld h, a
zslots7.z80 line 3042: unrecognized instruction.          (LD)
3043   20016                            push hl 
zslots7.z80 line 3043: unrecognized instruction.          (PUSH)
3044   20016                            push hl 
zslots7.z80 line 3044: unrecognized instruction.          (PUSH)
3045   20016                            LD H, 00h                       ;line off
zslots7.z80 line 3045: unrecognized instruction.          (LD)
3046   20016                            ld l, 8 
zslots7.z80 line 3046: unrecognized instruction.          (LD)
3047   20016                            ld b, 3
zslots7.z80 line 3047: unrecognized instruction.          (LD)
3048   20016                            call draw_b_boxes
zslots7.z80 line 3048: unrecognized instruction.          (CALL)
3049   20016                            pop hl
zslots7.z80 line 3049: unrecognized instruction.          (POP)
3050   20016                            inc h  
zslots7.z80 line 3050: unrecognized instruction.          (INC)
3051   20016                            inc l  
zslots7.z80 line 3051: unrecognized instruction.          (INC)
3052   20016                            push hl 
zslots7.z80 line 3052: unrecognized instruction.          (PUSH)
3053   20016                            ld a, l
zslots7.z80 line 3053: unrecognized instruction.          (LD)
3054   20016                            ld (qr_y), a 
zslots7.z80 line 3054: unrecognized instruction.          (LD)
3055   20016                            ld a, h
zslots7.z80 line 3055: unrecognized instruction.          (LD)
3056   20016                            ld (qr_x), a
zslots7.z80 line 3056: unrecognized instruction.          (LD)
3057   20016                            ld b, 4 
zslots7.z80 line 3057: unrecognized instruction.          (LD)
3058   20016                            ld H, 01h
zslots7.z80 line 3058: unrecognized instruction.          (LD)
3059   20016                            ld l, 6
zslots7.z80 line 3059: unrecognized instruction.          (LD)
3060   20016                            call draw_b_boxes
zslots7.z80 line 3060: unrecognized instruction.          (CALL)
3061   20016                            pop hl
zslots7.z80 line 3061: unrecognized instruction.          (POP)
3062   20016                            inc h  
zslots7.z80 line 3062: unrecognized instruction.          (INC)
3063   20016                            inc l  
zslots7.z80 line 3063: unrecognized instruction.          (INC)
3064   20016                            push hl 
zslots7.z80 line 3064: unrecognized instruction.          (PUSH)
3065   20016                            ld a, l
zslots7.z80 line 3065: unrecognized instruction.          (LD)
3066   20016                            ld (qr_y), a 
zslots7.z80 line 3066: unrecognized instruction.          (LD)
3067   20016                            ld a, h
zslots7.z80 line 3067: unrecognized instruction.          (LD)
3068   20016                            ld (qr_x), a
zslots7.z80 line 3068: unrecognized instruction.          (LD)
3069   20016                            ld H, 00h
zslots7.z80 line 3069: unrecognized instruction.          (LD)
3070   20016                            ld l, 4 
zslots7.z80 line 3070: unrecognized instruction.          (LD)
3071   20016                            ld b, 4 
zslots7.z80 line 3071: unrecognized instruction.          (LD)
3072   20016                            call draw_b_boxes       
zslots7.z80 line 3072: unrecognized instruction.          (CALL)
3073   20016                            pop hl
zslots7.z80 line 3073: unrecognized instruction.          (POP)
3074   20016                            inc h
zslots7.z80 line 3074: unrecognized instruction.          (INC)
3075   20016                            inc l
zslots7.z80 line 3075: unrecognized instruction.          (INC)
3076   20016                            push hl  
zslots7.z80 line 3076: unrecognized instruction.          (PUSH)
3077   20016                            ld a, l
zslots7.z80 line 3077: unrecognized instruction.          (LD)
3078   20016                            ld (qr_y), a
zslots7.z80 line 3078: unrecognized instruction.          (LD)
3079   20016                            ld a, h
zslots7.z80 line 3079: unrecognized instruction.          (LD)
3080   20016                            ld (qr_x), a
zslots7.z80 line 3080: unrecognized instruction.          (LD)
3081   20016                            ld H, 01h
zslots7.z80 line 3081: unrecognized instruction.          (LD)
3082   20016                            ld l, 2
zslots7.z80 line 3082: unrecognized instruction.          (LD)
3083   20016                            ld b, 4 
zslots7.z80 line 3083: unrecognized instruction.          (LD)
3084   20016                            call draw_b_boxes
zslots7.z80 line 3084: unrecognized instruction.          (CALL)
3085   20016                            pop hl
zslots7.z80 line 3085: unrecognized instruction.          (POP)
3086   20016                            pop hl 
zslots7.z80 line 3086: unrecognized instruction.          (POP)
3087   20016             ;ipoint b=x, c=y, d=f(off,on,xor,test,cpybuff2disp)
3088   20016                            ld a, h 
zslots7.z80 line 3088: unrecognized instruction.          (LD)
3089   20016                            ld (qr_x), a 
zslots7.z80 line 3089: unrecognized instruction.          (LD)
3090   20016                            inc a 
zslots7.z80 line 3090: unrecognized instruction.          (INC)
3091   20016                            ld b, h 
zslots7.z80 line 3091: unrecognized instruction.          (LD)
3092   20016                            inc b 
zslots7.z80 line 3092: unrecognized instruction.          (INC)
3093   20016                            ld a, l              
zslots7.z80 line 3093: unrecognized instruction.          (LD)
3094   20016                            ld (qr_y), a
zslots7.z80 line 3094: unrecognized instruction.          (LD)
3095   20016                            inc a  
zslots7.z80 line 3095: unrecognized instruction.          (INC)
3096   20016                            ld c, a 
zslots7.z80 line 3096: unrecognized instruction.          (LD)
3097   20016                            ld a, LCD_HEIGHT
zslots7.z80 line 3097: unrecognized instruction.          (LD)
3098   20016                            sub c 
zslots7.z80 line 3098: unrecognized instruction.          (SUB)
3099   20016                            ld c, a 
zslots7.z80 line 3099: unrecognized instruction.          (LD)
3100   20016                            ld a, 3 
zslots7.z80 line 3100: unrecognized instruction.          (LD)
3101   20016                            add a, b 
zslots7.z80 line 3101: unrecognized instruction.          (ADD)
3102   20016                            ld b, a 
zslots7.z80 line 3102: unrecognized instruction.          (LD)
3103   20016                            ld a, c 
zslots7.z80 line 3103: unrecognized instruction.          (LD)
3104   20016                            sub 3 
zslots7.z80 line 3104: unrecognized instruction.          (SUB)
3105   20016                            ld c, a 
zslots7.z80 line 3105: unrecognized instruction.          (LD)
3106   20016                            ld d, 1 ;pton
zslots7.z80 line 3106: unrecognized instruction.          (LD)
3107   20016                            bcall(_ipoint)
zslots7.z80 line 3107: unrecognized instruction.          (BCALL(_IPOINT))
3108   20016                            push bc 
zslots7.z80 line 3108: unrecognized instruction.          (PUSH)
3109   20016                            ld a, b
zslots7.z80 line 3109: unrecognized instruction.          (LD)
3110   20016                            add a, 22
zslots7.z80 line 3110: unrecognized instruction.          (ADD)
3111   20016                            ld b, a 
zslots7.z80 line 3111: unrecognized instruction.          (LD)
3112   20016                            bcall(_ipoint)
zslots7.z80 line 3112: unrecognized instruction.          (BCALL(_IPOINT))
3113   20016                            pop bc 
zslots7.z80 line 3113: unrecognized instruction.          (POP)
3114   20016                            ld a, c
zslots7.z80 line 3114: unrecognized instruction.          (LD)
3115   20016                            sub 22
zslots7.z80 line 3115: unrecognized instruction.          (SUB)
3116   20016                            ld c, a 
zslots7.z80 line 3116: unrecognized instruction.          (LD)
3117   20016                            bcall(_ipoint)     
zslots7.z80 line 3117: unrecognized instruction.          (BCALL(_IPOINT))
3118   20016                            ret
zslots7.z80 line 3118: unrecognized instruction.          (RET)
3119   20016             ;draw's b boxes, of size L 
3120   20016             draw_B_boxes:           
3121   20016             
3122   20016             _dbbi:         
3123   20016                            push bc
zslots7.z80 line 3123: unrecognized instruction.          (PUSH)
3124   20016             
3125   20016                            call drawBox ;upper left
zslots7.z80 line 3125: unrecognized instruction.          (CALL)
3126   20016                            pop bc 
zslots7.z80 line 3126: unrecognized instruction.          (POP)
3127   20016                            dec b 
zslots7.z80 line 3127: unrecognized instruction.          (DEC)
3128   20016                            ret z 
zslots7.z80 line 3128: unrecognized instruction.          (RET)
3129   20016                            push bc 
zslots7.z80 line 3129: unrecognized instruction.          (PUSH)
3130   20016                            ld a, (qr_x)
zslots7.z80 line 3130: unrecognized instruction.          (LD)
3131   20016                            add a, 22
zslots7.z80 line 3131: unrecognized instruction.          (ADD)
3132   20016                            ld (qr_x), a 
zslots7.z80 line 3132: unrecognized instruction.          (LD)
3133   20016                            call drawBox ;upper right
zslots7.z80 line 3133: unrecognized instruction.          (CALL)
3134   20016                            pop bc 
zslots7.z80 line 3134: unrecognized instruction.          (POP)
3135   20016                            dec b 
zslots7.z80 line 3135: unrecognized instruction.          (DEC)
3136   20016                            ret z 
zslots7.z80 line 3136: unrecognized instruction.          (RET)
3137   20016                            push bc 
zslots7.z80 line 3137: unrecognized instruction.          (PUSH)
3138   20016                            ld a, (qr_x)
zslots7.z80 line 3138: unrecognized instruction.          (LD)
3139   20016                            sub 22
zslots7.z80 line 3139: unrecognized instruction.          (SUB)
3140   20016                            ld (qr_x), a     
zslots7.z80 line 3140: unrecognized instruction.          (LD)
3141   20016                            ld a, (qr_y)
zslots7.z80 line 3141: unrecognized instruction.          (LD)
3142   20016                            add a, 22
zslots7.z80 line 3142: unrecognized instruction.          (ADD)
3143   20016                            ld (qr_y), a              
zslots7.z80 line 3143: unrecognized instruction.          (LD)
3144   20016             
3145   20016                            call drawBox ;lower left 
zslots7.z80 line 3145: unrecognized instruction.          (CALL)
3146   20016                            pop bc 
zslots7.z80 line 3146: unrecognized instruction.          (POP)
3147   20016                            dec b 
zslots7.z80 line 3147: unrecognized instruction.          (DEC)
3148   20016                            ret z 
zslots7.z80 line 3148: unrecognized instruction.          (RET)
3149   20016                            push bc 
zslots7.z80 line 3149: unrecognized instruction.          (PUSH)
3150   20016                            dec l       
zslots7.z80 line 3150: unrecognized instruction.          (DEC)
3151   20016                            dec l
zslots7.z80 line 3151: unrecognized instruction.          (DEC)
3152   20016                            ld a, (qr_x)
zslots7.z80 line 3152: unrecognized instruction.          (LD)
3153   20016                            add a, 20
zslots7.z80 line 3153: unrecognized instruction.          (ADD)
3154   20016                            ld (qr_x), a     
zslots7.z80 line 3154: unrecognized instruction.          (LD)
3155   20016                            ld a, (qr_y)
zslots7.z80 line 3155: unrecognized instruction.          (LD)
3156   20016                            sub 2 
zslots7.z80 line 3156: unrecognized instruction.          (SUB)
3157   20016                            ld (qr_y), a 
zslots7.z80 line 3157: unrecognized instruction.          (LD)
3158   20016                            call drawBox ;lower right mini 
zslots7.z80 line 3158: unrecognized instruction.          (CALL)
3159   20016                            pop bc 
zslots7.z80 line 3159: unrecognized instruction.          (POP)
3160   20016                            ret
zslots7.z80 line 3160: unrecognized instruction.          (RET)
3161   20016             ;l=square dimension   
3162   20016             ;b=x1,c=y1
3163   20016             ;d=x2,e=y2
3164   20016             ;h= 0off/1on/2xor
3165   20016             drawBox:                                              
3166   20016                            ld a, (qr_x)
zslots7.z80 line 3166: unrecognized instruction.          (LD)
3167   20016                            ld b, a 
zslots7.z80 line 3167: unrecognized instruction.          (LD)
3168   20016                            add a, l
zslots7.z80 line 3168: unrecognized instruction.          (ADD)
3169   20016                            ld d, a 
zslots7.z80 line 3169: unrecognized instruction.          (LD)
3170   20016                            ld a, (qr_y)
zslots7.z80 line 3170: unrecognized instruction.          (LD)
3171   20016                            ld c, a 
zslots7.z80 line 3171: unrecognized instruction.          (LD)
3172   20016                            ld a, LCD_HEIGHT
zslots7.z80 line 3172: unrecognized instruction.          (LD)
3173   20016                            sub c 
zslots7.z80 line 3173: unrecognized instruction.          (SUB)
3174   20016                            ld c, a 
zslots7.z80 line 3174: unrecognized instruction.          (LD)
3175   20016                            ld e, a 
zslots7.z80 line 3175: unrecognized instruction.          (LD)
3176   20016                            bcall(_iline)
zslots7.z80 line 3176: unrecognized instruction.          (BCALL(_ILINE))
3177   20016                            sub l
zslots7.z80 line 3177: unrecognized instruction.          (SUB)
3178   20016                            ld e, a 
zslots7.z80 line 3178: unrecognized instruction.          (LD)
3179   20016                            ld d, b 
zslots7.z80 line 3179: unrecognized instruction.          (LD)
3180   20016                            bcall(_iline)
zslots7.z80 line 3180: unrecognized instruction.          (BCALL(_ILINE))
3181   20016                            ld c, e 
zslots7.z80 line 3181: unrecognized instruction.          (LD)
3182   20016                            ld b, d 
zslots7.z80 line 3182: unrecognized instruction.          (LD)
3183   20016                            ld a, d 
zslots7.z80 line 3183: unrecognized instruction.          (LD)
3184   20016                            add a, l
zslots7.z80 line 3184: unrecognized instruction.          (ADD)
3185   20016                            ld d, a 
zslots7.z80 line 3185: unrecognized instruction.          (LD)
3186   20016                            bcall(_iline)
zslots7.z80 line 3186: unrecognized instruction.          (BCALL(_ILINE))
3187   20016                            ld b, d 
zslots7.z80 line 3187: unrecognized instruction.          (LD)
3188   20016                            ld a, e 
zslots7.z80 line 3188: unrecognized instruction.          (LD)
3189   20016                            add a, l
zslots7.z80 line 3189: unrecognized instruction.          (ADD)
3190   20016                            ld e, a 
zslots7.z80 line 3190: unrecognized instruction.          (LD)
3191   20016                            bcall(_iline)  
zslots7.z80 line 3191: unrecognized instruction.          (BCALL(_ILINE))
3192   20016                            ret 
zslots7.z80 line 3192: unrecognized instruction.          (RET)
3193   20016                       
3194   20016             QR_prepareData:
3195   20016                 call getDataSTRLen
zslots7.z80 line 3195: unrecognized instruction.          (CALL)
3196   20016             
3197   20016                 ld a, b 
zslots7.z80 line 3197: unrecognized instruction.          (LD)
3198   20016                 ld (qr_data_len), a 
zslots7.z80 line 3198: unrecognized instruction.          (LD)
3199   20016                 ld (qr_data_len_backup), a 
zslots7.z80 line 3199: unrecognized instruction.          (LD)
3200   20016             ;need to shift all data left 4 bits,  until 1st 4 bits of type 
3201   20016             ;type      len      | data(x55)...
3202   20016             ;0100 0000 0001 0100| ---------
3203   20016             ;       A <- B  <- C      
3204   20016                 xor a 
zslots7.z80 line 3204: unrecognized instruction.          (XOR)
3205   20016                 inc b 
zslots7.z80 line 3205: unrecognized instruction.          (INC)
3206   20016                 inc b 
zslots7.z80 line 3206: unrecognized instruction.          (INC)
3207   20016                 inc b 
zslots7.z80 line 3207: unrecognized instruction.          (INC)
3208   20016                 ld hl, qr_data_transID
zslots7.z80 line 3208: unrecognized instruction.          (LD)
3209   20016             _l4shift:
3210   20016                 rld 
zslots7.z80 line 3210: unrecognized instruction.          (RLD)
3211   20016                 dec hl 
zslots7.z80 line 3211: unrecognized instruction.          (DEC)
3212   20016                 djnz _l4shift
zslots7.z80 line 3212: unrecognized instruction.          (DJNZ)
3213   20016             ;pad out remainder of D-Space
3214   20016             _pad:
3215   20016             
3216   20016                 ld a, (qr_data_len_backup)
zslots7.z80 line 3216: unrecognized instruction.          (LD)
3217   20016                 ld e, a
zslots7.z80 line 3217: unrecognized instruction.          (LD)
3218   20016                 ld a, QR_V3L_DWORDS-1
zslots7.z80 line 3218: unrecognized instruction.          (LD)
3219   20016                 sub e
zslots7.z80 line 3219: unrecognized instruction.          (SUB)
3220   20016             
3221   20016             ;add url code logic here(qr_str(len)+qr_urlcodeLen)
3222   20016                 ld hl, qr_data
zslots7.z80 line 3222: unrecognized instruction.          (LD)
3223   20016                 inc e
zslots7.z80 line 3223: unrecognized instruction.          (INC)
3224   20016                 inc e 
zslots7.z80 line 3224: unrecognized instruction.          (INC)
3225   20016                 ld c, e 
zslots7.z80 line 3225: unrecognized instruction.          (LD)
3226   20016                 ld b, 0  
zslots7.z80 line 3226: unrecognized instruction.          (LD)
3227   20016                 add hl, bc 
zslots7.z80 line 3227: unrecognized instruction.          (ADD)
3228   20016                 ld b, a
zslots7.z80 line 3228: unrecognized instruction.          (LD)
3229   20016                 ld a, $EC
zslots7.z80 line 3229: unrecognized instruction.          (LD)
3230   20016             _padlp:
3231   20016                 ld (hl), a
zslots7.z80 line 3231: unrecognized instruction.          (LD)
3232   20016                 xor $FD
zslots7.z80 line 3232: unrecognized instruction.          (XOR)
3233   20016                 inc hl 
zslots7.z80 line 3233: unrecognized instruction.          (INC)
3234   20016                 djnz _padlp
zslots7.z80 line 3234: unrecognized instruction.          (DJNZ)
3235   20016             
3236   20016                 ld hl, qr_data
zslots7.z80 line 3236: unrecognized instruction.          (LD)
3237   20016                 ld de, qr_DSpace_Message
zslots7.z80 line 3237: unrecognized instruction.          (LD)
3238   20016                 ld bc, QR_V3L_DWORDS
zslots7.z80 line 3238: unrecognized instruction.          (LD)
3239   20016                 ldir
zslots7.z80 line 3239: unrecognized instruction.          (LDIR)
3240   20016                 ret
zslots7.z80 line 3240: unrecognized instruction.          (RET)
3241   20016             
3242   20016             ;returns the NABK count of the data string in b register
3243   20016             getDataSTRLen:
3244   20016                 ld hl, qr_data_string
zslots7.z80 line 3244: unrecognized instruction.          (LD)
3245   20016                 ld b, 0 
zslots7.z80 line 3245: unrecognized instruction.          (LD)
3246   20016                 ld a, 0
zslots7.z80 line 3246: unrecognized instruction.          (LD)
3247   20016             gtstrLP:
3248   20016                 cp (hl)
zslots7.z80 line 3248: unrecognized instruction.          (CP)
3249   20016                 ret z
zslots7.z80 line 3249: unrecognized instruction.          (RET)
3250   20016                 inc b
zslots7.z80 line 3250: unrecognized instruction.          (INC)
3251   20016                 inc hl
zslots7.z80 line 3251: unrecognized instruction.          (INC)
3252   20016                 jp gtstrLP
zslots7.z80 line 3252: unrecognized instruction.          (JP)
3253   20016             
3254   20016             
3255   20016             
3256   20016             ;formats & copies data to copyzone   
3257   20016             qr_formatData:
3258   20016             
3259   20016             ;then pad remaining
3260   20016                 ld hl, qr_copyzone+QR_29X29_BYTES-1
zslots7.z80 line 3260: unrecognized instruction.          (LD)
3261   20016                 ld ix, qr_DSpace_Message
zslots7.z80 line 3261: unrecognized instruction.          (LD)
3262   20016                 ld d, %10000000 ;data bit
zslots7.z80 line 3262: unrecognized instruction.          (LD)
3263   20016                 ld e, %00000001 ;copy-to bit 
zslots7.z80 line 3263: unrecognized instruction.          (LD)
3264   20016                 ld b, QR_ROOF
zslots7.z80 line 3264: unrecognized instruction.          (LD)
3265   20016                 ld a, QR_V3L_DWORDS+QR_V3L_EWORDS
zslots7.z80 line 3265: unrecognized instruction.          (LD)
3266   20016                 ld (qr_wc), a 
zslots7.z80 line 3266: unrecognized instruction.          (LD)
3267   20016             
3268   20016             _fmtDLPi:
3269   20016                
3270   20016             fmtdsub:
3271   20016             
3272   20016             _fmtDLPk:
3273   20016                  push bc 
zslots7.z80 line 3273: unrecognized instruction.          (PUSH)
3274   20016                   ld b, 2 
zslots7.z80 line 3274: unrecognized instruction.          (LD)
3275   20016             
3276   20016             _fmtDLPj:
3277   20016                   ld a, (hl)
zslots7.z80 line 3277: unrecognized instruction.          (LD)
3278   20016                   and e     ;check copy-to position for barrier
zslots7.z80 line 3278: unrecognized instruction.          (AND)
3279   20016                   jp nz, _Br
zslots7.z80 line 3279: unrecognized instruction.          (JP)
3280   20016                   
3281   20016                   ld a, (ix)
zslots7.z80 line 3281: unrecognized instruction.          (LD)
3282   20016                   and d 
zslots7.z80 line 3282: unrecognized instruction.          (AND)
3283   20016                   jr z, _fmdz
zslots7.z80 line 3283: unrecognized instruction.          (JR)
3284   20016                   ld a, (hl)
zslots7.z80 line 3284: unrecognized instruction.          (LD)
3285   20016                   or e 
zslots7.z80 line 3285: unrecognized instruction.          (OR)
3286   20016                   ld (hl), a 
zslots7.z80 line 3286: unrecognized instruction.          (LD)
3287   20016             _fmdz:
3288   20016                   ld a, e
zslots7.z80 line 3288: unrecognized instruction.          (LD)
3289   20016                   srl d 
zslots7.z80 line 3289: unrecognized instruction.          (SRL)
3290   20016                   jp nz, _Br
zslots7.z80 line 3290: unrecognized instruction.          (JP)
3291   20016                   ld d, %10000000
zslots7.z80 line 3291: unrecognized instruction.          (LD)
3292   20016                   inc ix 
zslots7.z80 line 3292: unrecognized instruction.          (INC)
3293   20016                   ld a, (qr_wc)
zslots7.z80 line 3293: unrecognized instruction.          (LD)
3294   20016                   dec a 
zslots7.z80 line 3294: unrecognized instruction.          (DEC)
3295   20016                   ld (qr_wc), a 
zslots7.z80 line 3295: unrecognized instruction.          (LD)
3296   20016                   jp nz, _Br
zslots7.z80 line 3296: unrecognized instruction.          (JP)
3297   20016                   pop bc 
zslots7.z80 line 3297: unrecognized instruction.          (POP)
3298   20016                   jp _qr_endofdatastring 
zslots7.z80 line 3298: unrecognized instruction.          (JP)
3299   20016             _Br:  ld a, e 
zslots7.z80 line 3299: Label not found: (_Br)
zslots7.z80 line 3299: label value misalligned.           (_Br)
zslots7.z80 line 3299: unrecognized instruction.          (_Br)
3300   20016             _flp: xor %11 
zslots7.z80 line 3300: Label not found: (_flp)
zslots7.z80 line 3300: label value misalligned.           (_flp)
zslots7.z80 line 3300: unrecognized instruction.          (_flp)
3301   20016                   ld e, a 
zslots7.z80 line 3301: unrecognized instruction.          (LD)
3302   20016             _nrd:
3303   20016                   djnz _fmtDLPj
zslots7.z80 line 3303: unrecognized instruction.          (DJNZ)
3304   20016                   pop bc 
zslots7.z80 line 3304: unrecognized instruction.          (POP)
3305   20016                   push bc 
zslots7.z80 line 3305: unrecognized instruction.          (PUSH)
3306   20016                   dec b
zslots7.z80 line 3306: unrecognized instruction.          (DEC)
3307   20016                   jp z, _reachedTopOrBottom 
zslots7.z80 line 3307: unrecognized instruction.          (JP)
3308   20016                   
3309   20016             _ddr: ld bc, 4 
zslots7.z80 line 3309: Label not found: (_ddr)
zslots7.z80 line 3309: label value misalligned.           (_ddr)
zslots7.z80 line 3309: unrecognized instruction.          (_ddr)
3310   20016                   and a ;reset carry flag
zslots7.z80 line 3310: unrecognized instruction.          (AND)
3311   20016             _dir: sbc hl, bc        
zslots7.z80 line 3311: Label not found: (_dir)
zslots7.z80 line 3311: label value misalligned.           (_dir)
zslots7.z80 line 3311: unrecognized instruction.          (_dir)
3312   20016                  pop bc 
zslots7.z80 line 3312: unrecognized instruction.          (POP)
3313   20016                  djnz _fmtDLPk
zslots7.z80 line 3313: unrecognized instruction.          (DJNZ)
3314   20016             
3315   20016             _reachedTopOrBottom:
3316   20016                  sla e 
zslots7.z80 line 3316: unrecognized instruction.          (SLA)
3317   20016                  sla e      
zslots7.z80 line 3317: unrecognized instruction.          (SLA)
3318   20016                  jr nz, _nre
zslots7.z80 line 3318: unrecognized instruction.          (JR)
3319   20016             
3320   20016             ;end of full 8bit column
3321   20016                  ld e, %00000001
zslots7.z80 line 3321: unrecognized instruction.          (LD)
3322   20016                  dec hl 
zslots7.z80 line 3322: unrecognized instruction.          (DEC)
3323   20016                  ld a, 3 
zslots7.z80 line 3323: unrecognized instruction.          (LD)
3324   20016                  ld (_flp+1), a 
zslots7.z80 line 3324: unrecognized instruction.          (LD)
3325   20016                  jp _ered
zslots7.z80 line 3325: unrecognized instruction.          (JP)
3326   20016             
3327   20016             _nre:
3328   20016                  ld a, (_flp+1)
zslots7.z80 line 3328: unrecognized instruction.          (LD)
3329   20016                  sla a 
zslots7.z80 line 3329: unrecognized instruction.          (SLA)
3330   20016                  sla a 
zslots7.z80 line 3330: unrecognized instruction.          (SLA)
3331   20016                  ld (_flp+1), a 
zslots7.z80 line 3331: unrecognized instruction.          (LD)
3332   20016             
3333   20016             _ered:     
3334   20016                  ld a, (_dir+1)
zslots7.z80 line 3334: unrecognized instruction.          (LD)
3335   20016                  xor %1000   ;flipdir adc/sbc
zslots7.z80 line 3335: unrecognized instruction.          (XOR)
3336   20016                  ld (_dir+1), a     
zslots7.z80 line 3336: unrecognized instruction.          (LD)
3337   20016                 pop bc  
zslots7.z80 line 3337: unrecognized instruction.          (POP)
3338   20016                 ld b, QR_ROOF
zslots7.z80 line 3338: unrecognized instruction.          (LD)
3339   20016                  jp _fmtDLPk
zslots7.z80 line 3339: unrecognized instruction.          (JP)
3340   20016             
3341   20016             
3342   20016             _qr_endofdatastring:
3343   20016             
3344   20016                 ld hl, qr_copyzone+36
zslots7.z80 line 3344: unrecognized instruction.          (LD)
3345   20016                 ld d, %10000000
zslots7.z80 line 3345: unrecognized instruction.          (LD)
3346   20016                 ld b, 12 
zslots7.z80 line 3346: unrecognized instruction.          (LD)
3347   20016             _c8i:  
3348   20016                 ld d, %10000000
zslots7.z80 line 3348: unrecognized instruction.          (LD)
3349   20016                 ld c, (hl)
zslots7.z80 line 3349: unrecognized instruction.          (LD)
3350   20016                 sla c 
zslots7.z80 line 3350: unrecognized instruction.          (SLA)
3351   20016                 ld (hl), c 
zslots7.z80 line 3351: unrecognized instruction.          (LD)
3352   20016                 inc hl 
zslots7.z80 line 3352: unrecognized instruction.          (INC)
3353   20016             
3354   20016                 ld a, (hl)
zslots7.z80 line 3354: unrecognized instruction.          (LD)
3355   20016                 and d 
zslots7.z80 line 3355: unrecognized instruction.          (AND)
3356   20016                 jp z, _z8z8
zslots7.z80 line 3356: unrecognized instruction.          (JP)
3357   20016                 dec hl 
zslots7.z80 line 3357: unrecognized instruction.          (DEC)
3358   20016                 ld a, (hl)
zslots7.z80 line 3358: unrecognized instruction.          (LD)
3359   20016                 or %00000001
zslots7.z80 line 3359: unrecognized instruction.          (OR)
3360   20016                 jp _z8e
zslots7.z80 line 3360: unrecognized instruction.          (JP)
3361   20016             _z8z8:
3362   20016                 dec hl 
zslots7.z80 line 3362: unrecognized instruction.          (DEC)
3363   20016                 ld a, (hl)
zslots7.z80 line 3363: unrecognized instruction.          (LD)
3364   20016                 and %11111110
zslots7.z80 line 3364: unrecognized instruction.          (AND)
3365   20016             _z8e:
3366   20016                 ld (hl), a 
zslots7.z80 line 3366: unrecognized instruction.          (LD)
3367   20016                 inc hl
zslots7.z80 line 3367: unrecognized instruction.          (INC)
3368   20016                 srl d 
zslots7.z80 line 3368: unrecognized instruction.          (SRL)
3369   20016                 ld a, (hl)
zslots7.z80 line 3369: unrecognized instruction.          (LD)
3370   20016                 and d 
zslots7.z80 line 3370: unrecognized instruction.          (AND)
3371   20016                 jp z, _z9z9
zslots7.z80 line 3371: unrecognized instruction.          (JP)
3372   20016                 ld a, (hl)
zslots7.z80 line 3372: unrecognized instruction.          (LD)
3373   20016                 or %10000000
zslots7.z80 line 3373: unrecognized instruction.          (OR)
3374   20016                 jp _z9e
zslots7.z80 line 3374: unrecognized instruction.          (JP)
3375   20016             _z9z9:
3376   20016                 ld a, (hl)
zslots7.z80 line 3376: unrecognized instruction.          (LD)
3377   20016                 and %01111111 
zslots7.z80 line 3377: unrecognized instruction.          (AND)
3378   20016             _z9e:
3379   20016                 ld (hl), a
zslots7.z80 line 3379: unrecognized instruction.          (LD)
3380   20016                 inc hl
zslots7.z80 line 3380: unrecognized instruction.          (INC)
3381   20016                 inc hl 
zslots7.z80 line 3381: unrecognized instruction.          (INC)
3382   20016                 inc hl
zslots7.z80 line 3382: unrecognized instruction.          (INC)
3383   20016                 djnz _c8i
zslots7.z80 line 3383: unrecognized instruction.          (DJNZ)
3384   20016             
3385   20016                 ;call qr_produceBCH
3386   20016                 ;call qr_mask_ED_Space
3387   20016                 ret
zslots7.z80 line 3387: unrecognized instruction.          (RET)
3388   20016             
3389   20016             ;bits 0-14, edged bits
3390   20016             ;ec level = 01, mask pattern = 111
3391   20016             ;   = 01111    
3392   20016             ;     shift left 10 bits, so we have 15 bits of space
3393   20016             ;   =                (A)   011110000000000
3394   20016             ;Generator polynomial(B):  10100110111  
3395   20016             ;align by significance, then poly divide:
3396   20016             ;                        11110000000000
3397   20016             ;                     p/ 10100110111000   
3398   20016             ;                     ---------------------
3399   20016             ;011110000000000
3400   20016             ; 10100110111000
3401   20016             ;---------------
3402   20016             ;001010110111000
3403   20016             ;  1010011011100
3404   20016             ;---------------
3405   20016             ;      ___________
3406   20016             ;  0000101100100 | <--answer
3407   20016             ;     |__________/    
3408   20016             
3409   20016             ;    14, 13, 12, 11, 10, 9
3410   20016             ;    1    1   0   1   0  0
3411   20016             
3412   20016             ;data    01111|0101100100
3413   20016             ;mask    10101|0000010010    
3414   20016             
3415   20016             ;res     11010|0101110110
3416   20016             qr_produceBCH:
3417   20016                 ld hl, qr_v3_BCHmask
zslots7.z80 line 3417: unrecognized instruction.          (LD)
3418   20016                 ld ix, qr_v3_BCHcode
zslots7.z80 line 3418: unrecognized instruction.          (LD)
3419   20016                 ld a, (hl)
zslots7.z80 line 3419: unrecognized instruction.          (LD)
3420   20016                 ld b, (ix)
zslots7.z80 line 3420: unrecognized instruction.          (LD)
3421   20016                 xor b 
zslots7.z80 line 3421: unrecognized instruction.          (XOR)
3422   20016                 ld (qr_v3_BCHfinal), a
zslots7.z80 line 3422: unrecognized instruction.          (LD)
3423   20016                 inc hl 
zslots7.z80 line 3423: unrecognized instruction.          (INC)
3424   20016                 inc de
zslots7.z80 line 3424: unrecognized instruction.          (INC)
3425   20016                 ld a, (hl)
zslots7.z80 line 3425: unrecognized instruction.          (LD)
3426   20016                 ld b, (ix)
zslots7.z80 line 3426: unrecognized instruction.          (LD)
3427   20016                 xor b
zslots7.z80 line 3427: unrecognized instruction.          (XOR)
3428   20016                 ld (qr_v3_BCHfinal+1), a
zslots7.z80 line 3428: unrecognized instruction.          (LD)
3429   20016             
3430   20016                 ret 
zslots7.z80 line 3430: unrecognized instruction.          (RET)
3431   20016             qr_mask_ED_Space:
3432   20016                            ld b, QR_V3L_DWORDS+QR_V3L_EWORDS
zslots7.z80 line 3432: unrecognized instruction.          (LD)
3433   20016                            ld hl, qr_copyzone
zslots7.z80 line 3433: unrecognized instruction.          (LD)
3434   20016                            ld de, QR_29x29_mask7
zslots7.z80 line 3434: unrecognized instruction.          (LD)
3435   20016                            
3436   20016             _mski:             
3437   20016                            ld a, (de)
zslots7.z80 line 3437: unrecognized instruction.          (LD)
3438   20016                            xor (hl)
zslots7.z80 line 3438: unrecognized instruction.          (XOR)
3439   20016                            ld (hl), a 
zslots7.z80 line 3439: unrecognized instruction.          (LD)
3440   20016                            inc hl 
zslots7.z80 line 3440: unrecognized instruction.          (INC)
3441   20016                            inc de 
zslots7.z80 line 3441: unrecognized instruction.          (INC)
3442   20016                            djnz _mski
zslots7.z80 line 3442: unrecognized instruction.          (DJNZ)
3443   20016             
3444   20016             ;-------------Reed Solomon Error Detect&Correct (EDC)------------
3445   20016             
3446   20016             ;--Galois Fields
3447   20016             ;256 bit values, adding/subtracting, pos/neg are the same
3448   20016             
3449   20016             ;inputs: a=x, c=y
3450   20016             ;result: a
3451   20016             gf_add:
3452   20016                 xor c 
zslots7.z80 line 3452: unrecognized instruction.          (XOR)
3453   20016                 ret 
zslots7.z80 line 3453: unrecognized instruction.          (RET)
3454   20016             ;inputs: a=x, c=y
3455   20016             ;result: a
3456   20016             gf_multiply:
3457   20016                 ld hl, gf_log_table
zslots7.z80 line 3457: unrecognized instruction.          (LD)
3458   20016                 ld d, a
zslots7.z80 line 3458: unrecognized instruction.          (LD)
3459   20016                 or %0
zslots7.z80 line 3459: unrecognized instruction.          (OR)
3460   20016                 jp z, _ze
zslots7.z80 line 3460: unrecognized instruction.          (JP)
3461   20016                 ld a, c 
zslots7.z80 line 3461: unrecognized instruction.          (LD)
3462   20016                 or %0
zslots7.z80 line 3462: unrecognized instruction.          (OR)
3463   20016                 jp z, _ze
zslots7.z80 line 3463: unrecognized instruction.          (JP)
3464   20016                 ld a, d 
zslots7.z80 line 3464: unrecognized instruction.          (LD)
3465   20016             ;load log(x) and log(y)
3466   20016                 ld b, 0
zslots7.z80 line 3466: unrecognized instruction.          (LD)
3467   20016                 ld d, 0 
zslots7.z80 line 3467: unrecognized instruction.          (LD)
3468   20016                 add hl, bc 
zslots7.z80 line 3468: unrecognized instruction.          (ADD)
3469   20016                 ld e, (hl) ;y
zslots7.z80 line 3469: unrecognized instruction.          (LD)
3470   20016                 ld hl, gf_log_table
zslots7.z80 line 3470: unrecognized instruction.          (LD)
3471   20016                 ld c, a
zslots7.z80 line 3471: unrecognized instruction.          (LD)
3472   20016                 add hl, bc 
zslots7.z80 line 3472: unrecognized instruction.          (ADD)
3473   20016                 ld a, (hl) ;x
zslots7.z80 line 3473: unrecognized instruction.          (LD)
3474   20016                 ld l, a 
zslots7.z80 line 3474: unrecognized instruction.          (LD)
3475   20016                 ld h, 0 
zslots7.z80 line 3475: unrecognized instruction.          (LD)
3476   20016                 ld d, 0 
zslots7.z80 line 3476: unrecognized instruction.          (LD)
3477   20016                 add hl, de   ;16 bit addition 
zslots7.z80 line 3477: unrecognized instruction.          (ADD)
3478   20016                 ld c, l
zslots7.z80 line 3478: unrecognized instruction.          (LD)
3479   20016                 ld b, h 
zslots7.z80 line 3479: unrecognized instruction.          (LD)
3480   20016                 ;load exp(result)
3481   20016                 ld hl, gf_exp_table 
zslots7.z80 line 3481: unrecognized instruction.          (LD)
3482   20016                 add hl, bc 
zslots7.z80 line 3482: unrecognized instruction.          (ADD)
3483   20016                 ld a, (hl)
zslots7.z80 line 3483: unrecognized instruction.          (LD)
3484   20016                 ret
zslots7.z80 line 3484: unrecognized instruction.          (RET)
3485   20016             
3486   20016             _ze:    
3487   20016                 xor a
zslots7.z80 line 3487: unrecognized instruction.          (XOR)
3488   20016                 ret         ;return 0
zslots7.z80 line 3488: unrecognized instruction.          (RET)
3489   20016             
3490   20016             ;Polynomial multiplication
3491   20016             ;           
3492   20016             ;   inputs: rs_p1*=poly1, (p1len)=len1, rs_p2*=poly2, (p2len)=len2
3493   20016             ;           resultPointer
3494   20016             ;   output: rs_pr*=result poly, (pResLen)=resultLen=(p1Len+p2Len - 1 )
3495   20016             poly_mult:
3496   20016                 ;Alloc mem for result (len1 + len2 -1)
3497   20016                 ld hl, (pMultRes_p)
zslots7.z80 line 3497: unrecognized instruction.          (LD)
3498   20016                 ex de, hl 
zslots7.z80 line 3498: unrecognized instruction.          (EX)
3499   20016                 inc de 
zslots7.z80 line 3499: unrecognized instruction.          (INC)
3500   20016                 ld hl, (pMultRes_p)
zslots7.z80 line 3500: unrecognized instruction.          (LD)
3501   20016                 ;zero out result
3502   20016                 ld (hl), $00
zslots7.z80 line 3502: unrecognized instruction.          (LD)
3503   20016                 ld a, (p1len) 
zslots7.z80 line 3503: unrecognized instruction.          (LD)
3504   20016                 ld b, a 
zslots7.z80 line 3504: unrecognized instruction.          (LD)
3505   20016                 ld a, (p2len)
zslots7.z80 line 3505: unrecognized instruction.          (LD)
3506   20016                 add a, b
zslots7.z80 line 3506: unrecognized instruction.          (ADD)
3507   20016                 dec a 
zslots7.z80 line 3507: unrecognized instruction.          (DEC)
3508   20016                 ld (pResLen), a 
zslots7.z80 line 3508: unrecognized instruction.          (LD)
3509   20016                 ld c, a 
zslots7.z80 line 3509: unrecognized instruction.          (LD)
3510   20016                 ld b, 0 
zslots7.z80 line 3510: unrecognized instruction.          (LD)
3511   20016                 ;ld bc, QR_V3L_DWORDS+QR_V3L_EWORDS
3512   20016                 ldir
zslots7.z80 line 3512: unrecognized instruction.          (LDIR)
3513   20016             ; Input: rdi = pointer to poly1, rsi = len1, rdx = pointer to poly2, rcx = len2
3514   20016             ; Output: rax = pointer to result poly, rbx = result length
3515   20016                 ld hl, (rs_p1)
zslots7.z80 line 3515: unrecognized instruction.          (LD)
3516   20016                 ld (rs_p1s), hl 
zslots7.z80 line 3516: unrecognized instruction.          (LD)
3517   20016                 ld hl, (rs_p2)
zslots7.z80 line 3517: unrecognized instruction.          (LD)
3518   20016                 ld (rs_p2s), hl 
zslots7.z80 line 3518: unrecognized instruction.          (LD)
3519   20016                 ld hl, (pMultRes_p)
zslots7.z80 line 3519: unrecognized instruction.          (LD)
3520   20016                 ld (rs_pr), hl 
zslots7.z80 line 3520: unrecognized instruction.          (LD)
3521   20016                 ;Perform polynomial multiplication
3522   20016                 ld bc, 0
zslots7.z80 line 3522: unrecognized instruction.          (LD)
3523   20016             _polyI:     ;i= len of poly1
3524   20016                 push bc
zslots7.z80 line 3524: unrecognized instruction.          (PUSH)
3525   20016                  ld hl, (rs_p2s)
zslots7.z80 line 3525: unrecognized instruction.          (LD)
3526   20016                  ld (rs_p2), hl  ; reset L2
zslots7.z80 line 3526: unrecognized instruction.          (LD)
3527   20016                  ld b, 0
zslots7.z80 line 3527: unrecognized instruction.          (LD)
3528   20016             _polyJ:     ;j= len of poly2
3529   20016                  push bc 
zslots7.z80 line 3529: unrecognized instruction.          (PUSH)
3530   20016                  ;Load coefficiencts
3531   20016                   ld hl, (rs_p1)
zslots7.z80 line 3531: unrecognized instruction.          (LD)
3532   20016                   ld a, (hl)
zslots7.z80 line 3532: unrecognized instruction.          (LD)
3533   20016                   ld hl, (rs_p2)
zslots7.z80 line 3533: unrecognized instruction.          (LD)
3534   20016                   ld c, (hl)
zslots7.z80 line 3534: unrecognized instruction.          (LD)
3535   20016                   ;multiply coefficients
3536   20016                   call gf_multiply
zslots7.z80 line 3536: unrecognized instruction.          (CALL)
3537   20016                   ;add to the result
3538   20016                   ld e, a ;result
zslots7.z80 line 3538: unrecognized instruction.          (LD)
3539   20016                  pop bc 
zslots7.z80 line 3539: unrecognized instruction.          (POP)
3540   20016                  ld a, b  ;a=j
zslots7.z80 line 3540: unrecognized instruction.          (LD)
3541   20016                  ld d, a  ;d=j 
zslots7.z80 line 3541: unrecognized instruction.          (LD)
3542   20016                 pop bc 
zslots7.z80 line 3542: unrecognized instruction.          (POP)
3543   20016                 push bc   ;b=i
zslots7.z80 line 3543: unrecognized instruction.          (PUSH)
3544   20016                  add a, b ;i+j
zslots7.z80 line 3544: unrecognized instruction.          (ADD)
3545   20016                  ld b, 0 
zslots7.z80 line 3545: unrecognized instruction.          (LD)
3546   20016                  ld c, a 
zslots7.z80 line 3546: unrecognized instruction.          (LD)
3547   20016                  ld hl, (rs_pr)
zslots7.z80 line 3547: unrecognized instruction.          (LD)
3548   20016                  add hl, bc 
zslots7.z80 line 3548: unrecognized instruction.          (ADD)
3549   20016                 ;ld (rs_pr), hl
3550   20016                  ld a, (hl)
zslots7.z80 line 3550: unrecognized instruction.          (LD)
3551   20016                  ld c, e   
zslots7.z80 line 3551: unrecognized instruction.          (LD)
3552   20016                  ld b, d   ;push j back onto top of stack
zslots7.z80 line 3552: unrecognized instruction.          (LD)
3553   20016                   push bc    ;.
zslots7.z80 line 3553: unrecognized instruction.          (PUSH)
3554   20016                   call gf_add 
zslots7.z80 line 3554: unrecognized instruction.          (CALL)
3555   20016                   ld (hl), a 
zslots7.z80 line 3555: unrecognized instruction.          (LD)
3556   20016                   ld a, (p2len)
zslots7.z80 line 3556: unrecognized instruction.          (LD)
3557   20016                  pop bc 
zslots7.z80 line 3557: unrecognized instruction.          (POP)
3558   20016                  ld hl, (rs_p2)
zslots7.z80 line 3558: unrecognized instruction.          (LD)
3559   20016                  inc hl
zslots7.z80 line 3559: unrecognized instruction.          (INC)
3560   20016                  ld (rs_p2), hl 
zslots7.z80 line 3560: unrecognized instruction.          (LD)
3561   20016                  inc b  ;d=j=poly2.len
zslots7.z80 line 3561: unrecognized instruction.          (INC)
3562   20016                  cp b 
zslots7.z80 line 3562: unrecognized instruction.          (CP)
3563   20016                  jp nz, _polyJ
zslots7.z80 line 3563: unrecognized instruction.          (JP)
3564   20016             
3565   20016                  ld hl, (rs_p1)
zslots7.z80 line 3565: unrecognized instruction.          (LD)
3566   20016                  inc hl 
zslots7.z80 line 3566: unrecognized instruction.          (INC)
3567   20016                  ld (rs_p1), hl 
zslots7.z80 line 3567: unrecognized instruction.          (LD)
3568   20016                 pop bc
zslots7.z80 line 3568: unrecognized instruction.          (POP)
3569   20016                 inc b 
zslots7.z80 line 3569: unrecognized instruction.          (INC)
3570   20016                 ld a, (p1len)
zslots7.z80 line 3570: unrecognized instruction.          (LD)
3571   20016                 cp b 
zslots7.z80 line 3571: unrecognized instruction.          (CP)
3572   20016                 jp nz, _polyI 
zslots7.z80 line 3572: unrecognized instruction.          (JP)
3573   20016             
3574   20016                 ret 
zslots7.z80 line 3574: unrecognized instruction.          (RET)
3575   20016             ; def multiply(self, other):
3576   20016             ;    result = [0] * (len(self.coefficients) + len(other.coefficients) - 1)
3577   20016             ;    for i, coef1 in enumerate(self.coefficients):
3578   20016             ;        for j, coef2 in enumerate(other.coefficients):
3579   20016             ;            result[i + j] = self.gf.add(result[i + j], self.gf.multiply(coef1, coef2))
3580   20016             ;    return Polynomial(result, self.gf)
3581   20016             
3582   20016             
3583   20016             
3584   20016             pdiv:
3585   20016             ;def __mod__(self, other):
3586   20016             ;
3587   20016             ;# Polynomial division (remainder)
3588   20016             ;result = self.coefficients[:]
3589   20016             ;divisor = other.coefficients
3590   20016             
3591   20016             ;while len(result) >= len(divisor):
3592   20016             
3593   20016                  ld a, QR_V3L_DWORDS+QR_V3L_EWORDS-1  ;res=msg
zslots7.z80 line 3593: unrecognized instruction.          (LD)
3594   20016                  ld (rs_msglen), a 
zslots7.z80 line 3594: unrecognized instruction.          (LD)
3595   20016             _pdivI: 
3596   20016                 
3597   20016                  ld a, (pdiv_divisorLen)
zslots7.z80 line 3597: unrecognized instruction.          (LD)
3598   20016                  ld b, a
zslots7.z80 line 3598: unrecognized instruction.          (LD)
3599   20016                  ld a, (rs_msglen)
zslots7.z80 line 3599: unrecognized instruction.          (LD)
3600   20016                  cp b
zslots7.z80 line 3600: unrecognized instruction.          (CP)
3601   20016                  jp c, _pdivFIN
zslots7.z80 line 3601: unrecognized instruction.          (JP)
3602   20016                  ld ix, (rs_gen_poly_p)
zslots7.z80 line 3602: unrecognized instruction.          (LD)
3603   20016                  ld (pdiv_divisor_p), ix 
zslots7.z80 line 3603: unrecognized instruction.          (LD)
3604   20016                  ld hl, (msg_p)
zslots7.z80 line 3604: unrecognized instruction.          (LD)
3605   20016                  ld (pdiv_res_p), hl 
zslots7.z80 line 3605: unrecognized instruction.          (LD)
3606   20016                  ;ld (pdiv_divisorLen), a ;len(divisor)
3607   20016                  ;coeff = result[0]
3608   20016                  ld a, (hl)
zslots7.z80 line 3608: unrecognized instruction.          (LD)
3609   20016                  ld (pdiv_coeff), a 
zslots7.z80 line 3609: unrecognized instruction.          (LD)
3610   20016                  ld b, 0 
zslots7.z80 line 3610: unrecognized instruction.          (LD)
3611   20016             ;    for i in range(len(divisor)):  for 0-(x-1)
3612   20016             ;        result[i] = self.field.add(result[i], self.field.multiply(coeff, divisor[i]))
3613   20016             ;    result.pop(0) ;remove 1st element from list.  [a,b,c].pop(0) = [b,c]
3614   20016             _pdivJ:
3615   20016                  push bc 
zslots7.z80 line 3615: unrecognized instruction.          (PUSH)
3616   20016                   push hl 
zslots7.z80 line 3616: unrecognized instruction.          (PUSH)
3617   20016                    ld c, (ix)
zslots7.z80 line 3617: unrecognized instruction.          (LD)
3618   20016                    ld a, (pdiv_coeff)
zslots7.z80 line 3618: unrecognized instruction.          (LD)
3619   20016                    call gf_multiply
zslots7.z80 line 3619: unrecognized instruction.          (CALL)
3620   20016                    ;result in a
3621   20016                   pop hl 
zslots7.z80 line 3621: unrecognized instruction.          (POP)
3622   20016                   ld c, (hl) ;result[i]
zslots7.z80 line 3622: unrecognized instruction.          (LD)
3623   20016                   call gf_add 
zslots7.z80 line 3623: unrecognized instruction.          (CALL)
3624   20016                   ld (hl), a 
zslots7.z80 line 3624: unrecognized instruction.          (LD)
3625   20016                 pop bc 
zslots7.z80 line 3625: unrecognized instruction.          (POP)
3626   20016                 inc ix 
zslots7.z80 line 3626: unrecognized instruction.          (INC)
3627   20016                 inc hl 
zslots7.z80 line 3627: unrecognized instruction.          (INC)
3628   20016                 ld a, (pdiv_divisorLen)
zslots7.z80 line 3628: unrecognized instruction.          (LD)
3629   20016                 inc b
zslots7.z80 line 3629: unrecognized instruction.          (INC)
3630   20016                 cp b 
zslots7.z80 line 3630: unrecognized instruction.          (CP)
3631   20016                 jp nc, _pdivJ
zslots7.z80 line 3631: unrecognized instruction.          (JP)
3632   20016                 ld a, (rs_msglen)
zslots7.z80 line 3632: unrecognized instruction.          (LD)
3633   20016                 dec a
zslots7.z80 line 3633: unrecognized instruction.          (DEC)
3634   20016                 ld (rs_msglen), a 
zslots7.z80 line 3634: unrecognized instruction.          (LD)
3635   20016                 ;pop res[0]
3636   20016                 inc hl 
zslots7.z80 line 3636: unrecognized instruction.          (INC)
3637   20016                 ld (msg_p), hl 
zslots7.z80 line 3637: unrecognized instruction.          (LD)
3638   20016                 jp _pdivI
zslots7.z80 line 3638: unrecognized instruction.          (JP)
3639   20016             
3640   20016             _pdivFIN:
3641   20016             
3642   20016             ;return Polynomial(result, self.field)
3643   20016             ;    result = msg_p*(rs_msglen)
3644   20016                 ret
zslots7.z80 line 3644: unrecognized instruction.          (RET)
3645   20016             
3646   20016             
3647   20016             ;reed solomon encode the EDC field
3648   20016             ;inputs: D-Space fields, EDC Count, GS pointer, message(full Dspace)(msg_p)
3649   20016             ;
3650   20016             
3651   20016             rs_encode:
3652   20016             ;# Initialize the generator polynomial to [1]
3653   20016             ;    gen = Polynomial([1], gf)
3654   20016                 ld hl, rs_poly_result
zslots7.z80 line 3654: unrecognized instruction.          (LD)
3655   20016                 ld (pMultRes_p), hl 
zslots7.z80 line 3655: unrecognized instruction.          (LD)
3656   20016                 ld a, 1
zslots7.z80 line 3656: unrecognized instruction.          (LD)
3657   20016                 ld (p1len), a 
zslots7.z80 line 3657: unrecognized instruction.          (LD)
3658   20016                 ld hl, poly_multL1
zslots7.z80 line 3658: unrecognized instruction.          (LD)
3659   20016                 ld (hl), a 
zslots7.z80 line 3659: unrecognized instruction.          (LD)
3660   20016                 ld (rs_p1), hl
zslots7.z80 line 3660: unrecognized instruction.          (LD)
3661   20016             
3662   20016                 ld b, QR_V3L_EWORDS
zslots7.z80 line 3662: unrecognized instruction.          (LD)
3663   20016                 ld c, 0
zslots7.z80 line 3663: unrecognized instruction.          (LD)
3664   20016             
3665   20016             ;    # Build the generator polynomial by multiplying it with (x + gf.exp_table[i]) for each i
3666   20016             ;    for i in range(nsym):
3667   20016             ;        gen *= Polynomial([1, gf.exp_table[i]], gf)
3668   20016             _rsI:
3669   20016                 push bc
zslots7.z80 line 3669: unrecognized instruction.          (PUSH)
3670   20016             
3671   20016                 ;ld ix, pResLen
3672   20016                 ld a, 2
zslots7.z80 line 3672: unrecognized instruction.          (LD)
3673   20016                 ld (p2len), a    ;starting gen p2len = 1st call to poly([1],gf.exp_table[i])
zslots7.z80 line 3673: unrecognized instruction.          (LD)
3674   20016                 ld hl, poly_multL2
zslots7.z80 line 3674: unrecognized instruction.          (LD)
3675   20016                 ld (rs_p2), hl 
zslots7.z80 line 3675: unrecognized instruction.          (LD)
3676   20016              
3677   20016                 ld hl, gf_exp_table
zslots7.z80 line 3677: unrecognized instruction.          (LD)
3678   20016                 ;gen *= Polynomial([1, gf.exp_table[i]], gf)
3679   20016                 ld b, 0 
zslots7.z80 line 3679: unrecognized instruction.          (LD)
3680   20016                 add hl, bc
zslots7.z80 line 3680: unrecognized instruction.          (ADD)
3681   20016                 ld a, (hl)  ;gf.exp_table[i] 
zslots7.z80 line 3681: unrecognized instruction.          (LD)
3682   20016                 ld (poly_multL2+1), a 
zslots7.z80 line 3682: unrecognized instruction.          (LD)
3683   20016             
3684   20016                 ld hl, poly_multL2
zslots7.z80 line 3684: unrecognized instruction.          (LD)
3685   20016                 ld (rs_p2), hl 
zslots7.z80 line 3685: unrecognized instruction.          (LD)
3686   20016                 call poly_mult   ;result in (pMultRes_p)
zslots7.z80 line 3686: unrecognized instruction.          (CALL)
3687   20016             
3688   20016                 ;copy res to gen
3689   20016                 ld hl, rs_poly_result
zslots7.z80 line 3689: unrecognized instruction.          (LD)
3690   20016                 ld de, rs_gen
zslots7.z80 line 3690: unrecognized instruction.          (LD)
3691   20016                 ld a, (pResLen)
zslots7.z80 line 3691: unrecognized instruction.          (LD)
3692   20016                 ld c, a
zslots7.z80 line 3692: unrecognized instruction.          (LD)
3693   20016                 ld b, 0  
zslots7.z80 line 3693: unrecognized instruction.          (LD)
3694   20016                 ldir 
zslots7.z80 line 3694: unrecognized instruction.          (LDIR)
3695   20016             
3696   20016                 ld a, (p1len)    
zslots7.z80 line 3696: unrecognized instruction.          (LD)
3697   20016                 inc a 
zslots7.z80 line 3697: unrecognized instruction.          (INC)
3698   20016                 ld (p1len), a 
zslots7.z80 line 3698: unrecognized instruction.          (LD)
3699   20016                 ld hl, rs_gen   
zslots7.z80 line 3699: unrecognized instruction.          (LD)
3700   20016                 ld (rs_p1), hl  ;last polymult result = next arg1
zslots7.z80 line 3700: unrecognized instruction.          (LD)
3701   20016                 pop bc
zslots7.z80 line 3701: unrecognized instruction.          (POP)
3702   20016                 inc c
zslots7.z80 line 3702: unrecognized instruction.          (INC)
3703   20016                 djnz _rsI
zslots7.z80 line 3703: unrecognized instruction.          (DJNZ)
3704   20016             
3705   20016             
3706   20016             ;# Compute the remainder of the message polynomial divided by the generator polynomial
3707   20016             ;remainder = Polynomial(msg.coefficients[:], gf)
3708   20016             ;msg = remainder = padded message
3709   20016             
3710   20016             ;   copy message over to remainder
3711   20016                 ld hl, qr_DSpace_Message
zslots7.z80 line 3711: unrecognized instruction.          (LD)
3712   20016                 ld de, rs_msg_remainder
zslots7.z80 line 3712: unrecognized instruction.          (LD)
3713   20016                 ld (rs_remainder_p), de 
zslots7.z80 line 3713: unrecognized instruction.          (LD)
3714   20016                 ld bc, QR_V3L_DWORDS+QR_V3L_EWORDS+1
zslots7.z80 line 3714: unrecognized instruction.          (LD)
3715   20016                 ldir 
zslots7.z80 line 3715: unrecognized instruction.          (LDIR)
3716   20016             
3717   20016                 ld b, QR_V3L_DWORDS
zslots7.z80 line 3717: unrecognized instruction.          (LD)
3718   20016                 ld c, 0
zslots7.z80 line 3718: unrecognized instruction.          (LD)
3719   20016             
3720   20016             
3721   20016             _rs_remain_i:
3722   20016                 push bc 
zslots7.z80 line 3722: unrecognized instruction.          (PUSH)
3723   20016                 ld hl, (rs_remainder_p)
zslots7.z80 line 3723: unrecognized instruction.          (LD)
3724   20016                 ld b, 0
zslots7.z80 line 3724: unrecognized instruction.          (LD)
3725   20016                 add hl, bc 
zslots7.z80 line 3725: unrecognized instruction.          (ADD)
3726   20016                 ld a, (hl) 
zslots7.z80 line 3726: unrecognized instruction.          (LD)
3727   20016                 ld (rs_coeff), a 
zslots7.z80 line 3727: unrecognized instruction.          (LD)
3728   20016                 or %0
zslots7.z80 line 3728: unrecognized instruction.          (OR)
3729   20016                 jp z, _riZ
zslots7.z80 line 3729: unrecognized instruction.          (JP)
3730   20016                  ld b, QR_V3L_EWORDS+1  
zslots7.z80 line 3730: unrecognized instruction.          (LD)
3731   20016                  ld c, 0 
zslots7.z80 line 3731: unrecognized instruction.          (LD)
3732   20016             
3733   20016             _rs_remain_j:     ;j= len of poly2
3734   20016                  push bc 
zslots7.z80 line 3734: unrecognized instruction.          (PUSH)
3735   20016                  ;Load coefficiencts
3736   20016                   ld hl, rs_gen
zslots7.z80 line 3736: unrecognized instruction.          (LD)
3737   20016                   ld b, 0
zslots7.z80 line 3737: unrecognized instruction.          (LD)
3738   20016                   add hl, bc 
zslots7.z80 line 3738: unrecognized instruction.          (ADD)
3739   20016                   ld c, (hl)        ;gen[j]
zslots7.z80 line 3739: unrecognized instruction.          (LD)
3740   20016                   ld a, (rs_coeff)  ;coeff
zslots7.z80 line 3740: unrecognized instruction.          (LD)
3741   20016                   call gf_multiply
zslots7.z80 line 3741: unrecognized instruction.          (CALL)
3742   20016                   ;add to the result
3743   20016                   ld e, a ;result
zslots7.z80 line 3743: unrecognized instruction.          (LD)
3744   20016                  pop bc 
zslots7.z80 line 3744: unrecognized instruction.          (POP)
3745   20016                  ld a, c  ;a=j
zslots7.z80 line 3745: unrecognized instruction.          (LD)
3746   20016                  ld d, a  ;d=j 
zslots7.z80 line 3746: unrecognized instruction.          (LD)
3747   20016                 pop hl
zslots7.z80 line 3747: unrecognized instruction.          (POP)
3748   20016                 push hl 
zslots7.z80 line 3748: unrecognized instruction.          (PUSH)
3749   20016                  push bc  
zslots7.z80 line 3749: unrecognized instruction.          (PUSH)
3750   20016                   add a, l ;i+j
zslots7.z80 line 3750: unrecognized instruction.          (ADD)
3751   20016                   ld b, 0 
zslots7.z80 line 3751: unrecognized instruction.          (LD)
3752   20016                   ld c, a 
zslots7.z80 line 3752: unrecognized instruction.          (LD)
3753   20016                   ld hl, (rs_remainder_p)
zslots7.z80 line 3753: unrecognized instruction.          (LD)
3754   20016                   add hl, bc 
zslots7.z80 line 3754: unrecognized instruction.          (ADD)
3755   20016                   ;ld (rs_pr), hl
3756   20016                   ld a, (hl)
zslots7.z80 line 3756: unrecognized instruction.          (LD)
3757   20016                   ld c, e   
zslots7.z80 line 3757: unrecognized instruction.          (LD)
3758   20016                   call gf_add 
zslots7.z80 line 3758: unrecognized instruction.          (CALL)
3759   20016                   ld (hl), a 
zslots7.z80 line 3759: unrecognized instruction.          (LD)
3760   20016                   ld a, (p2len)
zslots7.z80 line 3760: unrecognized instruction.          (LD)
3761   20016                  pop bc 
zslots7.z80 line 3761: unrecognized instruction.          (POP)
3762   20016                  inc c  ;d=j=poly2.len
zslots7.z80 line 3762: unrecognized instruction.          (INC)
3763   20016                  djnz _rs_remain_j    
zslots7.z80 line 3763: unrecognized instruction.          (DJNZ)
3764   20016             
3765   20016             _riZ:
3766   20016                 pop bc
zslots7.z80 line 3766: unrecognized instruction.          (POP)
3767   20016                 inc c 
zslots7.z80 line 3767: unrecognized instruction.          (INC)
3768   20016                 djnz _rs_remain_i
zslots7.z80 line 3768: unrecognized instruction.          (DJNZ)
3769   20016             
3770   20016                 ;copy EDC to end of D_Words
3771   20016                 ld hl, rs_msg_remainder+QR_V3L_DWORDS
zslots7.z80 line 3771: unrecognized instruction.          (LD)
3772   20016                 ld de, qr_DSpace_Message+QR_V3L_DWORDS
zslots7.z80 line 3772: unrecognized instruction.          (LD)
3773   20016                 ld bc, QR_V3L_EWORDS
zslots7.z80 line 3773: unrecognized instruction.          (LD)
3774   20016                 ldir 
zslots7.z80 line 3774: unrecognized instruction.          (LDIR)
3775   20016             
3776   20016             
3777   20016                 ;qr_Dspace_message now contains full code word
3778   20016             
3779   20016             
3780   20016                 ret 
zslots7.z80 line 3780: unrecognized instruction.          (RET)
3781   20016             
3782   20016             ;remainder = msg % gen  # Calculate the remainder
3783   20016                  ld ix, (rs_gen_poly_p)
zslots7.z80 line 3783: unrecognized instruction.          (LD)
3784   20016                  ld (pdiv_divisor_p), ix 
zslots7.z80 line 3784: unrecognized instruction.          (LD)
3785   20016                  ld hl, (msg_p)
zslots7.z80 line 3785: unrecognized instruction.          (LD)
3786   20016                  ld (pdiv_res_p), hl 
zslots7.z80 line 3786: unrecognized instruction.          (LD)
3787   20016             
3788   20016                  call pdiv
zslots7.z80 line 3788: unrecognized instruction.          (CALL)
3789   20016                  ld hl, (msg_p)
zslots7.z80 line 3789: unrecognized instruction.          (LD)
3790   20016                  ;remainder
3791   20016                  ld (pdiv_remainder_p), hl
zslots7.z80 line 3791: unrecognized instruction.          (LD)
3792   20016             
3793   20016             ;    # Append the remainder to the original data to form the encoded message
3794   20016             ;    return data + remainder.coefficients
3795   20016                  ret 
zslots7.z80 line 3795: unrecognized instruction.          (RET)
3796   20016             
3797   20016             
3798   20016             ;generateQRCode()
3799   20016             ;   generates a QR code, detailing the unique state of the game/device.  
3800   20016             ;   scanning the code will direct the user to a url, allowing them to connect a wallet & receive payout
3801   20016             ;12px
3802   20016             ;quietzone: (surrounding blank space) = >=4 resolutions;
3803   20016             ;version = 3 (29x29)
3804   20016             
3805   20016             ;rows 0,3,6...: s0 = %10101010; repeat.
3806   20016             ;   next: cpl(last)   
3807   20016             ;rows (1),2, 4,5...: s1 = %00011100, f0 = %01101101 CY1; push af(CYF); s0xor(f0); pop AF; rr (f0) 
3808   20016             ;         2        : s2 = s1xor(10010010)  
3809   20016             ;
3810   20016             ;clear last 3 bits of each row to 0's at the end. (8x4=32-3=29)
3811   20016             createQR29x29Mask7:
3812   20016                 ld hl, QR_29x29_mask7
zslots7.z80 line 3812: unrecognized instruction.          (LD)
3813   20016                 ld a, (r1s0)
zslots7.z80 line 3813: unrecognized instruction.          (LD)
3814   20016                 ld c, a 
zslots7.z80 line 3814: unrecognized instruction.          (LD)
3815   20016                 ld b, 29 
zslots7.z80 line 3815: unrecognized instruction.          (LD)
3816   20016             c297LP:
3817   20016                 ;r0,3,6
3818   20016                 call r0_3_6
zslots7.z80 line 3818: unrecognized instruction.          (CALL)
3819   20016                 dec b 
zslots7.z80 line 3819: unrecognized instruction.          (DEC)
3820   20016                 ret z 
zslots7.z80 line 3820: unrecognized instruction.          (RET)
3821   20016                 ;r1,2 
3822   20016                 call r1_2
zslots7.z80 line 3822: unrecognized instruction.          (CALL)
3823   20016                 dec b
zslots7.z80 line 3823: unrecognized instruction.          (DEC)
3824   20016                 ret z
zslots7.z80 line 3824: unrecognized instruction.          (RET)
3825   20016                 call r1_2
zslots7.z80 line 3825: unrecognized instruction.          (CALL)
3826   20016                 dec b
zslots7.z80 line 3826: unrecognized instruction.          (DEC)
3827   20016                 ret z 
zslots7.z80 line 3827: unrecognized instruction.          (RET)
3828   20016                 ld a, %01101101
zslots7.z80 line 3828: unrecognized instruction.          (LD)
3829   20016                 ld (r1f0), a 
zslots7.z80 line 3829: unrecognized instruction.          (LD)
3830   20016                 ld a, c
zslots7.z80 line 3830: unrecognized instruction.          (LD)
3831   20016                 cpl 
zslots7.z80 line 3831: unrecognized instruction.          (CPL)
3832   20016                 ld (r1s0), a 
zslots7.z80 line 3832: unrecognized instruction.          (LD)
3833   20016                 ld c, a 
zslots7.z80 line 3833: unrecognized instruction.          (LD)
3834   20016                 jp c297LP
zslots7.z80 line 3834: unrecognized instruction.          (JP)
3835   20016                 
3836   20016                 
3837   20016             ;f(move to the next 8 bits along the row)
3838   20016             ;  prep:  
3839   20016             ;     e = r1s0
3840   20016             ;     a = r1f0
3841   20016             
3842   20016             ;r0s0:                 .db         %10101010
3843   20016             ;r1s0:                 .db         %00011100    
3844   20016             ;r1f0:                 .db         %01101101 ;cy=1
3845   20016             ;r1_4s0_to_r2_5s0:     .db         %10010010 ;cy=0
3846   20016             ;r1_2:   
3847   20016             r1_2:
3848   20016                 ld a, (r1f0)        ;works for 1&2 and 4&5
zslots7.z80 line 3848: unrecognized instruction.          (LD)
3849   20016                 ld e, a 
zslots7.z80 line 3849: unrecognized instruction.          (LD)
3850   20016                 ld a, (r1s0)
zslots7.z80 line 3850: unrecognized instruction.          (LD)
3851   20016                 scf 
zslots7.z80 line 3851: unrecognized instruction.          (SCF)
3852   20016                 push af 
zslots7.z80 line 3852: unrecognized instruction.          (PUSH)
3853   20016                  ld (hl), a 
zslots7.z80 line 3853: unrecognized instruction.          (LD)
3854   20016                  inc hl 
zslots7.z80 line 3854: unrecognized instruction.          (INC)
3855   20016                  xor e
zslots7.z80 line 3855: unrecognized instruction.          (XOR)
3856   20016                  ld (hl), a
zslots7.z80 line 3856: unrecognized instruction.          (LD)
3857   20016                 pop af
zslots7.z80 line 3857: unrecognized instruction.          (POP)
3858   20016                 ld d, a  
zslots7.z80 line 3858: unrecognized instruction.          (LD)
3859   20016                 ld a, (hl)
zslots7.z80 line 3859: unrecognized instruction.          (LD)
3860   20016                 rr e 
zslots7.z80 line 3860: unrecognized instruction.          (RR)
3861   20016                 xor e 
zslots7.z80 line 3861: unrecognized instruction.          (XOR)
3862   20016                 inc hl 
zslots7.z80 line 3862: unrecognized instruction.          (INC)
3863   20016                 ld (hl), a 
zslots7.z80 line 3863: unrecognized instruction.          (LD)
3864   20016                 inc hl 
zslots7.z80 line 3864: unrecognized instruction.          (INC)
3865   20016                 ld (hl), d 
zslots7.z80 line 3865: unrecognized instruction.          (LD)
3866   20016                 inc hl 
zslots7.z80 line 3866: unrecognized instruction.          (INC)
3867   20016                 ld a, (r1_4s0_to_r2_5s0)
zslots7.z80 line 3867: unrecognized instruction.          (LD)
3868   20016                 xor c 
zslots7.z80 line 3868: unrecognized instruction.          (XOR)
3869   20016                 ld (r1s0), a 
zslots7.z80 line 3869: unrecognized instruction.          (LD)
3870   20016                 ld a, e 
zslots7.z80 line 3870: unrecognized instruction.          (LD)
3871   20016                 ld (r1f0), a 
zslots7.z80 line 3871: unrecognized instruction.          (LD)
3872   20016                 ret
zslots7.z80 line 3872: unrecognized instruction.          (RET)
3873   20016             
3874   20016             
3875   20016             ;complete & save entire row.
3876   20016             ;update r0s0 for next mod3 iteration                    
3877   20016             r0_3_6:   
3878   20016                 ld a, (r0s0)         
zslots7.z80 line 3878: unrecognized instruction.          (LD)
3879   20016                 ld d, 4
zslots7.z80 line 3879: unrecognized instruction.          (LD)
3880   20016             r0nLP:
3881   20016                 ld (hl), a 
zslots7.z80 line 3881: unrecognized instruction.          (LD)
3882   20016                 inc hl
zslots7.z80 line 3882: unrecognized instruction.          (INC)
3883   20016                 dec d
zslots7.z80 line 3883: unrecognized instruction.          (DEC)
3884   20016                 jp nz, r0nLP
zslots7.z80 line 3884: unrecognized instruction.          (JP)
3885   20016                 cpl
zslots7.z80 line 3885: unrecognized instruction.          (CPL)
3886   20016                 ld (r0s0), a 
zslots7.z80 line 3886: unrecognized instruction.          (LD)
3887   20016             
3888   20016                 RET
zslots7.z80 line 3888: unrecognized instruction.          (RET)
3889   20016             
3890   20016             
3891   20016             
3892   20016             ;draws a line through the winning payline, on display
3893   20016             ;sb used between win animations and to indicate to the user active paylines on addition/removal
3894   20016             ;flags
3895   20016             ;   fullScrnDraw, (IY + apiFlg4)  = 1 to use column 95 and row 0 
3896   20016             ;   plotLoc, (IY + plotFlags)     = 1 to draw to the display only 
3897   20016             ;                                 = 0 to draw to display and plotSScreen buffer 
3898   20016             ;   bufferOnly, (IY + plotFlag3)  = 1 to draw to plotSScreen buffer only
3899   20016             ;registers 
3900   20016             ;   BC = 1st point = B=X, C=Y
3901   20016             ;   DE = 2nd point = D=X, E=Y
3902   20016             ;       ex:    LD BC, 25*256+30                ;1st point, X=25, Y=30
3903   20016             ;              LD DE, 62*256+50                ;2nd point, X=62, Y=50
3904   20016             ;   H  = 0/1/2 = off/on/xor
3905   20016             ;registers all preserved
3906   20016             ;(c) Texas Instruments
3907   20016             zi_line:
3908   20016             
3909   20016                             ;SET plotLoc, (IY+plotFlags)     ;display only
3910   20016                             LD H, 2                         ;signal to turn pixels off
zslots7.z80 line 3910: unrecognized instruction.          (LD)
3911   20016                             bcall(_iline)                   ;draw the line
zslots7.z80 line 3911: unrecognized instruction.          (BCALL(_ILINE))
3912   20016                             call ionFastCopy
zslots7.z80 line 3912: unrecognized instruction.          (CALL)
3913   20016                             ret
zslots7.z80 line 3913: unrecognized instruction.          (RET)
3914   20016             smart_exit:
3915   20016                            pop hl
zslots7.z80 line 3915: unrecognized instruction.          (POP)
3916   20016                            RES   textWrite, (IY+sgrflags)      ;set flag to write text to grbuffer, not screen.
zslots7.z80 line 3916: unrecognized instruction.          (RES)
3917   20016                            RES   textInverse, (IY+textFlags)   ;invert text                  
zslots7.z80 line 3917: unrecognized instruction.          (RES)
3918   20016                            RET
zslots7.z80 line 3918: unrecognized instruction.          (RET)
3919   20016             ;p_exit:
3920   20016             ;                EI
3921   20016             ;                ld SP, (startSP)
3922   20016             ;                halt
3923   20016             ;                ret
3924   20016             ;----------------------------------------------------------------------
3925   20016             
3926   20016 00          aO:             .db      $00      ;$00 = win_Anim, $1A = Cur_reel_state, $34 = Save, $4E = fin
3927   20017             sX:             .equ     $1A
3928   20017             sY:             .equ     $34
3929   20017             
3930   20017 C9          bt_flags:       .db      %11001001
3931   20018             isFirstGame:    .EQU     0
3932   20018             isSpinning:     .EQU     1
3933   20018             isCounting:     .EQU     2
3934   20018             isWaiting:      .EQU     3
3935   20018             isWin:          .EQU     4
3936   20018             isBonus:        .EQU     5
3937   20018             is1stBonusRoll: .EQU     6
3938   20018             clearTop:       .EQU     7
3939   20018             
3940   20018             ;                         87654321         9
3941   20018 00 00 00    bonus_enemLocs: .db      %00000000,%00000000, 0
3942   2001B             
3943   2001B 00          bt_flags2:      .db     %00000000
3944   2001C             isFromBonus:    .EQU    0
3945   2001C             
3946   2001C 09          _lines          .db      9
3947   2001D 01          _multiplier     .db      1
3948   2001E 00          _totalBet       .db      0
3949   2001F             
3950   2001F 00          bonusCount:     .db      @0
3951   20020             
3952   20020             _SHARPMEM_:         .ds                   10        ;allocate 10 contiguous bytes
3953   2002A             startSP             =           _SHARPMEM_+0
3954   2002A             saveGame            =           _SHARPMEM_+2
3955   2002A             
3956   2002A             ;isCounted       =          _SHARPMEM_+11
3957   2002A             ;isAutoStopping  =          _SHARPMEM_+14
3958   2002A             ;isReelSpinAnimCXLEDbySpin =_SHARPMEM_+15 
3959   2002A                 
3960   2002A 00          spinAnimCount:   .db       $00         ;keeps track of reel spinning animation frame
3961   2002B 00          spinningReelNo:  .db       $00
3962   2002C 00          reelTimer:       .db       $00         ;auto stops reels if not manually stopped
3963   2002D 00 16 50 20 maskXYWH:        .db       $00, $16, $50, $20,0
3963   20031 00 
3964   20032             
3965   20032             ;RMENU
3966   20032             _TEXT_XY_RMENU   .EQU      $1854        ;XY of 1st menu item in rightMenu  
3967   20032             _TEXT_XY_RMENU2  .EQU      $2054        ;   2nd  
3968   20032             _TEXT_XY_RMENU3  .EQU      $2754        ;   3rd  
3969   20032                                        ;y,x
3970   20032             _NUM_XY_MTP      .EQU      $185A
3971   20032             _NUM_XY_LNS      .EQU      $235A
3972   20032             
3973   20032             
3974   20032 8F          BON_K: .db  $8F      ;[1]++ = [2] ...
3975   20033 2D 2D 2D 22 BON_Y: .db  $2D,$2D,$2D, $22,$22,$22, $17,$17,$17, 0fh
3975   20037 22 22 17 17 
3975   2003B 17 0F 
3976   2003D 13 2E 49 13 BON_X: .db  $13,$2E,$49, $13,$2E,$49, $13,$2E,$49, 0fh
3976   20041 2E 49 13 2E 
3976   20045 49 0F 
3977   20047             
3978   20047 40 00       enemyTimerMax:    .db     $40,0
3979   20049             
3980   20049                                        ; 1,  2,  3,  4,  5
3981   20049             
3982   20049 00 00 00 00 bonusBoard:     .db        $00,$00,$00,$00,$00,$00,$00,$00,$00, $F0
3982   2004D 00 00 00 00 
3982   20051 00 F0 
3983   20053 40 40 40 40 bonusPeekTimer: .db        $40,$40,$40,$40,$40,$40,$40,$40,$40, $F0
3983   20057 40 40 40 40 
3983   2005B 40 F0 
3984   2005D 00 00 00 00 bonEmyKey:      .db        $00,$00,$00,$00,$00,$00,$00,$00,$00, $F0
3984   20061 00 00 00 00 
3984   20065 00 F0 
3985   20067                              ;keys:    1,  2,  3,  4,  5,  6,  7,  8,  9
3986   20067 22 1A 12 23 kTOsk:          .db        $22,$1A,$12,$23,$1B,$13,$24,$1C,$14, $F0
3986   2006B 1B 13 24 1C 
3986   2006F 14 F0 
3987   20071 01 02 03 04 bonusFrameMap:  .db        1,2,3,4,5,6,7,8,9,8,7,6,5,4,3,2,1, $F0
3987   20075 05 06 07 08 
3987   20079 09 08 07 06 
3987   2007D 05 04 03 02 
3987   20081 01 F0 
3988   20083             
3989   20083 03          heartCount:       .db       03h
3990   20084 00          bopCount:         .db       $00
3991   20085 00          bonusLvl:         .db       00h
3992   20086 19          nxtBonus:         .db       $19
3993   20087             
3994   20087                                         ;Y,X
3995   20087             _NUM_XY_BO7:      .EQU      $1618
3996   20087             _NUM_XY_BO8:      .EQU      $1634
3997   20087             _NUM_XY_BO9:      .EQU      $164F
3998   20087             _NUM_XY_BO4:      .EQU      $2118
3999   20087             _NUM_XY_BO5:      .EQU      $2134
4000   20087             _NUM_XY_BO6:      .EQU      $214F
4001   20087             _NUM_XY_BO1:      .EQU      $2C18
4002   20087             _NUM_XY_BO2:      .EQU      $2C34
4003   20087             _NUM_XY_BO3:      .EQU      $2C4F
4004   20087             
4005   20087             _BON_XY_HP1:      .EQU      $1604
4006   20087             _BON_XY_HP2:      .EQU      $2104
4007   20087             _BON_XY_HP3:      .EQU      $2D04
4008   20087             
4009   20087             _TEXT_XY_TOPBC    .EQU      $0E20        ;YX of lowest title location, on top of disp.
4010   20087             _TEXT_XY_TOPBL    .EQU      $0E06
4011   20087             _TEXT_XY_TOPMC    .EQU      $081A
4012   20087             
4013   20087             
4014   20087             _TEXT_XY_WINSTR   .EQU      $3825        ;
4015   20087             _TEXT_XY_CREDIT   .EQU      $3801        ;Denomination symbol location
4016   20087             _NUM_XY_MONEY     .EQU      $3806        ;User's balance location on disp. 
4017   20087             _NUM_XY_BOPCNT    .EQU      $3912
4018   20087             
4019   20087             _GAMESPEED_       .EQU      $02          ;factor to determine how long animations take
4020   20087             
4021   20087 30 00       count:          .db       "0",0
4022   20089 24          money_string:   .text     "$",0
4023   2008A 20 00       blank:          .db       " ",0
4024   2008C 4E 49 43 45 top_win_str1:   .db       "NICE WIN!",0
4024   20090 20 57 49 4E 
4024   20094 21 00 
4025   20096 59 4F 55 20 top_win_str2:   .text     "YOU DIRTY DOG YOU! ",0
4025   2009A 44 49 52 54 
4025   2009E 59 20 44 4F 
4025   200A2 47 20 59 4F 
4025   200A6 55 21 20 
4026   200A9 4B 45 45 50 top_win_str3:   .db       "KEEP IT UP!",0
4026   200AD 20 49 54 20 
4026   200B1 55 50 21 00 
4027   200B5 4D 45 47 41 top_win_str4:   .db       "MEGA WIN!",0
4027   200B9 20 57 49 4E 
4027   200BD 21 00 
4028   200BF             
4029   200BF 20 20 20 20 top_win_BON:    .db       "     BONUS!!!!     ",0
4029   200C3 20 42 4F 4E 
4029   200C7 55 53 21 21 
4029   200CB 21 21 20 20 
4029   200CF 20 20 20 00 
4030   200D3 20 20 20 57 top_win_BON_0:  .db       "   WHIFFFFFF#D!!   ",0
4030   200D7 48 49 46 46 
4030   200DB 46 46 46 46 
4030   200DF 23 44 21 21 
4030   200E3 20 20 20 00 
4031   200E7 20 20 20 20 top_win_BON_1:  .db       "     OUCH ! ! ! !  ",0
4031   200EB 20 4F 55 43 
4031   200EF 48 20 21 20 
4031   200F3 21 20 21 20 
4031   200F7 21 20 20 00 
4032   200FB 20 20 20 20 top_win_BON_2:  .db       "     TOO SLOW!     ",0
4032   200FF 20 54 4F 4F 
4032   20103 20 53 4C 4F 
4032   20107 57 21 20 20 
4032   2010B 20 20 20 00 
4033   2010F 20 20 20 20 top_win_BON_3:  .db       "    LEVEL UP!!!    ",0
4033   20113 4C 45 56 45 
4033   20117 4C 20 55 50 
4033   2011B 21 21 21 20 
4033   2011F 20 20 20 00 
4034   20123             
4035   20123             
4036   20123 55 73 65 20 text_top_expl:    .db       "Use keys 1-9 to SMASH EM!",0
4036   20127 6B 65 79 73 
4036   2012B 20 31 2D 39 
4036   2012F 20 74 6F 20 
4036   20133 53 4D 41 53 
4036   20137 48 20 45 4D 
4036   2013B 21 00 
4037   2013D 20 20 20 20 text_bot_expl1:   .db  "           Press ^ to begin...",0
4037   20141 20 20 20 20 
4037   20145 20 20 20 50 
4037   20149 72 65 73 73 
4037   2014D 20 5E 20 74 
4037   20151 6F 20 62 65 
4037   20155 67 69 6E 2E 
4037   20159 2E 2E 00 
4038   2015C 20 20 20 20 text_bot_expl2:   .db       "       SMASH him to begin!!",0
4038   20160 20 20 20 53 
4038   20164 4D 41 53 48 
4038   20168 20 68 69 6D 
4038   2016C 20 74 6F 20 
4038   20170 62 65 67 69 
4038   20174 6E 21 21 00 
4039   20178             
4040   20178 6C 6E 3A 00 rm_lines_str:   .db       "ln:",0
4041   2017C 2B 00       rm_lines_sym_i: .db       "+",0
4042   2017E 2D 00       rm_lines_sym_d: .db       "-",0
4043   20180 78 00       rm_multi_sym:   .db       "x",0
4044   20182             
4045   20182 20 78 20 00 bot_win_str1:   .db       " x ",0
4046   20186 54 6F 74 61 bot_win_str2:   .db       "Total Win: $",0
4046   2018A 6C 20 57 69 
4046   2018E 6E 3A 20 24 
4046   20192 00 
4047   20193             
4048   20193 50 72 65 73 bot_win_BON:    .db       "Press ^ to begin..."
4048   20197 73 20 5E 20 
4048   2019B 74 6F 20 62 
4048   2019F 65 67 69 6E 
4048   201A3 2E 2E 2E 
4049   201A6 20 20 20 20 bot_win_clear:  .db       "                                 ",0
4049   201AA 20 20 20 20 
4049   201AE 20 20 20 20 
4049   201B2 20 20 20 20 
4049   201B6 20 20 20 20 
4049   201BA 20 20 20 20 
4049   201BE 20 20 20 20 
4049   201C2 20 20 20 20 
4049   201C6 20 00 
4050   201C8 88 13       money:          .db       $88,$13
4051   201CA 88 13       new_money:      .db       $88,$13
4052   201CC 00 00       cur_win_total:  .db       $00,$00
4053   201CE                                       ;timer
4054   201CE 01 00       cflags:         .db       %00000001,0
4055   201D0             
4056   201D0                             ;         sprite   x        y                 drawArray
4057   201D0 00 00 00 00 data_p:         .db       $00,$00, $00,$00, $00,$00, $00,$00, $00,$00                ;misc address pointers     
4057   201D4 00 00 00 00 
4057   201D8 00 00 
4058   201DA 00 00       P_:             .db       $00,$00                                            ;pointer
4059   201DC 00 00       p_onscreen:     .db       $00,$00
4060   201DE A4 44       activemem:      .db       $A4,$44
4061   201E0                                   
4062   201E0             ratio_table:              ;F   Q    K    A    Che  Coi  Thu  Bon   
4063   201E0 28 5A 80 A4                 .db       $28, $5A, $80, $A4, $C3, $DF, $F3, $FF
4063   201E4 C3 DF F3 FF 
4064   201E8             
4065   201E8             ;symbol
4066   201E8             ;       hl*, sprite
4067   201E8             ;        16, pay
4068   201E8             ;    string, name
4069   201E8             symbols:
4070   201E8             sym_fun:
4071   201E8 01 00                   .db     %0000001,0
4072   201EA 05 00                   .db     5,0
4073   201EC 46 75 6E 00             .db     "Fun",0
4074   201F0             sym_queen:  
4075   201F0 02 00                   .db     %00000010,0
4076   201F2 0A 00                   .db     10,0
4077   201F4 51 75 65 65             .db     "Queen",0
4077   201F8 6E 00 
4078   201FA             sym_king:
4079   201FA 03 00                   .db     %00000011,0
4080   201FC 0F 00                   .db     15,0
4081   201FE 4B 69 6E 67             .db     "King",0  
4081   20202 00 
4082   20203             sym_ace:
4083   20203 04 00                   .db     %00000100,0
4084   20205 14 00                   .db     20,0
4085   20207 41 63 65 00             .db     "Ace",0
4086   2020B             sym_cherry:
4087   2020B 05 00                   .db     %00000101,0
4088   2020D 19 00                   .db     25,0
4089   2020F 43 68 65 72             .db     "Cherry",0
4089   20213 72 79 00 
4090   20216             sym_coin:
4091   20216 07 00                   .db     %00000111,0
4092   20218 1E 00                   .db     30,0
4093   2021A 43 6F 69 6E             .db     "Coin",0
4093   2021E 00 
4094   2021F             sym_thunder:
4095   2021F 07 00                   .db     %00000111,0
4096   20221 28 00                   .db     40,0
4097   20223 54 68 75 6E             .db     "Thunder",0
4097   20227 64 65 72 00 
4098   2022B             sym_hourglass:
4099   2022B 0F 00                   .db     %00001111,0
4100   2022D 32 00                   .db     50,0
4101   2022F 48 6F 75 72             .db     "Hourglass",0
4101   20233 67 6C 61 73 
4101   20237 73 00 
4102   20239             sym_bonus:
4103   20239 1F 00                   .db     %00011111,0
4104   2023B 64 00                   .db     100,0
4105   2023D 42 4F 4E 55             .db     "BONUS",0
4105   20241 53 00 
4106   20243             ;
4107   20243             ;------SYMBOL ENUMS
4108   20243                                ;    Q, K, A, C,Co,Th,Hr,Bo 
4109   20243 00 00 08 12 sym_o:      .db     0,0,8,18,27,35,46,55,67,81,0
4109   20247 1B 23 2E 37 
4109   2024B 43 51 00 
4110   2024E             
4111   2024E             fun:        .equ    0
4112   2024E             queen:      .equ    8
4113   2024E             king:       .equ    18
4114   2024E             ace:        .equ    27
4115   2024E             cherry:     .equ    35
4116   2024E             coin:       .equ    46
4117   2024E             thunder:    .equ    55
4118   2024E             hourglass:  .equ    64
4119   2024E             bonus:      .equ    78
4120   2024E             
4121   2024E             ;-------NAME ENUM.NAME OFFSET
4122   2024E             _name:      .equ    4
4123   2024E             _PAY:       .equ    2
4124   2024E             OFFSET:     .equ    6
4125   2024E             
4126   2024E AA AA       rng_seed:       .db     $AA,$AA
4127   20250             slot_sprites:                         ;19EBC
4128   20250 00                          .db     %00000000
4129   20251 00                          .db     %00000000
4130   20252 00                          .db     %00000000
4131   20253 38                          .db     %00111000
4132   20254 38                          .db     %00111000
4133   20255 00                          .db     %00000000
4134   20256 00                          .db     %00000000
4135   20257 00                          .db     %00000000
4136   20258             
4137   20258 FF                          .db     %11111111
4138   20259 81                          .db     %10000001
4139   2025A 9F                          .db     %10011111
4140   2025B 9F                          .db     %10011111
4141   2025C 83                          .db     %10000011
4142   2025D 9F                          .db     %10011111
4143   2025E 9F                          .db     %10011111
4144   2025F FF                          .db     %11111111
4145   20260             
4146   20260 7E                          .db     %01111110
4147   20261 FF                          .db     %11111111
4148   20262 C3                          .db     %11000011
4149   20263 C3                          .db     %11000011
4150   20264 C3                          .db     %11000011
4151   20265 E3                          .db     %11100011
4152   20266 7C                          .db     %01111100
4153   20267 1F                          .db     %00011111
4154   20268             
4155   20268 C7                          .db     %11000111
4156   20269 C6                          .db     %11000110
4157   2026A CC                          .db     %11001100
4158   2026B F8                          .db     %11111000
4159   2026C F8                          .db     %11111000
4160   2026D CC                          .db     %11001100
4161   2026E C6                          .db     %11000110
4162   2026F C7                          .db     %11000111
4163   20270             
4164   20270 18                          .db     %00011000
4165   20271 3C                          .db     %00111100
4166   20272 66                          .db     %01100110
4167   20273 C3                          .db     %11000011
4168   20274 FF                          .db     %11111111
4169   20275 FF                          .db     %11111111
4170   20276 C3                          .db     %11000011
4171   20277 C3                          .db     %11000011
4172   20278             
4173   20278 10                          .db     %00010000
4174   20279 08                          .db     %00001000
4175   2027A 08                          .db     %00001000
4176   2027B 73                          .db     %01110011
4177   2027C FD                          .db     %11111101
4178   2027D FD                          .db     %11111101
4179   2027E F9                          .db     %11111001
4180   2027F 7E                          .db     %01111110
4181   20280                     
4182   20280 3C                          .db     %00111100
4183   20281 5E                          .db     %01011110
4184   20282 AF                          .db     %10101111
4185   20283 A7                          .db     %10100111
4186   20284 A7                          .db     %10100111
4187   20285 A7                          .db     %10100111
4188   20286 4E                          .db     %01001110
4189   20287 3C                          .db     %00111100
4190   20288             
4191   20288 E7                          .db     %11100111
4192   20289 33                          .db     %00110011
4193   2028A 99                          .db     %10011001
4194   2028B CC                          .db     %11001100
4195   2028C 66                          .db     %01100110
4196   2028D 33                          .db     %00110011
4197   2028E 19                          .db     %00011001
4198   2028F C6                          .db     %11000110 
4199   20290             
4200   20290 FF                          .db     %11111111
4201   20291 FF                          .db     %11111111
4202   20292 42                          .db     %01000010
4203   20293 2C                          .db     %00101100
4204   20294 34                          .db     %00110100
4205   20295 56                          .db     %01010110
4206   20296 FF                          .db     %11111111
4207   20297 FF                          .db     %11111111
4208   20298             
4209   20298             bonus_symbol:                               ;16x10
4210   20298 7F FE                       .db     $7F, $FE
4211   2029A FF FF                       .db     $FF, $FF
4212   2029C FF FF                       .db     $FF, $FF
4213   2029E FF FF                       .db     $FF, $FF
4214   202A0 FF FF                       .db     $FF, $FF
4215   202A2 FF FF                       .db     $FF, $FF
4216   202A4 FF FF                       .db     $FF, $FF
4217   202A6 FF FF                       .db     $FF, $FF
4218   202A8 FF FF                       .db     $FF, $FF
4219   202AA 7F FE                       .db     $7F, $FE
4220   202AC                             
4221   202AC             
4222   202AC             
4223   202AC FF                          .db     %11111111
4224   202AD A9                          .db     %10101001
4225   202AE 95                          .db     %10010101
4226   202AF A9                          .db     %10101001
4227   202B0 95                          .db     %10010101
4228   202B1 A9                          .db     %10101001
4229   202B2 95                          .db     %10010101
4230   202B3 FF                          .db     %11111111
4231   202B4             
4232   202B4 7C                          .db     %01111100
4233   202B5 78                          .db     %01111000
4234   202B6 78                          .db     %01111000
4235   202B7 60                          .db     %01100000
4236   202B8 70                          .db     %01110000
4237   202B9 F0                          .db     %11110000
4238   202BA 48                          .db     %01001000
4239   202BB 46                          .db     %01000110
4240   202BC             
4241   202BC 3E                          .db     %00111110
4242   202BD FE                          .db     %11111110
4243   202BE 3E                          .db     %00111110
4244   202BF 7C                          .db     %01111100
4245   202C0 FE                          .db     %11111110
4246   202C1 7C                          .db     %01111100
4247   202C2 3C                          .db     %00111100
4248   202C3 3C                          .db     %00111100
4249   202C4             
4250   202C4                             ;.db     %00000001
4251   202C4             
4252   202C4             CPYRGHT:
4253   202C4             
4254   202C4 7C                          .db     %01111100
4255   202C5 1E                          .db     %00011110
4256   202C6 20                          .db     %00100000
4257   202C7 50                          .db     %01010000
4258   202C8 55                          .db     %01010101
4259   202C9 26                          .db     %00100110
4260   202CA 58                          .db     %01011000
4261   202CB FC                          .db     %11111100
4262   202CC             
4263   202CC E9                          .db     %11101001
4264   202CD 39                          .db     %00111001
4265   202CE 48                          .db     %01001000
4266   202CF C4                          .db     %11000100
4267   202D0 44                          .db     %01000100
4268   202D1 28                          .db     %00101000
4269   202D2 14                          .db     %00010100
4270   202D3 7E                          .db     %01111110
4271   202D4             
4272   202D4 00                          .db     %00000000
4273   202D5 73                          .db     %01110011
4274   202D6 85                          .db     %10000101
4275   202D7 45                          .db     %01000101
4276   202D8 27                          .db     %00100111
4277   202D9 15                          .db     %00010101
4278   202DA 15                          .db     %00010101
4279   202DB E5                          .db     %11100101
4280   202DC             
4281   202DC             _8x8_on:        
4282   202DC FF                          .db     %11111111
4283   202DD FF                          .db     %11111111
4284   202DE FF                          .db     %11111111
4285   202DF FF                          .db     %11111111
4286   202E0 FF                          .db     %11111111
4287   202E1 FF                          .db     %11111111
4288   202E2 FF                          .db     %11111111
4289   202E3 FF                          .db     %11111111
4290   202E4             _8x8_off:
4291   202E4 00                          .db     %00000000
4292   202E5 00                          .db     %00000000
4293   202E6 00                          .db     %00000000
4294   202E7 00                          .db     %00000000
4295   202E8 00                          .db     %00000000
4296   202E9 00                          .db     %00000000
4297   202EA 00                          .db     %00000000
4298   202EB 00                          .db     %00000000
4299   202EC             _8x16_on:
4300   202EC FF FF                       .db     %11111111,%11111111
4301   202EE FF FF                       .db     %11111111,%11111111
4302   202F0 FF FF                       .db     %11111111,%11111111
4303   202F2 FF FF                       .db     %11111111,%11111111
4304   202F4 FF FF                       .db     %11111111,%11111111
4305   202F6 FF FF                       .db     %11111111,%11111111
4306   202F8 FF FF                       .db     %11111111,%11111111
4307   202FA FF FF                       .db     %11111111,%11111111
4308   202FC             
4309   202FC             
4310   202FC             _10x16_off:  
4311   202FC 00 00 00 00     .db  $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
4311   20300 00 00 00 00 
4311   20304 00 00 00 00 
4311   20308 00 00 00 00 
4311   2030C 00 00 00 00 
4312   20310             _xxBonusBox:
4313   20310             
4314   20310             _8x16_off:        
4315   20310 00 00                       .db     %00000000,%00000000
4316   20312 00 00                       .db     %00000000,%00000000
4317   20314 00 00                       .db     %00000000,%00000000
4318   20316 00 00                       .db     %00000000,%00000000
4319   20318 00 00                       .db     %00000000,%00000000
4320   2031A 00 00                       .db     %00000000,%00000000
4321   2031C 00 00                       .db     %00000000,%00000000
4322   2031E 00 00                       .db     %00000000,%00000000
4323   20320             
4324   20320             
4325   20320             minimap:        
4326   20320 80 00                       .db     %10000000,%00000000
4327   20322 80 00                       .db     %10000000,%00000000
4328   20324 80 00                       .db     %10000000,%00000000
4329   20326 FF FF                       .db     %11111111,%11111111
4330   20328 80 00                       .db     %10000000,%00000000
4331   2032A 80 00                       .db     %10000000,%00000000
4332   2032C 80 00                       .db     %10000000,%00000000
4333   2032E FF FF                       .db     %11111111,%11111111
4334   20330                             
4335   20330 00 00                       .db     %00000000,%00000000
4336   20332 7F FF                       .db     %01111111,%11111111
4337   20334 00 00                       .db     %00000000,%00000000
4338   20336 00 00                       .db     %00000000,%00000000
4339   20338 00 00                       .db     %00000000,%00000000
4340   2033A 00 00                       .db     %00000000,%00000000
4341   2033C 00 00                       .db     %00000000,%00000000
4342   2033E 00 00                       .db     %00000000,%00000000
4343   20340             
4344   20340 00 00                       .db     %00000000,%00000000
4345   20342 00 00                       .db     %00000000,%00000000
4346   20344 00 00                       .db     %00000000,%00000000
4347   20346 00 00                       .db     %00000000,%00000000
4348   20348 00 00                       .db     %00000000,%00000000
4349   2034A 7F FF                       .db     %01111111,%11111111
4350   2034C 00 00                       .db     %00000000,%00000000
4351   2034E 00 00                       .db     %00000000,%00000000
4352   20350             
4353   20350 00 00                       .db     %00000000,%00000000
4354   20352 00 00                       .db     %00000000,%00000000
4355   20354 20 08                       .db     %00100000,%00001000
4356   20356 00 00                       .db     %00000000,%00000000
4357   20358 08 20                       .db     %00001000,%00100000
4358   2035A 00 00                       .db     %00000000,%00000000
4359   2035C 02 80                       .db     %00000010,%10000000
4360   2035E 00 00                       .db     %00000000,%00000000
4361   20360             
4362   20360 00 00                       .db     %00000000,%00000000
4363   20362 00 00                       .db     %00000000,%00000000
4364   20364 02 80                       .db     %00000010,%10000000
4365   20366 00 00                       .db     %00000000,%00000000
4366   20368 00 00                       .db     %00000000,%00000000
4367   2036A 00 00                       .db     %00000000,%00000000
4368   2036C 20 08                       .db     %00100000,%00001000
4369   2036E 00 00                       .db     %00000000,%00000000
4370   20370             
4371   20370 00 01                       .db     %00000000,%00000001
4372   20372 03 80                       .db     %00000011,%10000000
4373   20374 5C 77                       .db     %01011100,%01110111
4374   20376 00 00                       .db     %00000000,%00000000
4375   20378 01 00                       .db     %00000001,%00000000
4376   2037A 00 00                       .db     %00000000,%00000000
4377   2037C 00 00                       .db     %00000000,%00000000
4378   2037E 00 00                       .db     %00000000,%00000000
4379   20380             
4380   20380 00 00                       .db     %00000000,%00000000
4381   20382 00 00                       .db     %00000000,%00000000
4382   20384 00 00                       .db     %00000000,%00000000
4383   20386 00 00                       .db     %00000000,%00000000
4384   20388 00 00                       .db     %00000000,%00000000
4385   2038A 01 00                       .db     %00000001,%00000000
4386   2038C 5E F7                       .db     %01011110,%11110111
4387   2038E 00 00                       .db     %00000000,%00000000
4388   20390             
4389   20390              
4390   20390             
4391   20390 5F 7C                       .db     %01011111,%01111100
4392   20392 03 80                       .db     %00000011,%10000000
4393   20394 10 44                       .db     %00010000,%01000100
4394   20396 00 00                       .db     %00000000,%00000000
4395   20398 7C F7                       .db     %01111100,%11110111
4396   2039A 01 00                       .db     %00000001,%00000000
4397   2039C 07 90                       .db     %00000111,%10010000
4398   2039E 00 00                       .db     %00000000,%00000000                   
4399   203A0             
4400   203A0 08 20                       .db     %00001000,%00100000
4401   203A2 00 00                       .db     %00000000,%00000000
4402   203A4 04 10                       .db     %00000100,%00010000
4403   203A6 00 00                       .db     %00000000,%00000000
4404   203A8 20 80                       .db     %00100000,%10000000
4405   203AA 00 00                       .db     %00000000,%00000000
4406   203AC 41 04                       .db     %01000001,%00000100
4407   203AE 00 00                       .db     %00000000,%00000000      
4408   203B0             
4409   203B0                             
4410   203B0             win_box:                ;16x10
4411   203B0 FF FF                       .db     $FF, $FF
4412   203B2 FF FF                       .db     $FF, $FF
4413   203B4 FF FF                       .db     $FF, $FF
4414   203B6 FF FF                       .db     $FF, $FF
4415   203B8 FF FF                       .db     $FF, $FF
4416   203BA FF FF                       .db     $FF, $FF
4417   203BC FF FF                       .db     $FF, $FF
4418   203BE FF FF                       .db     $FF, $FF
4419   203C0 FF FF                       .db     $FF, $FF
4420   203C2 FF FF                       .db     $FF, $FF
4421   203C4             
4422   203C4             
4423   203C4             bonus_enemies:
4424   203C4             bonus_enemy1:
4425   203C4 00                          .db     %00000000    
4426   203C5 28                          .db     %00101000
4427   203C6 5A                          .db     %01011010
4428   203C7 A5                          .db     %10100101
4429   203C8 A9                          .db     %10101001
4430   203C9 81                          .db     %10000001
4431   203CA 91                          .db     %10010001
4432   203CB 83                          .db     %10000011
4433   203CC             
4434   203CC             bonus_enemy2:
4435   203CC 10                          .db     %00010000 
4436   203CD 38                          .db     %00111000   
4437   203CE 7C                          .db     %01111100
4438   203CF FE                          .db     %11111110
4439   203D0 ED                          .db     %11101101
4440   203D1 CC                          .db     %11001100 
4441   203D2 BF                          .db     %10111111
4442   203D3 BF                          .db     %10111111
4443   203D4             
4444   203D4             
4445   203D4             bonus_hammer1:   
4446   203D4 7F FC                       .db     %01111111,%11111100
4447   203D6 60 14                       .db     %01100000,%00010100
4448   203D8 60 14                       .db     %01100000,%00010100
4449   203DA 60 14                       .db     %01100000,%00010100
4450   203DC 7E FC                       .db     %01111110,%11111100
4451   203DE 01 80                       .db     %00000001,%10000000
4452   203E0 01 80                       .db     %00000001,%10000000
4453   203E2 01 80                       .db     %00000001,%10000000
4454   203E4 01 80                       .db     %00000001,%10000000
4455   203E6 01 80                       .db     %00000001,%10000000
4456   203E8 00 00                       .db     %00000000,%00000000
4457   203EA 00 00                       .db     %00000000,%00000000
4458   203EC             bonus_hammer2:   
4459   203EC 01 00                       .db     %00000001,%00000000
4460   203EE 03 80                       .db     %00000011,%10000000
4461   203F0 07 C0                       .db     %00000111,%11000000
4462   203F2 0C E0                       .db     %00001100,%11100000
4463   203F4 18 30                       .db     %00011000,%00110000
4464   203F6 08 38                       .db     %00001000,%00111000
4465   203F8 0C 1C                       .db     %00001100,%00011100
4466   203FA 0A 0E                       .db     %00001010,%00001110
4467   203FC 15 17                       .db     %00010101,%00010111
4468   203FE 28 A6                       .db     %00101000,%10100110
4469   20400 60 6C                       .db     %01100000,%01101100
4470   20402 C0 30                       .db     %11000000,%00110000 
4471   20404             bonus_hammer3:   
4472   20404 00 00                       .db     %00000000,%00000000
4473   20406 07 FC                       .db     %00000111,%11111100
4474   20408 03 F8                       .db     %00000011,%11111000
4475   2040A 02 08                       .db     %00000010,%00001000
4476   2040C FE 08                       .db     %11111110,%00001000
4477   2040E FE 08                       .db     %11111110,%00001000
4478   20410 00 08                       .db     %00000000,%00001000
4479   20412 03 F8                       .db     %00000011,%11111000
4480   20414 03 F8                       .db     %00000011,%11111000
4481   20416 07 FC                       .db     %00000111,%11111100
4482   20418 02 00                       .db     %0000010,%100000000
4483   2041A 0F 98                       .db     %0001111,%010011000
4484   2041C 40 24                       .db     %01000000,%00100100
4485   2041E             
4486   2041E             bonus_hammer4:
4487   2041E 00 00                       .db     %00000000,%00000000
4488   20420 00 00                       .db     %00000000,%00000000
4489   20422 07 FC                       .db     %00000111,%11111100
4490   20424 03 F8                       .db     %00000011,%11111000
4491   20426 02 08                       .db     %00000010,%00001000
4492   20428 FE 08                       .db     %11111110,%00001000
4493   2042A FE 08                       .db     %11111110,%00001000
4494   2042C 00 08                       .db     %00000000,%00001000
4495   2042E 83 F9                       .db     %10000011,%11111001
4496   20430 03 F8                       .db     %00000011,%11111000
4497   20432 87 FC                       .db     %10000111,%11111100
4498   20434 22 F1                       .db     %0100010,%111110001
4499   20436 7F FF                       .db     %1111111,%011111111
4500   20438             
4501   20438             bonus_hammer5:   
4502   20438 01 00                       .db     %00000001,%00000000
4503   2043A 03 80                       .db     %00000011,%10000000
4504   2043C 07 C0                       .db     %00000111,%11000000
4505   2043E 0C E0                       .db     %00001100,%11100000
4506   20440 18 30                       .db     %00011000,%00110000
4507   20442 08 38                       .db     %00001000,%00111000
4508   20444 0C 1C                       .db     %00001100,%00011100
4509   20446 0A 0E                       .db     %00001010,%00001110
4510   20448 15 17                       .db     %00010101,%00010111
4511   2044A 28 A6                       .db     %00101000,%10100110
4512   2044C 60 6C                       .db     %01100000,%01101100
4513   2044E C0 30                       .db     %11000000,%00110000 
4514   20450 3F F8                       .db     %00111111,%11111000
4515   20452 FF FF                       .db     %11111111,%11111111
4516   20454             
4517   20454             bonus_hammer6:   
4518   20454 3F FC                       .db     %0111111,%111111100
4519   20456 40 1C                       .db     %01000000,%00011100
4520   20458 40 1C                       .db     %01000000,%00011100
4521   2045A 40 1C                       .db     %01000000,%00011100
4522   2045C 2F FC                       .db     %0101111,%111111100
4523   2045E 7F FC                       .db     %01111111,%11111100
4524   20460 06 00                       .db     %00000110,%00000000
4525   20462 06 00                       .db     %00000110,%00000000
4526   20464 06 00                       .db     %00000110,%00000000
4527   20466 06 00                       .db     %00000110,%00000000
4528   20468 01 F0                       .db     %00000001,%11110000
4529   2046A 03 FF                       .db     %00000011,%11111111
4530   2046C             
4531   2046C             bonus_hammer7:
4532   2046C 00 00                       .db     %00000000,%00000000
4533   2046E 00 00                       .db     %00000000,%00000000
4534   20470 00 00                       .db     %00000000,%00000000
4535   20472 00 00                       .db     %00000000,%00000000
4536   20474 00 00                       .db     %00000000,%00000000
4537   20476 00 00                       .db     %00000000,%00000000
4538   20478 00 00                       .db     %00000000,%00000000
4539   2047A 00 00                       .db     %00000000,%00000000
4540   2047C 00 00                       .db     %00000000,%00000000
4541   2047E 00 00                       .db     %00000000,%00000000
4542   20480 3F FE                       .db     %00111111,%11111110
4543   20482 FF FE                       .db     %11111111,%11111110
4544   20484             bonus_hammer8:
4545   20484 00 00                       .db     %00000000,%00000000
4546   20486 00 00                       .db     %00000000,%00000000
4547   20488 00 00                       .db     %00000000,%00000000
4548   2048A 00 00                       .db     %00000000,%00000000
4549   2048C 00 00                       .db     %00000000,%00000000
4550   2048E 00 00                       .db     %00000000,%00000000
4551   20490 00 00                       .db     %00000000,%00000000
4552   20492 00 00                       .db     %00000000,%00000000
4553   20494 00 00                       .db     %00000000,%00000000
4554   20496 00 00                       .db     %00000000,%00000000
4555   20498 00 00                       .db     %00000000,%00000000
4556   2049A FF FE                       .db     %11111111,%11111110
4557   2049C             
4558   2049C             bonus_splat1:   
4559   2049C 00 00                       .db     %00000000,%00000000
4560   2049E 6D 40                       .db     %01101101,%01000000
4561   204A0 8A 80                       .db     %10001010,%10000000
4562   204A2 61 80                       .db     %01100001,%10000000
4563   204A4 9E 80                       .db     %10011110,%10000000
4564   204A6 5E 40                       .db     %01011110,%01000000
4565   204A8 5D A0                       .db     %01011101,%10100000
4566   204AA AB 80                       .db     %10101011,%10000000
4567   204AC 5E 40                       .db     %01011110,%01000000
4568   204AE             
4569   204AE             bonus_splat2:   
4570   204AE C0 60                       .db     %11000000,%01100000
4571   204B0 00 08                       .db     %00000000,%00001000
4572   204B2 60 A0                       .db     %01100000,%10100000
4573   204B4 02 50                       .db     %00000010,%01010000
4574   204B6 8D A8                       .db     %10001101,%10101000
4575   204B8 99 E0                       .db     %10011001,%11100000
4576   204BA 4C 30                       .db     %01001100,%00110000
4577   204BC 07 F0                       .db     %00000111,%11110000
4578   204BE 0F F8                       .db     %00001111,%11111000
4579   204C0             
4580   204C0             bonus_heart_on:    
4581   204C0 00                          .db     %00000000  
4582   204C1 6C                          .db     %01101100
4583   204C2 FA                          .db     %11111010
4584   204C3 FA                          .db     %11111010
4585   204C4 FA                          .db     %11111010
4586   204C5 74                          .db     %01110100
4587   204C6 38                          .db     %00111000
4588   204C7 10                          .db     %00010000
4589   204C8             
4590   204C8             bonus_heart_off:
4591   204C8 00                          .db     %00000000  
4592   204C9 00                          .db     %00000000
4593   204CA 68                          .db     %01101000
4594   204CB 78                          .db     %01111000
4595   204CC 78                          .db     %01111000
4596   204CD 30                          .db     %00110000
4597   204CE 10                          .db     %00010000
4598   204CF 00                          .db     %00000000
4599   204D0                           
4600   204D0             
4601   204D0             spin_anim:           
4602   204D0 00                          .db     %00000000
4603   204D1 00                          .db     %00000000
4604   204D2 7E                          .db     %01111110
4605   204D3 81                          .db     %10000001
4606   204D4 81                          .db     %10000001
4607   204D5 7E                          .db     %01111110
4608   204D6 00                          .db     %00000000
4609   204D7 00                          .db     %00000000
4610   204D8 00                          .db     %00000000
4611   204D9 66                          .db     %01100110
4612   204DA 00                          .db     %00000000
4613   204DB 7E                          .db     %01111110
4614   204DC 7E                          .db     %01111110
4615   204DD 24                          .db     %00100100
4616   204DE 24                          .db     %00100100
4617   204DF 00                          .db     %00000000
4618   204E0             
4619   204E0             ;tilogo:
4620   204E0             ;   .db    $00, $00, $00, $00, $00, $FE, $00, $00, $00, $00, $00, $00
4621   204E0             ;   .db    $00, $00, $00, $00, $00, $FE, $00, $00, $00, $00, $00, $00
4622   204E0             ;    .db    $00, $00, $00, $00, $00, $FE, $30, $00, $00, $00, $00, $00
4623   204E0             ;    .db    $00, $00, $00, $00, $00, $FE, $78, $00, $00, $00, $00, $00
4624   204E0             ;    .db    $00, $00, $00, $00, $00, $FF, $30, $00, $00, $00, $00, $00
4625   204E0             ;    .db    $00, $00, $00, $00, $00, $FF, $07, $E0, $00, $00, $00, $00
4626   204E0             ;    .db    $00, $00, $00, $00, $00, $FF, $77, $E0, $00, $00, $00, $00
4627   204E0             ;    .db    $00, $00, $00, $00, $00, $FF, $77, $E0, $00, $00, $00, $00
4628   204E0             ;    .db    $00, $00, $00, $00, $00, $F8, $61, $E0, $00, $00, $00, $00
4629   204E0             ;    .db    $00, $00, $00, $00, $1F, $F8, $E3, $E0, $00, $00, $00, $00
4630   204E0             ;    .db    $00, $00, $00, $00, $7F, $F8, $E3, $F0, $00, $00, $00, $00
4631   204E0             ;    .db    $00, $00, $00, $00, $7F, $FE, $EF, $F0, $00, $00, $00, $00
4632   204E0             ;    .db    $00, $00, $00, $00, $3F, $FE, $CF, $F0, $00, $00, $00, $00
4633   204E0             ;    .db    $00, $00, $00, $00, $1F, $FD, $DF, $F0, $00, $00, $00, $00
4634   204E0             ;    .db    $00, $00, $00, $00, $0F, $FD, $DF, $F0, $00, $00, $00, $00
4635   204E0             ;    .db    $00, $00, $00, $00, $07, $FC, $1F, $F0, $00, $00, $00, $00
4636   204E0             ;    .db    $00, $00, $00, $00, $07, $9C, $0F, $C0, $00, $00, $00, $00
4637   204E0             ;    .db    $00, $00, $00, $00, $03, $0E, $0F, $00, $00, $00, $00, $00
4638   204E0             ;    .db    $00, $00, $00, $00, $00, $0F, $FE, $00, $00, $00, $00, $00
4639   204E0             ;    .db    $00, $00, $00, $00, $00, $07, $F8, $00, $00, $00, $00, $00
4640   204E0             ;    .db    $00, $00, $00, $00, $00, $07, $F8, $00, $00, $00, $00, $00
4641   204E0             ;    .db    $00, $00, $00, $00, $00, $03, $F0, $00, $00, $00, $00, $00
4642   204E0             ;    .db    $00, $00, $00, $00, $00, $03, $F0, $00, $00, $00, $00, $00
4643   204E0             ;    .db    $00, $00, $00, $00, $00, $01, $F0, $00, $00, $00, $00, $00
4644   204E0             ;    .db    $00, $00, $00, $00, $00, $00, $F8, $00, $00, $00, $00, $00
4645   204E0             
4646   204E0             
4647   204E0             
4648   204E0 08 05 05 07 draw_one_reel:  .db    $08, $05, $05, $07, $08,    $0F
4648   204E4 08 0F 
4649   204E6             
4650   204E6             
4651   204E6             
4652   204E6             slot_fin_reel_state:
4653   204E6             slot_chk_win_state:
4654   204E6 02 02 02 02     .db    $02, $02, $02, $02, $02
4654   204EA 02 
4655   204EB 02 02 02 02     .db    $02, $02, $02, $02, $02    
4655   204EF 02 
4656   204F0 02 02 02 02     .db    $02, $02, $02, $02, $02
4656   204F4 02 
4657   204F5 02 02 02 02     .db    $02, $02, $02, $02, $02   
4657   204F9 02 
4658   204FA 02 02 02 02     .db    $02, $02, $02, $02, $02,    $0F
4658   204FE 02 0F 
4659   20500             ;Used to retain board state between poweroffs.
4660   20500             slot_saved_reel_state:
4661   20500 02 02 02 02     .db    $02, $02, $02, $02, $02
4661   20504 02 
4662   20505 02 02 02 02     .db    $02, $02, $02, $02, $02    
4662   20509 02 
4663   2050A 02 02 02 02     .db    $02, $02, $02, $02, $02
4663   2050E 02 
4664   2050F 02 02 02 02     .db    $02, $02, $02, $02, $02   
4664   20513 02 
4665   20514 02 02 02 02     .db    $02, $02, $02, $02, $02,    $0F
4665   20518 02 0F 
4666   2051A             slot_cur_reel_state:
4667   2051A 02 02 02 02     .db    $02, $02, $02, $02, $02
4667   2051E 02 
4668   2051F 02 02 02 02     .db    $02, $02, $02, $02, $02    
4668   20523 02 
4669   20524 02 02 02 02     .db    $02, $02, $02, $02, $02
4669   20528 02 
4670   20529 02 02 02 02     .db    $02, $02, $02, $02, $02   
4670   2052D 02 
4671   2052E 02 02 02 02     .db    $02, $02, $02, $02, $02,    $0F
4671   20532 02 0F 
4672   20534             win_anim_array:
4673   20534 00 00 00 00     .db    $00, $00, $00, $00, $00
4673   20538 00 
4674   20539 00 00 00 00     .db    $00, $00, $00, $00, $00 
4674   2053D 00 
4675   2053E 00 00 00 00     .db    $00, $00, $00, $00, $00
4675   20542 00 
4676   20543 00 00 00 00     .db    $00, $00, $00, $00, $00   
4676   20547 00 
4677   20548 00 00 00 00     .db    $00, $00, $00, $00, $00,    $0F
4677   2054C 00 0F 
4678   2054E             draw_at_X:
4679   2054E 04 04 04 04     .db    $04, $04, $04, $04, $04
4679   20552 04 
4680   20553 14 14 14 14     .db    $14, $14, $14, $14, $14
4680   20557 14 
4681   20558 24 24 24 24     .db    $24, $24, $24, $24, $24
4681   2055C 24 
4682   2055D 34 34 34 34     .db    $34, $34, $34, $34, $34
4682   20561 34 
4683   20562 44 44 44 44     .db    $44, $44, $44, $44, $44,    $0F
4683   20566 44 0F 
4684   20568             draw_at_Y:
4685   20568 03 0D 17 21     .db    $03, $0D, $17, $21, $2B
4685   2056C 2B 
4686   2056D 03 0D 17 21     .db    $03, $0D, $17, $21, $2B     
4686   20571 2B 
4687   20572 03 0D 17 21     .db    $03, $0D, $17, $21, $2B
4687   20576 2B 
4688   20577 03 0D 17 21     .db    $03, $0D, $17, $21, $2B
4688   2057B 2B 
4689   2057C 03 0D 17 21     .db    $03, $0D, $17, $21, $2B,    $0F
4689   20580 2B 0F 
4690   20582             
4691   20582             
4692   20582             ;Offsets to get to to the parallel positions from CUR_STATE
4693   20582                                       
4694   20582             ;147AD
4695   20582             ;258BE
4696   20582             ;369CF
4697   20582             draw_w_h:
4698   20582 08 01           .db    $08, $01 
4699   20584             slot_win_states:      
4700   20584                         ;$[ln#, xInArow, symID, winTot8,16],...
4701   20584 0F 0F 0F 0F     .db       $0F, $0F, $0F, $0F, $0F, $0F
4701   20588 0F 0F 
4702   2058A 0F 0F 0F 0F     .db       $0F, $0F, $0F, $0F, $0F, $0F
4702   2058E 0F 0F 
4703   20590 0F 0F 0F 0F     .db       $0F, $0F, $0F, $0F, $0F, $0F
4703   20594 0F 0F 
4704   20596 0F 0F 0F 0F     .db       $0F, $0F, $0F, $0F, $0F, $0F
4704   2059A 0F 0F 
4705   2059C 0F 0F 0F 0F     .db       $0F, $0F, $0F, $0F, $0F, $0F
4705   205A0 0F 0F 
4706   205A2 0F 0F 0F 0F     .db       $0F, $0F, $0F, $0F, $0F, $0F
4706   205A6 0F 0F 
4707   205A8 0F 0F 0F 0F     .db       $0F, $0F, $0F, $0F, $0F, $0F
4707   205AC 0F 0F 
4708   205AE 0F 0F 0F 0F     .db       $0F, $0F, $0F, $0F, $0F, $0F
4708   205B2 0F 0F 
4709   205B4 0F 0F 0F 0F     .db       $0F, $0F, $0F, $0F, $0F, $0F, 0
4709   205B8 0F 0F 00 
4710   205BB             
4711   205BB             ;01,06,0B,10,15
4712   205BB             ;02,07,0C,11,16
4713   205BB             ;--------------
4714   205BB             ;03,08,0D,12,17
4715   205BB             ;04,09,0E,13,18
4716   205BB             ;05,0A,0F,14,19
4717   205BB             
4718   205BB             ;147AD
4719   205BB             ;258BE
4720   205BB             ;369CF
4721   205BB             ;pay_rules:
4722   205BB             ;    .db    $04, $09, $0E, $13, $18, $FF       ;(16,26 -> 47,26 -> 27,26)
4723   205BB             ;    .db    $03, $08, $0D, $12, $17, $FF       ;(16,36 -> 47,36 -> 78,36)
4724   205BB             ;
4725   205BB             ;    .db    $05, $0A, $0F, $14, $19, $FF       ;(16,16 -> 47,16 -> 78,16)
4726   205BB             ;   
4727   205BB             ;    .db    $03, $09, $0F, $13, $17, $FF       ;(16,36 -> 47,16 -> 78,36)
4728   205BB             ;    .db    $05, $09, $0D, $13, $19, $FF       ;(16,16 -> 47,38 -> 78,16)
4729   205BB             ;    
4730   205BB             ;    .db    $03, $08, $0E, $12, $17, $FF       ;(16,36 -> 31,36 -> 47,26 -> 62,36 -> 78,36)
4731   205BB             ;    .db    $05, $0A, $0E, $14, $19, $FF       ;(16,16 -> 31,16 -> 47,26 -> 62,16 -> 78,16)
4732   205BB             ;
4733   205BB             ;    .db    $03, $0A, $0D, $14, $17, $FF       ;(16,36 -> 31,16 -> 47,36 -> 62,16 -> 78,36)
4734   205BB             ;    .db    $05, $08, $0F, $12, $19, $EE       ;(16,16 -> 31,36 -> 47,16 -> 62,36 -> 78,16)
4735   205BB                             ;payline
4736   205BB             
4737   205BB             pay_rules:
4738   205BB 04 09 0E 13     .db    $04, $09, $0E, $13, $18, $FF              ;pay line 1
4738   205BF 18 FF 
4739   205C1 03 08 0D 12     .db    $03, $08, $0D, $12, $17, $FF              ;         2-3
4739   205C5 17 FF 
4740   205C7             
4741   205C7 05 0A 0F 14     .db    $05, $0A, $0F, $14, $19, $FF 
4741   205CB 19 FF 
4742   205CD                
4743   205CD 03 09 0F 13     .db    $03, $09, $0F, $13, $17, $FF              ;         3-5
4743   205D1 17 FF 
4744   205D3 05 09 0D 13     .db    $05, $09, $0D, $13, $19, $FF 
4744   205D7 19 FF 
4745   205D9                 
4746   205D9 03 08 0E 12     .db    $03, $08, $0E, $12, $17, $FF              ;         5-7
4746   205DD 17 FF 
4747   205DF 05 0A 0E 14     .db    $05, $0A, $0E, $14, $19, $FF 
4747   205E3 19 FF 
4748   205E5             
4749   205E5 03 0A 0D 14     .db    $03, $0A, $0D, $14, $17, $FF              ;         8-9
4749   205E9 17 FF 
4750   205EB 05 08 0F 12     .db    $05, $08, $0F, $12, $19, $EE 
4750   205EF 19 EE 
4751   205F1             bonus_loc:
4752   205F1 FF FF FF FF     .db       $FF,$FF,$FF,$FF,$FF
4752   205F5 FF 
4753   205F6 FF FF FF FF     .db       $FF,$FF,$FF,$FF,$FF
4753   205FA FF 
4754   205FB FF FF FF FF     .db       $FF,$FF,$FF,$FF,$FF,  $EE
4754   205FF FF EE 
4755   20601             
4756   20601             
4757   20601 00 00 00 00 p_callseq:      .db  $00,$00,$00,$00,$00,$00
4757   20605 00 00 
4758   20607 00          rectMaskB1Mask: .db  $00
4759   20608             ;=============================================== 
4760   20608             ;Top-Left reel( 0Ch(+16offset),17h(+10offset) )
4761   20608             ;===============================================    
4762   20608             
4763   20608             ;---------------------------------DATA------------------------------------------------------
4764   20608             ;--------------------------------GLOBAL-----------------------------------------------------
4765   20608             LCD_HEIGHT:         .EQU            64
4766   20608             LCD_WIDTH:          .EQU            96
4767   20608             
4768   20608             ;-----------------------------QR CODE DATA-------------------------------------------------
4769   20608             
4770   20608             
4771   20608 00 00 00 00 QR_29x29_mask7:             .fill    29*29, $00
4771   2060C 00 00 00 00 
4771   20610 00 00 00 00 
4771   20614 00 00 00 00 
4771   20618 00 00 00 00 
4771   2061C 00 00 00 00 
4771   20620 00 00 00 00 
4771   20624 00 00 00 00 
4771   20628 00 00 00 00 
4771   2062C 00 00 00 00 
4771   20630 00 00 00 00 
4771   20634 00 00 00 00 
4771   20638 00 00 00 00 
4771   2063C 00 00 00 00 
4771   20640 00 00 00 00 
4771   20644 00 00 00 00 
4771   20648 00 00 00 00 
4771   2064C 00 00 00 00 
4771   20650 00 00 00 00 
4771   20654 00 00 00 00 
4771   20658 00 00 00 00 
4771   2065C 00 00 00 00 
4771   20660 00 00 00 00 
4771   20664 00 00 00 00 
4771   20668 00 00 00 00 
4771   2066C 00 00 00 00 
4771   20670 00 00 00 00 
4771   20674 00 00 00 00 
4771   20678 00 00 00 00 
4771   2067C 00 00 00 00 
4771   20680 00 00 00 00 
4771   20684 00 00 00 00 
4771   20688 00 00 00 00 
4771   2068C 00 00 00 00 
4771   20690 00 00 00 00 
4771   20694 00 00 00 00 
4771   20698 00 00 00 00 
4771   2069C 00 00 00 00 
4771   206A0 00 00 00 00 
4771   206A4 00 00 00 00 
4771   206A8 00 00 00 00 
4771   206AC 00 00 00 00 
4771   206B0 00 00 00 00 
4771   206B4 00 00 00 00 
4771   206B8 00 00 00 00 
4771   206BC 00 00 00 00 
4771   206C0 00 00 00 00 
4771   206C4 00 00 00 00 
4771   206C8 00 00 00 00 
4771   206CC 00 00 00 00 
4771   206D0 00 00 00 00 
4771   206D4 00 00 00 00 
4771   206D8 00 00 00 00 
4771   206DC 00 00 00 00 
4771   206E0 00 00 00 00 
4771   206E4 00 00 00 00 
4771   206E8 00 00 00 00 
4771   206EC 00 00 00 00 
4771   206F0 00 00 00 00 
4771   206F4 00 00 00 00 
4771   206F8 00 00 00 00 
4771   206FC 00 00 00 00 
4771   20700 00 00 00 00 
4771   20704 00 00 00 00 
4771   20708 00 00 00 00 
4771   2070C 00 00 00 00 
4771   20710 00 00 00 00 
4771   20714 00 00 00 00 
4771   20718 00 00 00 00 
4771   2071C 00 00 00 00 
4771   20720 00 00 00 00 
4771   20724 00 00 00 00 
4771   20728 00 00 00 00 
4771   2072C 00 00 00 00 
4771   20730 00 00 00 00 
4771   20734 00 00 00 00 
4771   20738 00 00 00 00 
4771   2073C 00 00 00 00 
4771   20740 00 00 00 00 
4771   20744 00 00 00 00 
4771   20748 00 00 00 00 
4771   2074C 00 00 00 00 
4771   20750 00 00 00 00 
4771   20754 00 00 00 00 
4771   20758 00 00 00 00 
4771   2075C 00 00 00 00 
4771   20760 00 00 00 00 
4771   20764 00 00 00 00 
4771   20768 00 00 00 00 
4771   2076C 00 00 00 00 
4771   20770 00 00 00 00 
4771   20774 00 00 00 00 
4771   20778 00 00 00 00 
4771   2077C 00 00 00 00 
4771   20780 00 00 00 00 
4771   20784 00 00 00 00 
4771   20788 00 00 00 00 
4771   2078C 00 00 00 00 
4771   20790 00 00 00 00 
4771   20794 00 00 00 00 
4771   20798 00 00 00 00 
4771   2079C 00 00 00 00 
4771   207A0 00 00 00 00 
4771   207A4 00 00 00 00 
4771   207A8 00 00 00 00 
4771   207AC 00 00 00 00 
4771   207B0 00 00 00 00 
4771   207B4 00 00 00 00 
4771   207B8 00 00 00 00 
4771   207BC 00 00 00 00 
4771   207C0 00 00 00 00 
4771   207C4 00 00 00 00 
4771   207C8 00 00 00 00 
4771   207CC 00 00 00 00 
4771   207D0 00 00 00 00 
4771   207D4 00 00 00 00 
4771   207D8 00 00 00 00 
4771   207DC 00 00 00 00 
4771   207E0 00 00 00 00 
4771   207E4 00 00 00 00 
4771   207E8 00 00 00 00 
4771   207EC 00 00 00 00 
4771   207F0 00 00 00 00 
4771   207F4 00 00 00 00 
4771   207F8 00 00 00 00 
4771   207FC 00 00 00 00 
4771   20800 00 00 00 00 
4771   20804 00 00 00 00 
4771   20808 00 00 00 00 
4771   2080C 00 00 00 00 
4771   20810 00 00 00 00 
4771   20814 00 00 00 00 
4771   20818 00 00 00 00 
4771   2081C 00 00 00 00 
4771   20820 00 00 00 00 
4771   20824 00 00 00 00 
4771   20828 00 00 00 00 
4771   2082C 00 00 00 00 
4771   20830 00 00 00 00 
4771   20834 00 00 00 00 
4771   20838 00 00 00 00 
4771   2083C 00 00 00 00 
4771   20840 00 00 00 00 
4771   20844 00 00 00 00 
4771   20848 00 00 00 00 
4771   2084C 00 00 00 00 
4771   20850 00 00 00 00 
4771   20854 00 00 00 00 
4771   20858 00 00 00 00 
4771   2085C 00 00 00 00 
4771   20860 00 00 00 00 
4771   20864 00 00 00 00 
4771   20868 00 00 00 00 
4771   2086C 00 00 00 00 
4771   20870 00 00 00 00 
4771   20874 00 00 00 00 
4771   20878 00 00 00 00 
4771   2087C 00 00 00 00 
4771   20880 00 00 00 00 
4771   20884 00 00 00 00 
4771   20888 00 00 00 00 
4771   2088C 00 00 00 00 
4771   20890 00 00 00 00 
4771   20894 00 00 00 00 
4771   20898 00 00 00 00 
4771   2089C 00 00 00 00 
4771   208A0 00 00 00 00 
4771   208A4 00 00 00 00 
4771   208A8 00 00 00 00 
4771   208AC 00 00 00 00 
4771   208B0 00 00 00 00 
4771   208B4 00 00 00 00 
4771   208B8 00 00 00 00 
4771   208BC 00 00 00 00 
4771   208C0 00 00 00 00 
4771   208C4 00 00 00 00 
4771   208C8 00 00 00 00 
4771   208CC 00 00 00 00 
4771   208D0 00 00 00 00 
4771   208D4 00 00 00 00 
4771   208D8 00 00 00 00 
4771   208DC 00 00 00 00 
4771   208E0 00 00 00 00 
4771   208E4 00 00 00 00 
4771   208E8 00 00 00 00 
4771   208EC 00 00 00 00 
4771   208F0 00 00 00 00 
4771   208F4 00 00 00 00 
4771   208F8 00 00 00 00 
4771   208FC 00 00 00 00 
4771   20900 00 00 00 00 
4771   20904 00 00 00 00 
4771   20908 00 00 00 00 
4771   2090C 00 00 00 00 
4771   20910 00 00 00 00 
4771   20914 00 00 00 00 
4771   20918 00 00 00 00 
4771   2091C 00 00 00 00 
4771   20920 00 00 00 00 
4771   20924 00 00 00 00 
4771   20928 00 00 00 00 
4771   2092C 00 00 00 00 
4771   20930 00 00 00 00 
4771   20934 00 00 00 00 
4771   20938 00 00 00 00 
4771   2093C 00 00 00 00 
4771   20940 00 00 00 00 
4771   20944 00 00 00 00 
4771   20948 00 00 00 00 
4771   2094C 00 00 00 00 
4771   20950 00 
4772   20951 AA          r0s0:                 .db         %10101010
4773   20952 1C          r1s0:                 .db         %00011100    
4774   20953 6D          r1f0:                 .db         %01101101 ;cy=1
4775   20954 92          r1_4s0_to_r2_5s0:     .db         %10010010 ;cy=0
4776   20955             
4777   20955             QR_29X29_BYTES:       .EQU        29*4
4778   20955             QR_ROOF:              .EQU          29
4779   20955             QR_V3L_DWORDS:        .EQU          55
4780   20955             QR_v3L_EWORDS:        .EQU          15
4781   20955             
4782   20955             ;msb, right to left, in direction
4783   20955             qr_data:           
4784   20955             ;Modes: (type, length, value)    
4785   20955                         ;4bit type selector;  0100 = Byte - Latin-1, 1 char = 8 bits
4786   20955 04          qr_data_type:         .db          %00000100
4787   20956             ;           ;length (8bits); count of NABK chars (Num,Alpha,Byte,Kanji) in Data section
4788   20956 1C          qr_data_len:          .db          %00011100 
4789   20957 68 74 74 70 qr_data_string:       .db         "https://joewing.net/projects/ti83/ion/devel.html"
4789   2095B 73 3A 2F 2F 
4789   2095F 6A 6F 65 77 
4789   20963 69 6E 67 2E 
4789   20967 6E 65 74 2F 
4789   2096B 70 72 6F 6A 
4789   2096F 65 63 74 73 
4789   20973 2F 74 69 38 
4789   20977 33 2F 69 6F 
4789   2097B 6E 2F 64 65 
4789   2097F 76 65 6C 2E 
4789   20983 68 74 6D 6C 
4790   20987 00          qr_data_transID:      .db         0  
4791   20988 00 00 00 00 qr_data_transactionSPC:   .fill     QR_V3L_DWORDS-5, $00
4791   2098C 00 00 00 00 
4791   20990 00 00 00 00 
4791   20994 00 00 00 00 
4791   20998 00 00 00 00 
4791   2099C 00 00 00 00 
4791   209A0 00 00 00 00 
4791   209A4 00 00 00 00 
4791   209A8 00 00 00 00 
4791   209AC 00 00 00 00 
4791   209B0 00 00 00 00 
4791   209B4 00 00 00 00 
4791   209B8 00 00 
4792   209BA             qr_DSpace_Message:
4793   209BA             ;0100      0000                                                                                                                  11padding
4794   209BA             ;42,A4,D7,22,E2,05,76,17,47,36,F6,E2,C2,06,36,F6,D6,52,06,86,57,26,52,02,d2,04,92,07,76,16,E7,42,07,46,f2,07,36,56,52,07,96,f7,52,e0,EC,11,EC,11,EC,11,EC,11,EC,11,EC
4795   209BA 42 A4 D7 22     .db     $42,$A4,$D7,$22,$E2,$05,$76,$17,$47,$36,$F6,$E2
4795   209BE E2 05 76 17 
4795   209C2 47 36 F6 E2 
4796   209C6 C2 06 36 F6     .db     $C2,$06,$36,$F6,$D6,$52,$06,$86,$57,$26,$52,$02
4796   209CA D6 52 06 86 
4796   209CE 57 26 52 02 
4797   209D2 D2 04 92 07     .db     $d2,$04,$92,$07,$76,$16,$E7,$42,$07,$46,$f2,$07
4797   209D6 76 16 E7 42 
4797   209DA 07 46 F2 07 
4798   209DE 36 56 52 07     .db     $36,$56,$52,$07,$96,$f7,$52,$e0 ;0 = end
4798   209E2 96 F7 52 E0 
4799   209E6 EC 11 EC 11     .db     $EC,$11,$EC,$11,$EC,$11,$EC,$11,$EC,$11,$EC   ;padding 
4799   209EA EC 11 EC 11 
4799   209EE EC 11 EC 
zslots7.z80 line 4800: Label not found: (QR_V3L_EWORDS)
4800   209F1 00          post_dfinal_0_padding:  .fill     QR_V3L_EWORDS+1, $00
4801   209F2             
zslots7.z80 line 4802: Label not found: (QR_V3L_EWORDS)
4802   209F2 00          rs_gen:                 .fill     QR_V3L_EWORDS+1, $00
zslots7.z80 line 4803: Label not found: (QR_V3L_EWORDS)
4803   209F3 00 00 00 00 rs_msg_remainder:       .fill     QR_V3L_DWORDS+QR_V3L_EWORDS+1, $00
4803   209F7 00 00 00 00 
4803   209FB 00 00 00 00 
4803   209FF 00 00 00 00 
4803   20A03 00 00 00 00 
4803   20A07 00 00 00 00 
4803   20A0B 00 00 00 00 
4803   20A0F 00 00 00 00 
4803   20A13 00 00 00 00 
4803   20A17 00 00 00 00 
4803   20A1B 00 00 00 00 
4803   20A1F 00 00 00 00 
4803   20A23 00 00 00 00 
4803   20A27 00 00 00 00 
zslots7.z80 line 4804: Label not found: (QR_V3L_EWORDS)
4804   20A2B 00 00 00 00 poly_multL1:            .fill     QR_V3L_DWORDS+QR_V3L_EWORDS, $00
4804   20A2F 00 00 00 00 
4804   20A33 00 00 00 00 
4804   20A37 00 00 00 00 
4804   20A3B 00 00 00 00 
4804   20A3F 00 00 00 00 
4804   20A43 00 00 00 00 
4804   20A47 00 00 00 00 
4804   20A4B 00 00 00 00 
4804   20A4F 00 00 00 00 
4804   20A53 00 00 00 00 
4804   20A57 00 00 00 00 
4804   20A5B 00 00 00 00 
4804   20A5F 00 00 00 
4805   20A62 01 00       poly_multL2:            .db       01,00;
4806   20A64             ;poly_multL2:            .fill     QR_V3L_DWORDS+QR_V3L_EWORDS, $00
zslots7.z80 line 4807: Label not found: (QR_V3L_EWORDS)
4807   20A64 00 00 00 00 rs_poly_result:         .fill     QR_V3L_DWORDS+QR_V3L_EWORDS, $00
4807   20A68 00 00 00 00 
4807   20A6C 00 00 00 00 
4807   20A70 00 00 00 00 
4807   20A74 00 00 00 00 
4807   20A78 00 00 00 00 
4807   20A7C 00 00 00 00 
4807   20A80 00 00 00 00 
4807   20A84 00 00 00 00 
4807   20A88 00 00 00 00 
4807   20A8C 00 00 00 00 
4807   20A90 00 00 00 00 
4807   20A94 00 00 00 00 
4807   20A98 00 00 00 
4808   20A9B             
4809   20A9B             
4810   20A9B             qr_copyzone:
4811   20A9B FF F0 00 FF     .db $FF,$F0,$00,$FF ;0 
4812   20A9F FF F0 00 FF     .db $FF,$F0,$00,$FF ;1
4813   20AA3 FF F0 00 FF     .db $FF,$F0,$00,$FF ;2
4814   20AA7 FF F0 00 FF     .db $FF,$F0,$00,$FF ;3
4815   20AAB FF F0 00 FF     .db $FF,$F0,$00,$FF ;4
4816   20AAF FF F0 00 FF     .db $FF,$F0,$00,$FF ;5
4817   20AB3 FF FF FF FF     .db $FF,$FF,$FF,$FF ;6
4818   20AB7 FF F0 00 FF     .db $FF,$F0,$00,$FF ;7
4819   20ABB FF F0 00 FF     .db $FF,$F0,$00,$FF ;8
4820   20ABF F0 00 00 00     .db $F0,$00,$00,$00 ;9
4821   20AC3 F0 00 00 00     .db $F0,$00,$00,$00;10    
4822   20AC7 F0 00 00 00     .db $F0,$00,$00,$00;11
4823   20ACB F0 00 00 00     .db $F0,$00,$00,$00;12
4824   20ACF F0 00 00 00     .db $F0,$00,$00,$00;13
4825   20AD3 F0 00 00 00     .db $F0,$00,$00,$00;14
4826   20AD7 F0 00 00 00     .db $F0,$00,$00,$00;15
4827   20ADB F0 00 00 00     .db $F0,$00,$00,$00;16
4828   20ADF F0 00 00 00     .db $F0,$00,$00,$00;17
4829   20AE3 F0 00 00 00     .db $F0,$00,$00,$00;18
4830   20AE7 F0 00 00 00     .db $F0,$00,$00,$00;19
4831   20AEB F0 00 01 F0     .db $F0,$00,$01,$F0;20 ;may contain 'remainder bits'. zero them out before masking
4832   20AEF FF F0 01 F0     .db $FF,$F0,$01,$F0;21 ;unused format block-(change bit 9 to a 0 before masking)
4833   20AF3 FF F0 01 F0     .db $FF,$F0,$01,$F0;22
4834   20AF7 FF F0 01 F0     .db $FF,$F0,$01,$F0;23
4835   20AFB FF F0 01 F0     .db $FF,$F0,$01,$F0;24
4836   20AFF FF F0 00 00     .db $FF,$F0,$00,$00;25
4837   20B03 FF F0 00 00     .db $FF,$F0,$00,$00;26
4838   20B07 FF F0 00 00     .db $FF,$F0,$00,$00;27
4839   20B0B FF F0 00 00     .db $FF,$F0,$00,$00;28
4840   20B0F             
4841   20B0F             
4842   20B0F             
4843   20B0F             gf_exp_table:
4844   20B0F 01 02 04 08     .db    1,2,4,8,16,32,64,128,29,58,116,232,205,135,19,38,76,152
4844   20B13 10 20 40 80 
4844   20B17 1D 3A 74 E8 
4844   20B1B CD 87 13 26 
4844   20B1F 4C 98 
4845   20B21 2D 5A B4 75     .db    45,90,180,117,234,201,143,3,6,12,24,48,96,192,157,39,78,156
4845   20B25 EA C9 8F 03 
4845   20B29 06 0C 18 30 
4845   20B2D 60 C0 9D 27 
4845   20B31 4E 9C 
4846   20B33 25 4A 94 35     .db    37,74,148,53,106,212,181,119,238,193,159,35,70,140,5,10,20,40
4846   20B37 6A D4 B5 77 
4846   20B3B EE C1 9F 23 
4846   20B3F 46 8C 05 0A 
4846   20B43 14 28 
4847   20B45 50 A0 5D BA     .db    80,160,93,186,105,210,185,111,222,161,95,190,97,194,153,47,94,188
4847   20B49 69 D2 B9 6F 
4847   20B4D DE A1 5F BE 
4847   20B51 61 C2 99 2F 
4847   20B55 5E BC 
4848   20B57 65 CA 89 0F     .db    101,202,137,15,30,60,120,240,253,231,211,187,107,214,177,127,254,225
4848   20B5B 1E 3C 78 F0 
4848   20B5F FD E7 D3 BB 
4848   20B63 6B D6 B1 7F 
4848   20B67 FE E1 
4849   20B69 DF A3 5B B6     .db    223,163,91,182,113,226,217,175,67,134,17,34,68,136,13,26,52,104
4849   20B6D 71 E2 D9 AF 
4849   20B71 43 86 11 22 
4849   20B75 44 88 0D 1A 
4849   20B79 34 68 
4850   20B7B D0 BD 67 CE     .db    208,189,103,206,129,31,62,124,248,237,199,147,59,118,236,197,151,51
4850   20B7F 81 1F 3E 7C 
4850   20B83 F8 ED C7 93 
4850   20B87 3B 76 EC C5 
4850   20B8B 97 33 
4851   20B8D 66 CC 85 17     .db    102,204,133,23,46,92,184,109,218,169,79,158,33,66,132,21,42,84
4851   20B91 2E 5C B8 6D 
4851   20B95 DA A9 4F 9E 
4851   20B99 21 42 84 15 
4851   20B9D 2A 54 
4852   20B9F A8 4D 9A 29     .db    168,77,154,41,82,164,85,170,73,146,57,114,228,213,183,115,230,209
4852   20BA3 52 A4 55 AA 
4852   20BA7 49 92 39 72 
4852   20BAB E4 D5 B7 73 
4852   20BAF E6 D1 
-46976520BB1 BF 63 C6 91     .db    191,99,198,145,63,126,252,229,215,179,123,246,241,255,227,219,171,75
-46976520BB5 3F 7E FC E5 
-46976520BB9 D7 B3 7B F6 
-46976520BBD F1 FF E3 DB 
-46976520BC1 AB 4B 
4854   20BC3 96 31 62 C4     .db    150,49,98,196,149,55,110,220,165,87,174,65,130,25,50,100,200,141
4854   20BC7 95 37 6E DC 
4854   20BCB A5 57 AE 41 
4854   20BCF 82 19 32 64 
4854   20BD3 C8 8D 
4855   20BD5 07 0E 1C 38     .db    7,14,28,56,112,224,221,167,83,166,81,162,89,178,121,242,249,239
4855   20BD9 70 E0 DD A7 
4855   20BDD 53 A6 51 A2 
4855   20BE1 59 B2 79 F2 
4855   20BE5 F9 EF 
4856   20BE7 C3 9B 2B 56     .db    195,155,43,86,172,69,138,9,18,36,72,144,61,122,244,245,247,243
4856   20BEB AC 45 8A 09 
4856   20BEF 12 24 48 90 
4856   20BF3 3D 7A F4 F5 
4856   20BF7 F7 F3 
4857   20BF9 FB EB CB 8B     .db    251,235,203,139,11,22,44,88,176,125,250,233,207,131,27,54,108,216
4857   20BFD 0B 16 2C 58 
4857   20C01 B0 7D FA E9 
4857   20C05 CF 83 1B 36 
4857   20C09 6C D8 
4858   20C0B AD 47 8E 01     .db    173,71,142,1,2,4,8,16,32,64,128,29,58,116,232,205,135,19
4858   20C0F 02 04 08 10 
4858   20C13 20 40 80 1D 
4858   20C17 3A 74 E8 CD 
4858   20C1B 87 13 
4859   20C1D 26 4C 98 2D     .db    38,76,152,45,90,180,117,234,201,143,3,6,12,24,48,96,192,157
4859   20C21 5A B4 75 EA 
4859   20C25 C9 8F 03 06 
4859   20C29 0C 18 30 60 
4859   20C2D C0 9D 
4860   20C2F 27 4E 9C 25     .db    39,78,156,37,74,148,53,106,212,181,119,238,193,159,35,70,140,5
4860   20C33 4A 94 35 6A 
4860   20C37 D4 B5 77 EE 
4860   20C3B C1 9F 23 46 
4860   20C3F 8C 05 
4861   20C41 0A 14 28 50     .db    10,20,40,80,160,93,186,105,210,185,111,222,161,95,190,97,194,153
4861   20C45 A0 5D BA 69 
4861   20C49 D2 B9 6F DE 
4861   20C4D A1 5F BE 61 
4861   20C51 C2 99 
4862   20C53 2F 5E BC 65     .db    47,94,188,101,202,137,15,30,60,120,240,253,231,211,187,107,214,177
4862   20C57 CA 89 0F 1E 
4862   20C5B 3C 78 F0 FD 
4862   20C5F E7 D3 BB 6B 
4862   20C63 D6 B1 
4863   20C65 7F FE E1 DF     .db    127,254,225,223,163,91,182,113,226,217,175,67,134,17,34,68,136,13
4863   20C69 A3 5B B6 71 
4863   20C6D E2 D9 AF 43 
4863   20C71 86 11 22 44 
4863   20C75 88 0D 
4864   20C77 1A 34 68 D0     .db    26,52,104,208,189,103,206,129,31,62,124,248,237,199,147,59,118,236
4864   20C7B BD 67 CE 81 
4864   20C7F 1F 3E 7C F8 
4864   20C83 ED C7 93 3B 
4864   20C87 76 EC 
4865   20C89 C5 97 33 66     .db    197,151,51,102,204,133,23,46,92,184,109,218,169,79,158,33,66,132
4865   20C8D CC 85 17 2E 
4865   20C91 5C B8 6D DA 
4865   20C95 A9 4F 9E 21 
4865   20C99 42 84 
4866   20C9B 15 2A 54 A8     .db    21,42,84,168,77,154,41,82,164,85,170,73,146,57,114,228,213,183
4866   20C9F 4D 9A 29 52 
4866   20CA3 A4 55 AA 49 
4866   20CA7 92 39 72 E4 
4866   20CAB D5 B7 
4867   20CAD 73 E6 D1 BF     .db    115,230,209,191,99,198,145,63,126,252,229,215,179,123,246,241,255,227
4867   20CB1 63 C6 91 3F 
4867   20CB5 7E FC E5 D7 
4867   20CB9 B3 7B F6 F1 
4867   20CBD FF E3 
4868   20CBF DB AB 4B 96     .db    219,171,75,150,49,98,196,149,55,110,220,165,87,174,65,130,25,50
4868   20CC3 31 62 C4 95 
4868   20CC7 37 6E DC A5 
4868   20CCB 57 AE 41 82 
4868   20CCF 19 32 
4869   20CD1 64 C8 8D 07     .db    100,200,141,7,14,28,56,112,224,221,167,83,166,81,162,89,178,121
4869   20CD5 0E 1C 38 70 
4869   20CD9 E0 DD A7 53 
4869   20CDD A6 51 A2 59 
4869   20CE1 B2 79 
4870   20CE3 F2 F9 EF C3     .db    242,249,239,195,155,43,86,172,69,138,9,18,36,72,144,61,122,244
4870   20CE7 9B 2B 56 AC 
4870   20CEB 45 8A 09 12 
4870   20CEF 24 48 90 3D 
4870   20CF3 7A F4 
4871   20CF5 F5 F7 F3 FB     .db    245,247,243,251,235,203,139,11,22,44,88,176,125,250,233,207,131,27
4871   20CF9 EB CB 8B 0B 
4871   20CFD 16 2C 58 B0 
4871   20D01 7D FA E9 CF 
4871   20D05 83 1B 
4872   20D07 36 6C D8 AD     .db    54,108,216,173,71,142
4872   20D0B 47 8E 
4873   20D0D             
4874   20D0D             gf_log_table:
4875   20D0D 00 00 01 19     .db    0,0,1,25,2,50,26,198,3,223,51,238,27,104,199,75
4875   20D11 02 32 1A C6 
4875   20D15 03 DF 33 EE 
4875   20D19 1B 68 C7 4B 
4876   20D1D 04 64 E0 0E     .db    4,100,224,14,52,141,239,129,28,193,105,248,200,8,76
4876   20D21 34 8D EF 81 
4876   20D25 1C C1 69 F8 
4876   20D29 C8 08 4C 
4877   20D2C 71 05 8A 65     .db    113,5,138,101,47,225,36,15,33,53,147,142,218,240,18
4877   20D30 2F E1 24 0F 
4877   20D34 21 35 93 8E 
4877   20D38 DA F0 12 
4878   20D3B 82 45 1D B5     .db    130,69,29,181,194,125,106,39,249,185,201,154,9,120,77
4878   20D3F C2 7D 6A 27 
4878   20D43 F9 B9 C9 9A 
4878   20D47 09 78 4D 
4879   20D4A E4 72 A6 06     .db    228,114,166,6,191,139,98,102,221,48,253,226,152,37,179
4879   20D4E BF 8B 62 66 
4879   20D52 DD 30 FD E2 
4879   20D56 98 25 B3 
4880   20D59 10 91 22 88     .db    16,145,34,136,54,208,148,206,143,150,219,189,241,210,19
4880   20D5D 36 D0 94 CE 
4880   20D61 8F 96 DB BD 
4880   20D65 F1 D2 13 
4881   20D68 5C 83 38 46     .db    92,131,56,70,64,30,66,182,163,195,72,126,110,107,58
4881   20D6C 40 1E 42 B6 
4881   20D70 A3 C3 48 7E 
4881   20D74 6E 6B 3A 
4882   20D77 28 54 FA 85     .db    40,84,250,133,186,61,202,94,155,159,10,21,121,43,78
4882   20D7B BA 3D CA 5E 
4882   20D7F 9B 9F 0A 15 
4882   20D83 79 2B 4E 
4883   20D86 D4 E5 AC 73     .db    212,229,172,115,243,167,87,7,112,192,247,140,128,99,13
4883   20D8A F3 A7 57 07 
4883   20D8E 70 C0 F7 8C 
4883   20D92 80 63 0D 
4884   20D95 67 4A DE ED     .db    103,74,222,237,49,197,254,24,227,165,153,119,38,184,180
4884   20D99 31 C5 FE 18 
4884   20D9D E3 A5 99 77 
4884   20DA1 26 B8 B4 
4885   20DA4 7C 11 44 92     .db    124,17,68,146,217,35,32,137,46,55,63,209,91,149,188
4885   20DA8 D9 23 20 89 
4885   20DAC 2E 37 3F D1 
4885   20DB0 5B 95 BC 
4886   20DB3 CF CD 90 87     .db    207,205,144,135,151,178,220,252,190,97,242,86,211,171,20
4886   20DB7 97 B2 DC FC 
4886   20DBB BE 61 F2 56 
4886   20DBF D3 AB 14 
4887   20DC2 2A 5D 9E 84     .db    42,93,158,132,60,57,83,71,109,65,162,31,45,67,216
4887   20DC6 3C 39 53 47 
4887   20DCA 6D 41 A2 1F 
4887   20DCE 2D 43 D8 
4888   20DD1 B7 7B A4 76     .db    183,123,164,118,196,23,73,236,127,12,111,246,108,161,59
4888   20DD5 C4 17 49 EC 
4888   20DD9 7F 0C 6F F6 
4888   20DDD 6C A1 3B 
4889   20DE0 52 29 9D 55     .db    82,41,157,85,170,251,96,134,177,187,204,62,90,203,89
4889   20DE4 AA FB 60 86 
4889   20DE8 B1 BB CC 3E 
4889   20DEC 5A CB 59 
4890   20DEF 5F B0 9C A9     .db    95,176,156,169,160,81,11,245,22,235,122,117,44,215,79
4890   20DF3 A0 51 0B F5 
4890   20DF7 16 EB 7A 75 
4890   20DFB 2C D7 4F 
4891   20DFE AE D5 E9 E6     .db    174,213,233,230,231,173,232,116,214,244,234,168,80,88,175   
4891   20E02 E7 AD E8 74 
4891   20E06 D6 F4 EA A8 
4891   20E0A 50 58 AF 
4892   20E0D             
4893   20E0D 00 00       rs_p1:       .db         $00,$00
4894   20E0F 00 00       rs_p2:       .db         $00,$00   ;enc pointers
4895   20E11 00 00       rs_p1s:      .db         $00,$00
4896   20E13 00 00       rs_p2s:      .db         $00,$00
4897   20E15 00 00       rs_pr:       .db         $00,$00
4898   20E17 00          p1len:       .db         $00
4899   20E18 00          p2len:       .db         $00
4900   20E19 00          pResLen:     .db         $00
4901   20E1A 00 00       pMultRes_p:  .db        